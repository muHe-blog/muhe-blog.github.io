<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>网易163邮箱登录RSA加密</title>
      <link href="/2024/05/08/%E7%BD%91%E6%98%93163%E9%82%AE%E7%AE%B1%E7%99%BB%E5%BD%95RSA%E5%8A%A0%E5%AF%86/"/>
      <url>/2024/05/08/%E7%BD%91%E6%98%93163%E9%82%AE%E7%AE%B1%E7%99%BB%E5%BD%95RSA%E5%8A%A0%E5%AF%86/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="一、逆向目标"><a href="#一、逆向目标" class="headerlink" title="一、逆向目标"></a>一、逆向目标</h1><ul><li>目标：网易163邮箱登录RSA加密018</li><li>链接：<a href="https://smart.mail.163.com/login.htm">https://smart.mail.163.com/login.htm</a></li><li>简介：定位<strong>密码字段</strong>的加密算法和<strong>encParams</strong>参数的加密过程</li></ul><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081044026.png" alt="image.png"> </p><h1 id="二、逆向参数"><a href="#二、逆向参数" class="headerlink" title="二、逆向参数"></a>二、逆向参数</h1><h2 id="1-密码字段pw"><a href="#1-密码字段pw" class="headerlink" title="1. 密码字段pw"></a>1. 密码字段pw</h2><h3 id="（1）定位密码字段"><a href="#（1）定位密码字段" class="headerlink" title="（1）定位密码字段"></a>（1）定位密码字段</h3><p>查看network字段，发现有3个可能涉及的请求接口：”gt”、”l”、”powGetp”</p><p>里面请求体都为 encParams加密字段，所以判断不出哪个接口是真正的password加密</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081048395.png" alt="image.png"> </p><p>所以，这块需要将这三个接口都打XHR断点。每个接口都进行跟栈。</p><p>直接无脑xhr断点，一步步向上跟栈就完事了。。。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081048448.png" alt="image.png"> </p><h3 id="（2）第一个接口：”gt”"><a href="#（2）第一个接口：”gt”" class="headerlink" title="（2）第一个接口：”gt”"></a>（2）第一个接口：”gt”</h3><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081057585.png" alt="image.png"> </p><p>向前跟栈，看能不能定位到和password相关的内容：这块具体过程就省略了……</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081057559.png" alt="image.png"> </p><p>继续向前一步跟栈，发现输入的用户名成功显示了，但没有任何密码相关的字段</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081058772.png" alt="image.png"> </p><p>向前继续跟一下栈，确实没有发现任何密码字段相关内容。猜测该<strong>接口 “gt” 不是密码加密接口</strong>。</p><h3 id="（3）第二个接口：”l”"><a href="#（3）第二个接口：”l”" class="headerlink" title="（3）第二个接口：”l”"></a>（3）第二个接口：”l”</h3><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081058487.png" alt="image.png"> </p><p>向前跟栈……</p><p>找到了这样一个栈中提到了”un”和”pw”字段，不出意外，对应下来，应该是用户名和加密后的密码</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081058410.png" alt="image.png"> </p><p>再向前跟栈，最终定位pw字段最后一次出现的位置：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081059207.png" alt="image.png"> </p><p>再往前跟栈，发现找不到pw字段了。所以，这块在当前JS中搜索关键字 “pw”</p><p>找到多处，仔细观察发现涉及到pw的代码都有出现函数<strong>MP.encrypt2</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">e.pw = MP.encrypt2(this.__password);</span><br><span class="line">t.pw = MP.encrypt2(this.$refs.mpinput._$getValue() || &quot;0&quot;);</span><br><span class="line">t.pw = MP.encrypt2(i);</span><br><span class="line">e.pw = MP.encrypt2(this.__password);</span><br></pre></td></tr></table></figure><p>下断点，最终在 “t.pw &#x3D; MP.encrypt2(i);” 位置断下：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081107555.png" alt="image.png"> </p><p>也就说明 <strong>MP.encrypt2</strong> 是真正的加密函数。</p><h3 id="（4）第三个接口”powGetp”"><a href="#（4）第三个接口”powGetp”" class="headerlink" title="（4）第三个接口”powGetp”"></a>（4）第三个接口”powGetp”</h3><p>这个就不说了，和上面分析思路类似。看了下跟密码字段也没啥关系</p><h3 id="（5）MP-encrypt2加密函数分析"><a href="#（5）MP-encrypt2加密函数分析" class="headerlink" title="（5）MP.encrypt2加密函数分析"></a>（5）MP.encrypt2加密函数分析</h3><p>确认为RSA加密。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081109251.png" alt="image.png"> </p><p>硬扣代码：搞定！</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var QRCode;</span><br><span class="line">!function() &#123;</span><br><span class="line">    function e(e) &#123;</span><br><span class="line">        this.mode = o.MODE_8BIT_BYTE,</span><br><span class="line">        this.data = e,</span><br><span class="line">        this.parsedData = [];</span><br><span class="line">        for (var t = 0, n = this.data.length; t &lt; n; t++) &#123;</span><br><span class="line">            var i = []</span><br><span class="line">              , r = this.data.charCodeAt(t);</span><br><span class="line">            r &gt; 65536 ? (i[0] = 240 | (1835008 &amp; r) &gt;&gt;&gt; 18,</span><br><span class="line">            i[1] = 128 | (258048 &amp; r) &gt;&gt;&gt; 12,</span><br><span class="line">            i[2] = 128 | (4032 &amp; r) &gt;&gt;&gt; 6,</span><br><span class="line">            i[3] = 128 | 63 &amp; r) : r &gt; 2048 ? (i[0] = 224 | (61440 &amp; r) &gt;&gt;&gt; 12,</span><br><span class="line">            i[1] = 128 | (4032 &amp; r) &gt;&gt;&gt; 6,</span><br><span class="line">            i[2] = 128 | 63 &amp; r) : r &gt; 128 ? (i[0] = 192 | (1984 &amp; r) &gt;&gt;&gt; 6,</span><br><span class="line">            i[1] = 128 | 63 &amp; r) : i[0] = r,</span><br><span class="line">            this.parsedData.push(i)</span><br><span class="line">        &#125;</span><br><span class="line">        this.parsedData = Array.prototype.concat.apply([], this.parsedData),</span><br><span class="line">        this.parsedData.length != this.data.length &amp;&amp; (this.parsedData.unshift(191),</span><br><span class="line">        this.parsedData.unshift(187),</span><br><span class="line">        this.parsedData.unshift(239))</span><br><span class="line">    &#125;</span><br><span class="line">    function t(e, t) &#123;</span><br><span class="line">        this.typeNumber = e,</span><br><span class="line">        this.errorCorrectLevel = t,</span><br><span class="line">        this.modules = null,</span><br><span class="line">        this.moduleCount = 0,</span><br><span class="line">        this.dataCache = null,</span><br><span class="line">        this.dataList = []</span><br><span class="line">    &#125;</span><br><span class="line">    function n(e, t) &#123;</span><br><span class="line">        if (void 0 == e.length)</span><br><span class="line">            throw new Error(e.length + &quot;/&quot; + t);</span><br><span class="line">        for (var n = 0; n &lt; e.length &amp;&amp; 0 == e[n]; )</span><br><span class="line">            n++;</span><br><span class="line">        this.num = new Array(e.length - n + t);</span><br><span class="line">        for (var i = 0; i &lt; e.length - n; i++)</span><br><span class="line">            this.num[i] = e[i + n]</span><br><span class="line">    &#125;</span><br><span class="line">    function i(e, t) &#123;</span><br><span class="line">        this.totalCount = e,</span><br><span class="line">        this.dataCount = t</span><br><span class="line">    &#125;</span><br><span class="line">    function r() &#123;</span><br><span class="line">        this.buffer = [],</span><br><span class="line">        this.length = 0</span><br><span class="line">    &#125;</span><br><span class="line">    function a() &#123;</span><br><span class="line">        var e = !1</span><br><span class="line">          , t = navigator.userAgent;</span><br><span class="line">        if (/android/i.test(t)) &#123;</span><br><span class="line">            e = !0;</span><br><span class="line">            var n = t.toString().match(/android ([0-9]\.[0-9])/i);</span><br><span class="line">            n &amp;&amp; n[1] &amp;&amp; (e = parseFloat(n[1]))</span><br><span class="line">        &#125;</span><br><span class="line">        return e</span><br><span class="line">    &#125;</span><br><span class="line">    function s(e, t) &#123;</span><br><span class="line">        for (var n = 1, i = function(e) &#123;</span><br><span class="line">            var t = encodeURI(e).toString().replace(/\%[0-9a-fA-F]&#123;2&#125;/g, &quot;a&quot;);</span><br><span class="line">            return t.length + (t.length != e ? 3 : 0)</span><br><span class="line">        &#125;(e), r = 0, a = y.length; r &lt;= a; r++) &#123;</span><br><span class="line">            var s = 0;</span><br><span class="line">            switch (t) &#123;</span><br><span class="line">            case c.L:</span><br><span class="line">                s = y[r][0];</span><br><span class="line">                break;</span><br><span class="line">            case c.M:</span><br><span class="line">                s = y[r][1];</span><br><span class="line">                break;</span><br><span class="line">            case c.Q:</span><br><span class="line">                s = y[r][2];</span><br><span class="line">                break;</span><br><span class="line">            case c.H:</span><br><span class="line">                s = y[r][3]</span><br><span class="line">            &#125;</span><br><span class="line">            if (i &lt;= s)</span><br><span class="line">                break;</span><br><span class="line">            n++</span><br><span class="line">        &#125;</span><br><span class="line">        if (n &gt; y.length)</span><br><span class="line">            throw new Error(&quot;Too long data&quot;);</span><br><span class="line">        return n</span><br><span class="line">    &#125;</span><br><span class="line">    e.prototype = &#123;</span><br><span class="line">        getLength: function(e) &#123;</span><br><span class="line">            return this.parsedData.length</span><br><span class="line">        &#125;,</span><br><span class="line">        write: function(e) &#123;</span><br><span class="line">            for (var t = 0, n = this.parsedData.length; t &lt; n; t++)</span><br><span class="line">                e.put(this.parsedData[t], 8)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    t.prototype = &#123;</span><br><span class="line">        addData: function(t) &#123;</span><br><span class="line">            var n = new e(t);</span><br><span class="line">            this.dataList.push(n),</span><br><span class="line">            this.dataCache = null</span><br><span class="line">        &#125;,</span><br><span class="line">        isDark: function(e, t) &#123;</span><br><span class="line">            if (e &lt; 0 || this.moduleCount &lt;= e || t &lt; 0 || this.moduleCount &lt;= t)</span><br><span class="line">                throw new Error(e + &quot;,&quot; + t);</span><br><span class="line">            return this.modules[e][t]</span><br><span class="line">        &#125;,</span><br><span class="line">        getModuleCount: function() &#123;</span><br><span class="line">            return this.moduleCount</span><br><span class="line">        &#125;,</span><br><span class="line">        make: function() &#123;</span><br><span class="line">            this.makeImpl(!1, this.getBestMaskPattern())</span><br><span class="line">        &#125;,</span><br><span class="line">        makeImpl: function(e, n) &#123;</span><br><span class="line">            this.moduleCount = 4 * this.typeNumber + 17,</span><br><span class="line">            this.modules = new Array(this.moduleCount);</span><br><span class="line">            for (var i = 0; i &lt; this.moduleCount; i++) &#123;</span><br><span class="line">                this.modules[i] = new Array(this.moduleCount);</span><br><span class="line">                for (var r = 0; r &lt; this.moduleCount; r++)</span><br><span class="line">                    this.modules[i][r] = null</span><br><span class="line">            &#125;</span><br><span class="line">            this.setupPositionProbePattern(0, 0),</span><br><span class="line">            this.setupPositionProbePattern(this.moduleCount - 7, 0),</span><br><span class="line">            this.setupPositionProbePattern(0, this.moduleCount - 7),</span><br><span class="line">            this.setupPositionAdjustPattern(),</span><br><span class="line">            this.setupTimingPattern(),</span><br><span class="line">            this.setupTypeInfo(e, n),</span><br><span class="line">            this.typeNumber &gt;= 7 &amp;&amp; this.setupTypeNumber(e),</span><br><span class="line">            null == this.dataCache &amp;&amp; (this.dataCache = t.createData(this.typeNumber, this.errorCorrectLevel, this.dataList)),</span><br><span class="line">            this.mapData(this.dataCache, n)</span><br><span class="line">        &#125;,</span><br><span class="line">        setupPositionProbePattern: function(e, t) &#123;</span><br><span class="line">            for (var n = -1; n &lt;= 7; n++)</span><br><span class="line">                if (!(e + n &lt;= -1 || this.moduleCount &lt;= e + n))</span><br><span class="line">                    for (var i = -1; i &lt;= 7; i++)</span><br><span class="line">                        t + i &lt;= -1 || this.moduleCount &lt;= t + i || (this.modules[e + n][t + i] = 0 &lt;= n &amp;&amp; n &lt;= 6 &amp;&amp; (0 == i || 6 == i) || 0 &lt;= i &amp;&amp; i &lt;= 6 &amp;&amp; (0 == n || 6 == n) || 2 &lt;= n &amp;&amp; n &lt;= 4 &amp;&amp; 2 &lt;= i &amp;&amp; i &lt;= 4)</span><br><span class="line">        &#125;,</span><br><span class="line">        getBestMaskPattern: function() &#123;</span><br><span class="line">            for (var e = 0, t = 0, n = 0; n &lt; 8; n++) &#123;</span><br><span class="line">                this.makeImpl(!0, n);</span><br><span class="line">                var i = g.getLostPoint(this);</span><br><span class="line">                (0 == n || e &gt; i) &amp;&amp; (e = i,</span><br><span class="line">                t = n)</span><br><span class="line">            &#125;</span><br><span class="line">            return t</span><br><span class="line">        &#125;,</span><br><span class="line">        createMovieClip: function(e, t, n) &#123;</span><br><span class="line">            var i = e.createEmptyMovieClip(t, n);</span><br><span class="line">            this.make();</span><br><span class="line">            for (var r = 0; r &lt; this.modules.length; r++)</span><br><span class="line">                for (var a = 1 * r, s = 0; s &lt; this.modules[r].length; s++) &#123;</span><br><span class="line">                    var o = 1 * s;</span><br><span class="line">                    this.modules[r][s] &amp;&amp; (i.beginFill(0, 100),</span><br><span class="line">                    i.moveTo(o, a),</span><br><span class="line">                    i.lineTo(o + 1, a),</span><br><span class="line">                    i.lineTo(o + 1, a + 1),</span><br><span class="line">                    i.lineTo(o, a + 1),</span><br><span class="line">                    i.endFill())</span><br><span class="line">                &#125;</span><br><span class="line">            return i</span><br><span class="line">        &#125;,</span><br><span class="line">        setupTimingPattern: function() &#123;</span><br><span class="line">            for (var e = 8; e &lt; this.moduleCount - 8; e++)</span><br><span class="line">                null == this.modules[e][6] &amp;&amp; (this.modules[e][6] = e % 2 == 0);</span><br><span class="line">            for (var t = 8; t &lt; this.moduleCount - 8; t++)</span><br><span class="line">                null == this.modules[6][t] &amp;&amp; (this.modules[6][t] = t % 2 == 0)</span><br><span class="line">        &#125;,</span><br><span class="line">        setupPositionAdjustPattern: function() &#123;</span><br><span class="line">            for (var e = g.getPatternPosition(this.typeNumber), t = 0; t &lt; e.length; t++)</span><br><span class="line">                for (var n = 0; n &lt; e.length; n++) &#123;</span><br><span class="line">                    var i = e[t]</span><br><span class="line">                      , r = e[n];</span><br><span class="line">                    if (null == this.modules[i][r])</span><br><span class="line">                        for (var a = -2; a &lt;= 2; a++)</span><br><span class="line">                            for (var s = -2; s &lt;= 2; s++)</span><br><span class="line">                                this.modules[i + a][r + s] = -2 == a || 2 == a || -2 == s || 2 == s || 0 == a &amp;&amp; 0 == s</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        setupTypeNumber: function(e) &#123;</span><br><span class="line">            for (var t = g.getBCHTypeNumber(this.typeNumber), n = 0; n &lt; 18; n++) &#123;</span><br><span class="line">                var i = !e &amp;&amp; 1 == (t &gt;&gt; n &amp; 1);</span><br><span class="line">                this.modules[Math.floor(n / 3)][n % 3 + this.moduleCount - 8 - 3] = i</span><br><span class="line">            &#125;</span><br><span class="line">            for (n = 0; n &lt; 18; n++) &#123;</span><br><span class="line">                i = !e &amp;&amp; 1 == (t &gt;&gt; n &amp; 1);</span><br><span class="line">                this.modules[n % 3 + this.moduleCount - 8 - 3][Math.floor(n / 3)] = i</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        setupTypeInfo: function(e, t) &#123;</span><br><span class="line">            for (var n = this.errorCorrectLevel &lt;&lt; 3 | t, i = g.getBCHTypeInfo(n), r = 0; r &lt; 15; r++) &#123;</span><br><span class="line">                var a = !e &amp;&amp; 1 == (i &gt;&gt; r &amp; 1);</span><br><span class="line">                r &lt; 6 ? this.modules[r][8] = a : r &lt; 8 ? this.modules[r + 1][8] = a : this.modules[this.moduleCount - 15 + r][8] = a</span><br><span class="line">            &#125;</span><br><span class="line">            for (r = 0; r &lt; 15; r++) &#123;</span><br><span class="line">                a = !e &amp;&amp; 1 == (i &gt;&gt; r &amp; 1);</span><br><span class="line">                r &lt; 8 ? this.modules[8][this.moduleCount - r - 1] = a : r &lt; 9 ? this.modules[8][15 - r - 1 + 1] = a : this.modules[8][15 - r - 1] = a</span><br><span class="line">            &#125;</span><br><span class="line">            this.modules[this.moduleCount - 8][8] = !e</span><br><span class="line">        &#125;,</span><br><span class="line">        mapData: function(e, t) &#123;</span><br><span class="line">            for (var n = -1, i = this.moduleCount - 1, r = 7, a = 0, s = this.moduleCount - 1; s &gt; 0; s -= 2)</span><br><span class="line">                for (6 == s &amp;&amp; s--; ; ) &#123;</span><br><span class="line">                    for (var o = 0; o &lt; 2; o++)</span><br><span class="line">                        if (null == this.modules[i][s - o]) &#123;</span><br><span class="line">                            var c = !1;</span><br><span class="line">                            a &lt; e.length &amp;&amp; (c = 1 == (e[a] &gt;&gt;&gt; r &amp; 1)),</span><br><span class="line">                            g.getMask(t, i, s - o) &amp;&amp; (c = !c),</span><br><span class="line">                            this.modules[i][s - o] = c,</span><br><span class="line">                            -1 == --r &amp;&amp; (a++,</span><br><span class="line">                            r = 7)</span><br><span class="line">                        &#125;</span><br><span class="line">                    if ((i += n) &lt; 0 || this.moduleCount &lt;= i) &#123;</span><br><span class="line">                        i -= n,</span><br><span class="line">                        n = -n;</span><br><span class="line">                        break</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    t.PAD0 = 236,</span><br><span class="line">    t.PAD1 = 17,</span><br><span class="line">    t.createData = function(e, n, a) &#123;</span><br><span class="line">        for (var s = i.getRSBlocks(e, n), o = new r, c = 0; c &lt; a.length; c++) &#123;</span><br><span class="line">            var u = a[c];</span><br><span class="line">            o.put(u.mode, 4),</span><br><span class="line">            o.put(u.getLength(), g.getLengthInBits(u.mode, e)),</span><br><span class="line">            u.write(o)</span><br><span class="line">        &#125;</span><br><span class="line">        var l = 0;</span><br><span class="line">        for (c = 0; c &lt; s.length; c++)</span><br><span class="line">            l += s[c].dataCount;</span><br><span class="line">        if (o.getLengthInBits() &gt; 8 * l)</span><br><span class="line">            throw new Error(&quot;code length overflow. (&quot; + o.getLengthInBits() + &quot;&gt;&quot; + 8 * l + &quot;)&quot;);</span><br><span class="line">        for (o.getLengthInBits() + 4 &lt;= 8 * l &amp;&amp; o.put(0, 4); o.getLengthInBits() % 8 != 0; )</span><br><span class="line">            o.putBit(!1);</span><br><span class="line">        for (; !(o.getLengthInBits() &gt;= 8 * l || (o.put(t.PAD0, 8),</span><br><span class="line">        o.getLengthInBits() &gt;= 8 * l)); )</span><br><span class="line">            o.put(t.PAD1, 8);</span><br><span class="line">        return t.createBytes(o, s)</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    t.createBytes = function(e, t) &#123;</span><br><span class="line">        for (var i = 0, r = 0, a = 0, s = new Array(t.length), o = new Array(t.length), c = 0; c &lt; t.length; c++) &#123;</span><br><span class="line">            var u = t[c].dataCount</span><br><span class="line">              , l = t[c].totalCount - u;</span><br><span class="line">            r = Math.max(r, u),</span><br><span class="line">            a = Math.max(a, l),</span><br><span class="line">            s[c] = new Array(u);</span><br><span class="line">            for (var d = 0; d &lt; s[c].length; d++)</span><br><span class="line">                s[c][d] = 255 &amp; e.buffer[d + i];</span><br><span class="line">            i += u;</span><br><span class="line">            var _ = g.getErrorCorrectPolynomial(l)</span><br><span class="line">              , f = new n(s[c],_.getLength() - 1).mod(_);</span><br><span class="line">            o[c] = new Array(_.getLength() - 1);</span><br><span class="line">            for (d = 0; d &lt; o[c].length; d++) &#123;</span><br><span class="line">                var h = d + f.getLength() - o[c].length;</span><br><span class="line">                o[c][d] = h &gt;= 0 ? f.get(h) : 0</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        var p = 0;</span><br><span class="line">        for (d = 0; d &lt; t.length; d++)</span><br><span class="line">            p += t[d].totalCount;</span><br><span class="line">        var m = new Array(p)</span><br><span class="line">          , b = 0;</span><br><span class="line">        for (d = 0; d &lt; r; d++)</span><br><span class="line">            for (c = 0; c &lt; t.length; c++)</span><br><span class="line">                d &lt; s[c].length &amp;&amp; (m[b++] = s[c][d]);</span><br><span class="line">        for (d = 0; d &lt; a; d++)</span><br><span class="line">            for (c = 0; c &lt; t.length; c++)</span><br><span class="line">                d &lt; o[c].length &amp;&amp; (m[b++] = o[c][d]);</span><br><span class="line">        return m</span><br><span class="line">    &#125;</span><br><span class="line">    ;</span><br><span class="line">    for (var o = &#123;</span><br><span class="line">        MODE_NUMBER: 1,</span><br><span class="line">        MODE_ALPHA_NUM: 2,</span><br><span class="line">        MODE_8BIT_BYTE: 4,</span><br><span class="line">        MODE_KANJI: 8</span><br><span class="line">    &#125;, c = &#123;</span><br><span class="line">        L: 1,</span><br><span class="line">        M: 0,</span><br><span class="line">        Q: 3,</span><br><span class="line">        H: 2</span><br><span class="line">    &#125;, u = 0, l = 1, d = 2, _ = 3, f = 4, h = 5, p = 6, m = 7, g = &#123;</span><br><span class="line">        PATTERN_POSITION_TABLE: [[], [6, 18], [6, 22], [6, 26], [6, 30], [6, 34], [6, 22, 38], [6, 24, 42], [6, 26, 46], [6, 28, 50], [6, 30, 54], [6, 32, 58], [6, 34, 62], [6, 26, 46, 66], [6, 26, 48, 70], [6, 26, 50, 74], [6, 30, 54, 78], [6, 30, 56, 82], [6, 30, 58, 86], [6, 34, 62, 90], [6, 28, 50, 72, 94], [6, 26, 50, 74, 98], [6, 30, 54, 78, 102], [6, 28, 54, 80, 106], [6, 32, 58, 84, 110], [6, 30, 58, 86, 114], [6, 34, 62, 90, 118], [6, 26, 50, 74, 98, 122], [6, 30, 54, 78, 102, 126], [6, 26, 52, 78, 104, 130], [6, 30, 56, 82, 108, 134], [6, 34, 60, 86, 112, 138], [6, 30, 58, 86, 114, 142], [6, 34, 62, 90, 118, 146], [6, 30, 54, 78, 102, 126, 150], [6, 24, 50, 76, 102, 128, 154], [6, 28, 54, 80, 106, 132, 158], [6, 32, 58, 84, 110, 136, 162], [6, 26, 54, 82, 110, 138, 166], [6, 30, 58, 86, 114, 142, 170]],</span><br><span class="line">        G15: 1335,</span><br><span class="line">        G18: 7973,</span><br><span class="line">        G15_MASK: 21522,</span><br><span class="line">        getBCHTypeInfo: function(e) &#123;</span><br><span class="line">            for (var t = e &lt;&lt; 10; g.getBCHDigit(t) - g.getBCHDigit(g.G15) &gt;= 0; )</span><br><span class="line">                t ^= g.G15 &lt;&lt; g.getBCHDigit(t) - g.getBCHDigit(g.G15);</span><br><span class="line">            return (e &lt;&lt; 10 | t) ^ g.G15_MASK</span><br><span class="line">        &#125;,</span><br><span class="line">        getBCHTypeNumber: function(e) &#123;</span><br><span class="line">            for (var t = e &lt;&lt; 12; g.getBCHDigit(t) - g.getBCHDigit(g.G18) &gt;= 0; )</span><br><span class="line">                t ^= g.G18 &lt;&lt; g.getBCHDigit(t) - g.getBCHDigit(g.G18);</span><br><span class="line">            return e &lt;&lt; 12 | t</span><br><span class="line">        &#125;,</span><br><span class="line">        getBCHDigit: function(e) &#123;</span><br><span class="line">            for (var t = 0; 0 != e; )</span><br><span class="line">                t++,</span><br><span class="line">                e &gt;&gt;&gt;= 1;</span><br><span class="line">            return t</span><br><span class="line">        &#125;,</span><br><span class="line">        getPatternPosition: function(e) &#123;</span><br><span class="line">            return g.PATTERN_POSITION_TABLE[e - 1]</span><br><span class="line">        &#125;,</span><br><span class="line">        getMask: function(e, t, n) &#123;</span><br><span class="line">            switch (e) &#123;</span><br><span class="line">            case u:</span><br><span class="line">                return (t + n) % 2 == 0;</span><br><span class="line">            case l:</span><br><span class="line">                return t % 2 == 0;</span><br><span class="line">            case d:</span><br><span class="line">                return n % 3 == 0;</span><br><span class="line">            case _:</span><br><span class="line">                return (t + n) % 3 == 0;</span><br><span class="line">            case f:</span><br><span class="line">                return (Math.floor(t / 2) + Math.floor(n / 3)) % 2 == 0;</span><br><span class="line">            case h:</span><br><span class="line">                return t * n % 2 + t * n % 3 == 0;</span><br><span class="line">            case p:</span><br><span class="line">                return (t * n % 2 + t * n % 3) % 2 == 0;</span><br><span class="line">            case m:</span><br><span class="line">                return (t * n % 3 + (t + n) % 2) % 2 == 0;</span><br><span class="line">            default:</span><br><span class="line">                throw new Error(&quot;bad maskPattern:&quot; + e)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        getErrorCorrectPolynomial: function(e) &#123;</span><br><span class="line">            for (var t = new n([1],0), i = 0; i &lt; e; i++)</span><br><span class="line">                t = t.multiply(new n([1, b.gexp(i)],0));</span><br><span class="line">            return t</span><br><span class="line">        &#125;,</span><br><span class="line">        getLengthInBits: function(e, t) &#123;</span><br><span class="line">            if (1 &lt;= t &amp;&amp; t &lt; 10)</span><br><span class="line">                switch (e) &#123;</span><br><span class="line">                case o.MODE_NUMBER:</span><br><span class="line">                    return 10;</span><br><span class="line">                case o.MODE_ALPHA_NUM:</span><br><span class="line">                    return 9;</span><br><span class="line">                case o.MODE_8BIT_BYTE:</span><br><span class="line">                case o.MODE_KANJI:</span><br><span class="line">                    return 8;</span><br><span class="line">                default:</span><br><span class="line">                    throw new Error(&quot;mode:&quot; + e)</span><br><span class="line">                &#125;</span><br><span class="line">            else if (t &lt; 27)</span><br><span class="line">                switch (e) &#123;</span><br><span class="line">                case o.MODE_NUMBER:</span><br><span class="line">                    return 12;</span><br><span class="line">                case o.MODE_ALPHA_NUM:</span><br><span class="line">                    return 11;</span><br><span class="line">                case o.MODE_8BIT_BYTE:</span><br><span class="line">                    return 16;</span><br><span class="line">                case o.MODE_KANJI:</span><br><span class="line">                    return 10;</span><br><span class="line">                default:</span><br><span class="line">                    throw new Error(&quot;mode:&quot; + e)</span><br><span class="line">                &#125;</span><br><span class="line">            else &#123;</span><br><span class="line">                if (!(t &lt; 41))</span><br><span class="line">                    throw new Error(&quot;type:&quot; + t);</span><br><span class="line">                switch (e) &#123;</span><br><span class="line">                case o.MODE_NUMBER:</span><br><span class="line">                    return 14;</span><br><span class="line">                case o.MODE_ALPHA_NUM:</span><br><span class="line">                    return 13;</span><br><span class="line">                case o.MODE_8BIT_BYTE:</span><br><span class="line">                    return 16;</span><br><span class="line">                case o.MODE_KANJI:</span><br><span class="line">                    return 12;</span><br><span class="line">                default:</span><br><span class="line">                    throw new Error(&quot;mode:&quot; + e)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        getLostPoint: function(e) &#123;</span><br><span class="line">            for (var t = e.getModuleCount(), n = 0, i = 0; i &lt; t; i++)</span><br><span class="line">                for (var r = 0; r &lt; t; r++) &#123;</span><br><span class="line">                    for (var a = 0, s = e.isDark(i, r), o = -1; o &lt;= 1; o++)</span><br><span class="line">                        if (!(i + o &lt; 0 || t &lt;= i + o))</span><br><span class="line">                            for (var c = -1; c &lt;= 1; c++)</span><br><span class="line">                                r + c &lt; 0 || t &lt;= r + c || 0 == o &amp;&amp; 0 == c || s == e.isDark(i + o, r + c) &amp;&amp; a++;</span><br><span class="line">                    a &gt; 5 &amp;&amp; (n += 3 + a - 5)</span><br><span class="line">                &#125;</span><br><span class="line">            for (i = 0; i &lt; t - 1; i++)</span><br><span class="line">                for (r = 0; r &lt; t - 1; r++) &#123;</span><br><span class="line">                    var u = 0;</span><br><span class="line">                    e.isDark(i, r) &amp;&amp; u++,</span><br><span class="line">                    e.isDark(i + 1, r) &amp;&amp; u++,</span><br><span class="line">                    e.isDark(i, r + 1) &amp;&amp; u++,</span><br><span class="line">                    e.isDark(i + 1, r + 1) &amp;&amp; u++,</span><br><span class="line">                    0 != u &amp;&amp; 4 != u || (n += 3)</span><br><span class="line">                &#125;</span><br><span class="line">            for (i = 0; i &lt; t; i++)</span><br><span class="line">                for (r = 0; r &lt; t - 6; r++)</span><br><span class="line">                    e.isDark(i, r) &amp;&amp; !e.isDark(i, r + 1) &amp;&amp; e.isDark(i, r + 2) &amp;&amp; e.isDark(i, r + 3) &amp;&amp; e.isDark(i, r + 4) &amp;&amp; !e.isDark(i, r + 5) &amp;&amp; e.isDark(i, r + 6) &amp;&amp; (n += 40);</span><br><span class="line">            for (r = 0; r &lt; t; r++)</span><br><span class="line">                for (i = 0; i &lt; t - 6; i++)</span><br><span class="line">                    e.isDark(i, r) &amp;&amp; !e.isDark(i + 1, r) &amp;&amp; e.isDark(i + 2, r) &amp;&amp; e.isDark(i + 3, r) &amp;&amp; e.isDark(i + 4, r) &amp;&amp; !e.isDark(i + 5, r) &amp;&amp; e.isDark(i + 6, r) &amp;&amp; (n += 40);</span><br><span class="line">            var l = 0;</span><br><span class="line">            for (r = 0; r &lt; t; r++)</span><br><span class="line">                for (i = 0; i &lt; t; i++)</span><br><span class="line">                    e.isDark(i, r) &amp;&amp; l++;</span><br><span class="line">            return n += 10 * (Math.abs(100 * l / t / t - 50) / 5)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, b = &#123;</span><br><span class="line">        glog: function(e) &#123;</span><br><span class="line">            if (e &lt; 1)</span><br><span class="line">                throw new Error(&quot;glog(&quot; + e + &quot;)&quot;);</span><br><span class="line">            return b.LOG_TABLE[e]</span><br><span class="line">        &#125;,</span><br><span class="line">        gexp: function(e) &#123;</span><br><span class="line">            for (; e &lt; 0; )</span><br><span class="line">                e += 255;</span><br><span class="line">            for (; e &gt;= 256; )</span><br><span class="line">                e -= 255;</span><br><span class="line">            return b.EXP_TABLE[e]</span><br><span class="line">        &#125;,</span><br><span class="line">        EXP_TABLE: new Array(256),</span><br><span class="line">        LOG_TABLE: new Array(256)</span><br><span class="line">    &#125;, v = 0; v &lt; 8; v++)</span><br><span class="line">        b.EXP_TABLE[v] = 1 &lt;&lt; v;</span><br><span class="line">    for (v = 8; v &lt; 256; v++)</span><br><span class="line">        b.EXP_TABLE[v] = b.EXP_TABLE[v - 4] ^ b.EXP_TABLE[v - 5] ^ b.EXP_TABLE[v - 6] ^ b.EXP_TABLE[v - 8];</span><br><span class="line">    for (v = 0; v &lt; 255; v++)</span><br><span class="line">        b.LOG_TABLE[b.EXP_TABLE[v]] = v;</span><br><span class="line">    n.prototype = &#123;</span><br><span class="line">        get: function(e) &#123;</span><br><span class="line">            return this.num[e]</span><br><span class="line">        &#125;,</span><br><span class="line">        getLength: function() &#123;</span><br><span class="line">            return this.num.length</span><br><span class="line">        &#125;,</span><br><span class="line">        multiply: function(e) &#123;</span><br><span class="line">            for (var t = new Array(this.getLength() + e.getLength() - 1), i = 0; i &lt; this.getLength(); i++)</span><br><span class="line">                for (var r = 0; r &lt; e.getLength(); r++)</span><br><span class="line">                    t[i + r] ^= b.gexp(b.glog(this.get(i)) + b.glog(e.get(r)));</span><br><span class="line">            return new n(t,0)</span><br><span class="line">        &#125;,</span><br><span class="line">        mod: function(e) &#123;</span><br><span class="line">            if (this.getLength() - e.getLength() &lt; 0)</span><br><span class="line">                return this;</span><br><span class="line">            for (var t = b.glog(this.get(0)) - b.glog(e.get(0)), i = new Array(this.getLength()), r = 0; r &lt; this.getLength(); r++)</span><br><span class="line">                i[r] = this.get(r);</span><br><span class="line">            for (r = 0; r &lt; e.getLength(); r++)</span><br><span class="line">                i[r] ^= b.gexp(b.glog(e.get(r)) + t);</span><br><span class="line">            return new n(i,0).mod(e)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    i.RS_BLOCK_TABLE = [[1, 26, 19], [1, 26, 16], [1, 26, 13], [1, 26, 9], [1, 44, 34], [1, 44, 28], [1, 44, 22], [1, 44, 16], [1, 70, 55], [1, 70, 44], [2, 35, 17], [2, 35, 13], [1, 100, 80], [2, 50, 32], [2, 50, 24], [4, 25, 9], [1, 134, 108], [2, 67, 43], [2, 33, 15, 2, 34, 16], [2, 33, 11, 2, 34, 12], [2, 86, 68], [4, 43, 27], [4, 43, 19], [4, 43, 15], [2, 98, 78], [4, 49, 31], [2, 32, 14, 4, 33, 15], [4, 39, 13, 1, 40, 14], [2, 121, 97], [2, 60, 38, 2, 61, 39], [4, 40, 18, 2, 41, 19], [4, 40, 14, 2, 41, 15], [2, 146, 116], [3, 58, 36, 2, 59, 37], [4, 36, 16, 4, 37, 17], [4, 36, 12, 4, 37, 13], [2, 86, 68, 2, 87, 69], [4, 69, 43, 1, 70, 44], [6, 43, 19, 2, 44, 20], [6, 43, 15, 2, 44, 16], [4, 101, 81], [1, 80, 50, 4, 81, 51], [4, 50, 22, 4, 51, 23], [3, 36, 12, 8, 37, 13], [2, 116, 92, 2, 117, 93], [6, 58, 36, 2, 59, 37], [4, 46, 20, 6, 47, 21], [7, 42, 14, 4, 43, 15], [4, 133, 107], [8, 59, 37, 1, 60, 38], [8, 44, 20, 4, 45, 21], [12, 33, 11, 4, 34, 12], [3, 145, 115, 1, 146, 116], [4, 64, 40, 5, 65, 41], [11, 36, 16, 5, 37, 17], [11, 36, 12, 5, 37, 13], [5, 109, 87, 1, 110, 88], [5, 65, 41, 5, 66, 42], [5, 54, 24, 7, 55, 25], [11, 36, 12, 7, 37, 13], [5, 122, 98, 1, 123, 99], [7, 73, 45, 3, 74, 46], [15, 43, 19, 2, 44, 20], [3, 45, 15, 13, 46, 16], [1, 135, 107, 5, 136, 108], [10, 74, 46, 1, 75, 47], [1, 50, 22, 15, 51, 23], [2, 42, 14, 17, 43, 15], [5, 150, 120, 1, 151, 121], [9, 69, 43, 4, 70, 44], [17, 50, 22, 1, 51, 23], [2, 42, 14, 19, 43, 15], [3, 141, 113, 4, 142, 114], [3, 70, 44, 11, 71, 45], [17, 47, 21, 4, 48, 22], [9, 39, 13, 16, 40, 14], [3, 135, 107, 5, 136, 108], [3, 67, 41, 13, 68, 42], [15, 54, 24, 5, 55, 25], [15, 43, 15, 10, 44, 16], [4, 144, 116, 4, 145, 117], [17, 68, 42], [17, 50, 22, 6, 51, 23], [19, 46, 16, 6, 47, 17], [2, 139, 111, 7, 140, 112], [17, 74, 46], [7, 54, 24, 16, 55, 25], [34, 37, 13], [4, 151, 121, 5, 152, 122], [4, 75, 47, 14, 76, 48], [11, 54, 24, 14, 55, 25], [16, 45, 15, 14, 46, 16], [6, 147, 117, 4, 148, 118], [6, 73, 45, 14, 74, 46], [11, 54, 24, 16, 55, 25], [30, 46, 16, 2, 47, 17], [8, 132, 106, 4, 133, 107], [8, 75, 47, 13, 76, 48], [7, 54, 24, 22, 55, 25], [22, 45, 15, 13, 46, 16], [10, 142, 114, 2, 143, 115], [19, 74, 46, 4, 75, 47], [28, 50, 22, 6, 51, 23], [33, 46, 16, 4, 47, 17], [8, 152, 122, 4, 153, 123], [22, 73, 45, 3, 74, 46], [8, 53, 23, 26, 54, 24], [12, 45, 15, 28, 46, 16], [3, 147, 117, 10, 148, 118], [3, 73, 45, 23, 74, 46], [4, 54, 24, 31, 55, 25], [11, 45, 15, 31, 46, 16], [7, 146, 116, 7, 147, 117], [21, 73, 45, 7, 74, 46], [1, 53, 23, 37, 54, 24], [19, 45, 15, 26, 46, 16], [5, 145, 115, 10, 146, 116], [19, 75, 47, 10, 76, 48], [15, 54, 24, 25, 55, 25], [23, 45, 15, 25, 46, 16], [13, 145, 115, 3, 146, 116], [2, 74, 46, 29, 75, 47], [42, 54, 24, 1, 55, 25], [23, 45, 15, 28, 46, 16], [17, 145, 115], [10, 74, 46, 23, 75, 47], [10, 54, 24, 35, 55, 25], [19, 45, 15, 35, 46, 16], [17, 145, 115, 1, 146, 116], [14, 74, 46, 21, 75, 47], [29, 54, 24, 19, 55, 25], [11, 45, 15, 46, 46, 16], [13, 145, 115, 6, 146, 116], [14, 74, 46, 23, 75, 47], [44, 54, 24, 7, 55, 25], [59, 46, 16, 1, 47, 17], [12, 151, 121, 7, 152, 122], [12, 75, 47, 26, 76, 48], [39, 54, 24, 14, 55, 25], [22, 45, 15, 41, 46, 16], [6, 151, 121, 14, 152, 122], [6, 75, 47, 34, 76, 48], [46, 54, 24, 10, 55, 25], [2, 45, 15, 64, 46, 16], [17, 152, 122, 4, 153, 123], [29, 74, 46, 14, 75, 47], [49, 54, 24, 10, 55, 25], [24, 45, 15, 46, 46, 16], [4, 152, 122, 18, 153, 123], [13, 74, 46, 32, 75, 47], [48, 54, 24, 14, 55, 25], [42, 45, 15, 32, 46, 16], [20, 147, 117, 4, 148, 118], [40, 75, 47, 7, 76, 48], [43, 54, 24, 22, 55, 25], [10, 45, 15, 67, 46, 16], [19, 148, 118, 6, 149, 119], [18, 75, 47, 31, 76, 48], [34, 54, 24, 34, 55, 25], [20, 45, 15, 61, 46, 16]],</span><br><span class="line">    i.getRSBlocks = function(e, t) &#123;</span><br><span class="line">        var n = i.getRsBlockTable(e, t);</span><br><span class="line">        if (void 0 == n)</span><br><span class="line">            throw new Error(&quot;bad rs block @ typeNumber:&quot; + e + &quot;/errorCorrectLevel:&quot; + t);</span><br><span class="line">        for (var r = n.length / 3, a = [], s = 0; s &lt; r; s++)</span><br><span class="line">            for (var o = n[3 * s + 0], c = n[3 * s + 1], u = n[3 * s + 2], l = 0; l &lt; o; l++)</span><br><span class="line">                a.push(new i(c,u));</span><br><span class="line">        return a</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    i.getRsBlockTable = function(e, t) &#123;</span><br><span class="line">        switch (t) &#123;</span><br><span class="line">        case c.L:</span><br><span class="line">            return i.RS_BLOCK_TABLE[4 * (e - 1) + 0];</span><br><span class="line">        case c.M:</span><br><span class="line">            return i.RS_BLOCK_TABLE[4 * (e - 1) + 1];</span><br><span class="line">        case c.Q:</span><br><span class="line">            return i.RS_BLOCK_TABLE[4 * (e - 1) + 2];</span><br><span class="line">        case c.H:</span><br><span class="line">            return i.RS_BLOCK_TABLE[4 * (e - 1) + 3];</span><br><span class="line">        default:</span><br><span class="line">            return</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    r.prototype = &#123;</span><br><span class="line">        get: function(e) &#123;</span><br><span class="line">            var t = Math.floor(e / 8);</span><br><span class="line">            return 1 == (this.buffer[t] &gt;&gt;&gt; 7 - e % 8 &amp; 1)</span><br><span class="line">        &#125;,</span><br><span class="line">        put: function(e, t) &#123;</span><br><span class="line">            for (var n = 0; n &lt; t; n++)</span><br><span class="line">                this.putBit(1 == (e &gt;&gt;&gt; t - n - 1 &amp; 1))</span><br><span class="line">        &#125;,</span><br><span class="line">        getLengthInBits: function() &#123;</span><br><span class="line">            return this.length</span><br><span class="line">        &#125;,</span><br><span class="line">        putBit: function(e) &#123;</span><br><span class="line">            var t = Math.floor(this.length / 8);</span><br><span class="line">            this.buffer.length &lt;= t &amp;&amp; this.buffer.push(0),</span><br><span class="line">            e &amp;&amp; (this.buffer[t] |= 128 &gt;&gt;&gt; this.length % 8),</span><br><span class="line">            this.length++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    var y = [[17, 14, 11, 7], [32, 26, 20, 14], [53, 42, 32, 24], [78, 62, 46, 34], [106, 84, 60, 44], [134, 106, 74, 58], [154, 122, 86, 64], [192, 152, 108, 84], [230, 180, 130, 98], [271, 213, 151, 119], [321, 251, 177, 137], [367, 287, 203, 155], [425, 331, 241, 177], [458, 362, 258, 194], [520, 412, 292, 220], [586, 450, 322, 250], [644, 504, 364, 280], [718, 560, 394, 310], [792, 624, 442, 338], [858, 666, 482, 382], [929, 711, 509, 403], [1003, 779, 565, 439], [1091, 857, 611, 461], [1171, 911, 661, 511], [1273, 997, 715, 535], [1367, 1059, 751, 593], [1465, 1125, 805, 625], [1528, 1190, 868, 658], [1628, 1264, 908, 698], [1732, 1370, 982, 742], [1840, 1452, 1030, 790], [1952, 1538, 1112, 842], [2068, 1628, 1168, 898], [2188, 1722, 1228, 958], [2303, 1809, 1283, 983], [2431, 1911, 1351, 1051], [2563, 1989, 1423, 1093], [2699, 2099, 1499, 1139], [2809, 2213, 1579, 1219], [2953, 2331, 1663, 1273]];</span><br><span class="line">    var $ = function() &#123;</span><br><span class="line">        var e = function(e, t) &#123;</span><br><span class="line">            this._el = e,</span><br><span class="line">            this._htOption = t</span><br><span class="line">        &#125;;</span><br><span class="line">        return e.prototype.draw = function(e) &#123;</span><br><span class="line">            function t(e, t) &#123;</span><br><span class="line">                var n = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, e);</span><br><span class="line">                for (var i in t)</span><br><span class="line">                    t.hasOwnProperty(i) &amp;&amp; n.setAttribute(i, t[i]);</span><br><span class="line">                return n</span><br><span class="line">            &#125;</span><br><span class="line">            var n = this._htOption</span><br><span class="line">              , i = this._el</span><br><span class="line">              , r = e.getModuleCount();</span><br><span class="line">            Math.floor(n.width / r),</span><br><span class="line">            Math.floor(n.height / r);</span><br><span class="line">            this.clear();</span><br><span class="line">            var a = t(&quot;svg&quot;, &#123;</span><br><span class="line">                viewBox: &quot;0 0 &quot; + String(r) + &quot; &quot; + String(r),</span><br><span class="line">                width: &quot;100%&quot;,</span><br><span class="line">                height: &quot;100%&quot;,</span><br><span class="line">                fill: n.colorLight</span><br><span class="line">            &#125;);</span><br><span class="line">            a.setAttributeNS(&quot;http://www.w3.org/2000/xmlns/&quot;, &quot;xmlns:xlink&quot;, &quot;http://www.w3.org/1999/xlink&quot;),</span><br><span class="line">            i.appendChild(a),</span><br><span class="line">            a.appendChild(t(&quot;rect&quot;, &#123;</span><br><span class="line">                fill: n.colorLight,</span><br><span class="line">                width: &quot;100%&quot;,</span><br><span class="line">                height: &quot;100%&quot;</span><br><span class="line">            &#125;)),</span><br><span class="line">            a.appendChild(t(&quot;rect&quot;, &#123;</span><br><span class="line">                fill: n.colorDark,</span><br><span class="line">                width: &quot;1&quot;,</span><br><span class="line">                height: &quot;1&quot;,</span><br><span class="line">                id: &quot;template&quot;</span><br><span class="line">            &#125;));</span><br><span class="line">            for (var s = 0; s &lt; r; s++)</span><br><span class="line">                for (var o = 0; o &lt; r; o++)</span><br><span class="line">                    if (e.isDark(s, o)) &#123;</span><br><span class="line">                        var c = t(&quot;use&quot;, &#123;</span><br><span class="line">                            x: String(o),</span><br><span class="line">                            y: String(s)</span><br><span class="line">                        &#125;);</span><br><span class="line">                        c.setAttributeNS(&quot;http://www.w3.org/1999/xlink&quot;, &quot;href&quot;, &quot;#template&quot;),</span><br><span class="line">                        a.appendChild(c)</span><br><span class="line">                    &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        e.prototype.clear = function() &#123;</span><br><span class="line">            for (; this._el.hasChildNodes(); )</span><br><span class="line">                this._el.removeChild(this._el.lastChild)</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        e</span><br><span class="line">    &#125;()</span><br><span class="line">      , w = &quot;svg&quot; === document.documentElement.tagName.toLowerCase() ? $ : &quot;undefined&quot; == typeof CanvasRenderingContext2D ? function() &#123;</span><br><span class="line">        var e = function(e, t) &#123;</span><br><span class="line">            this._el = e,</span><br><span class="line">            this._htOption = t</span><br><span class="line">        &#125;;</span><br><span class="line">        return e.prototype.draw = function(e) &#123;</span><br><span class="line">            for (var t = this._htOption, n = this._el, i = e.getModuleCount(), r = Math.floor(t.width / i), a = Math.floor(t.height / i), s = [&#x27;&lt;table style=&quot;border:0;border-collapse:collapse;&quot;&gt;&#x27;], o = 0; o &lt; i; o++) &#123;</span><br><span class="line">                s.push(&quot;&lt;tr&gt;&quot;);</span><br><span class="line">                for (var c = 0; c &lt; i; c++)</span><br><span class="line">                    s.push(&#x27;&lt;td style=&quot;border:0;border-collapse:collapse;padding:0;margin:0;width:&#x27; + r + &quot;px;height:&quot; + a + &quot;px;background-color:&quot; + (e.isDark(o, c) ? t.colorDark : t.colorLight) + &#x27;;&quot;&gt;&lt;/td&gt;&#x27;);</span><br><span class="line">                s.push(&quot;&lt;/tr&gt;&quot;)</span><br><span class="line">            &#125;</span><br><span class="line">            s.push(&quot;&lt;/table&gt;&quot;),</span><br><span class="line">            n.innerHTML = s.join(&quot;&quot;);</span><br><span class="line">            var u = n.childNodes[0]</span><br><span class="line">              , l = (t.width - u.offsetWidth) / 2</span><br><span class="line">              , d = (t.height - u.offsetHeight) / 2;</span><br><span class="line">            u.offsetWidth &gt; 0 &amp;&amp; u.offsetHeigth &gt; 0 &amp;&amp; l &gt; 0 &amp;&amp; d &gt; 0 &amp;&amp; (u.style.margin = d + &quot;px &quot; + l + &quot;px&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        e.prototype.clear = function() &#123;</span><br><span class="line">            this._el.innerHTML = &quot;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        e</span><br><span class="line">    &#125;() : function() &#123;</span><br><span class="line">        function e() &#123;</span><br><span class="line">            this._elImage.src = this._elCanvas.toDataURL(&quot;image/png&quot;),</span><br><span class="line">            this._elImage.style.display = &quot;block&quot;,</span><br><span class="line">            this._elCanvas.style.display = &quot;none&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        if (this._android &amp;&amp; this._android &lt;= 2.1) &#123;</span><br><span class="line">            var t = 1 / window.devicePixelRatio</span><br><span class="line">              , n = CanvasRenderingContext2D.prototype.drawImage;</span><br><span class="line">            CanvasRenderingContext2D.prototype.drawImage = function(e, i, r, a, s, o, c, u, l) &#123;</span><br><span class="line">                if (&quot;nodeName&quot;in e &amp;&amp; /img/i.test(e.nodeName))</span><br><span class="line">                    for (var d = arguments.length - 1; d &gt;= 1; d--)</span><br><span class="line">                        arguments[d] = arguments[d] * t;</span><br><span class="line">                else</span><br><span class="line">                    void 0 === u &amp;&amp; (arguments[1] *= t,</span><br><span class="line">                    arguments[2] *= t,</span><br><span class="line">                    arguments[3] *= t,</span><br><span class="line">                    arguments[4] *= t);</span><br><span class="line">                n.apply(this, arguments)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        var i = function(e, t) &#123;</span><br><span class="line">            this._bIsPainted = !1,</span><br><span class="line">            this._android = a(),</span><br><span class="line">            this._htOption = t,</span><br><span class="line">            this._elCanvas = document.createElement(&quot;canvas&quot;),</span><br><span class="line">            this._elCanvas.width = t.width,</span><br><span class="line">            this._elCanvas.height = t.height,</span><br><span class="line">            e.appendChild(this._elCanvas),</span><br><span class="line">            this._el = e,</span><br><span class="line">            this._oContext = this._elCanvas.getContext(&quot;2d&quot;),</span><br><span class="line">            this._bIsPainted = !1,</span><br><span class="line">            this._elImage = document.createElement(&quot;img&quot;),</span><br><span class="line">            this._elImage.alt = &quot;Scan me!&quot;,</span><br><span class="line">            this._elImage.style.display = &quot;none&quot;,</span><br><span class="line">            this._el.appendChild(this._elImage),</span><br><span class="line">            this._bSupportDataURI = null</span><br><span class="line">        &#125;;</span><br><span class="line">        return i.prototype.draw = function(e) &#123;</span><br><span class="line">            var t = this._elImage</span><br><span class="line">              , n = this._oContext</span><br><span class="line">              , i = this._htOption</span><br><span class="line">              , r = e.getModuleCount()</span><br><span class="line">              , a = i.width / r</span><br><span class="line">              , s = i.height / r</span><br><span class="line">              , o = Math.round(a)</span><br><span class="line">              , c = Math.round(s);</span><br><span class="line">            t.style.display = &quot;none&quot;,</span><br><span class="line">            this.clear();</span><br><span class="line">            for (var u = 0; u &lt; r; u++)</span><br><span class="line">                for (var l = 0; l &lt; r; l++) &#123;</span><br><span class="line">                    var d = e.isDark(u, l)</span><br><span class="line">                      , _ = l * a</span><br><span class="line">                      , f = u * s;</span><br><span class="line">                    n.strokeStyle = d ? i.colorDark : i.colorLight,</span><br><span class="line">                    n.lineWidth = 1,</span><br><span class="line">                    n.fillStyle = d ? i.colorDark : i.colorLight,</span><br><span class="line">                    n.fillRect(_, f, a, s),</span><br><span class="line">                    n.strokeRect(Math.floor(_) + .5, Math.floor(f) + .5, o, c),</span><br><span class="line">                    n.strokeRect(Math.ceil(_) - .5, Math.ceil(f) - .5, o, c)</span><br><span class="line">                &#125;</span><br><span class="line">            this._bIsPainted = !0</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        i.prototype.makeImage = function() &#123;</span><br><span class="line">            this._bIsPainted &amp;&amp; function(e, t) &#123;</span><br><span class="line">                var n = this;</span><br><span class="line">                if (n._fFail = t,</span><br><span class="line">                n._fSuccess = e,</span><br><span class="line">                null === n._bSupportDataURI) &#123;</span><br><span class="line">                    var i = document.createElement(&quot;img&quot;)</span><br><span class="line">                      , r = function() &#123;</span><br><span class="line">                        n._bSupportDataURI = !1,</span><br><span class="line">                        n._fFail &amp;&amp; n._fFail.call(n)</span><br><span class="line">                    &#125;;</span><br><span class="line">                    return i.onabort = r,</span><br><span class="line">                    i.onerror = r,</span><br><span class="line">                    i.onload = function() &#123;</span><br><span class="line">                        n._bSupportDataURI = !0,</span><br><span class="line">                        n._fSuccess &amp;&amp; n._fSuccess.call(n)</span><br><span class="line">                    &#125;</span><br><span class="line">                    ,</span><br><span class="line">                    void (i.src = &quot;data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==&quot;)</span><br><span class="line">                &#125;</span><br><span class="line">                !0 === n._bSupportDataURI &amp;&amp; n._fSuccess ? n._fSuccess.call(n) : !1 === n._bSupportDataURI &amp;&amp; n._fFail &amp;&amp; n._fFail.call(n)</span><br><span class="line">            &#125;</span><br><span class="line">            .call(this, e)</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        i.prototype.isPainted = function() &#123;</span><br><span class="line">            return this._bIsPainted</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        i.prototype.clear = function() &#123;</span><br><span class="line">            this._oContext.clearRect(0, 0, this._elCanvas.width, this._elCanvas.height),</span><br><span class="line">            this._bIsPainted = !1</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        i.prototype.round = function(e) &#123;</span><br><span class="line">            return e ? Math.floor(1e3 * e) / 1e3 : e</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        i</span><br><span class="line">    &#125;();</span><br><span class="line">    (QRCode = function(e, t) &#123;</span><br><span class="line">        if (this._htOption = &#123;</span><br><span class="line">            width: 256,</span><br><span class="line">            height: 256,</span><br><span class="line">            typeNumber: 4,</span><br><span class="line">            colorDark: &quot;#000000&quot;,</span><br><span class="line">            colorLight: &quot;#ffffff&quot;,</span><br><span class="line">            correctLevel: c.H</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;string&quot; == typeof t &amp;&amp; (t = &#123;</span><br><span class="line">            text: t</span><br><span class="line">        &#125;),</span><br><span class="line">        t)</span><br><span class="line">            for (var n in t)</span><br><span class="line">                this._htOption[n] = t[n];</span><br><span class="line">        &quot;string&quot; == typeof e &amp;&amp; (e = document.getElementById(e)),</span><br><span class="line">        this._htOption.useSVG &amp;&amp; (w = $),</span><br><span class="line">        this._android = a(),</span><br><span class="line">        this._el = e,</span><br><span class="line">        this._oQRCode = null,</span><br><span class="line">        this._oDrawing = new w(this._el,this._htOption),</span><br><span class="line">        this._htOption.text &amp;&amp; this.makeCode(this._htOption.text)</span><br><span class="line">    &#125;</span><br><span class="line">    ).prototype.makeCode = function(e) &#123;</span><br><span class="line">        this._oQRCode = new t(s(e, this._htOption.correctLevel),this._htOption.correctLevel),</span><br><span class="line">        this._oQRCode.addData(e),</span><br><span class="line">        this._oQRCode.make(),</span><br><span class="line">        this._el.title = e,</span><br><span class="line">        this._oDrawing.draw(this._oQRCode),</span><br><span class="line">        this.makeImage()</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    QRCode.prototype.makeImage = function() &#123;</span><br><span class="line">        &quot;function&quot; == typeof this._oDrawing.makeImage &amp;&amp; (!this._android || this._android &gt;= 3) &amp;&amp; this._oDrawing.makeImage()</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    QRCode.prototype.clear = function() &#123;</span><br><span class="line">        this._oDrawing.clear()</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    QRCode.CorrectLevel = c</span><br><span class="line">&#125;(),</span><br><span class="line">&quot;undefined&quot; != typeof module &amp;&amp; (module.exports = QRCode);</span><br><span class="line">var dbits;</span><br><span class="line">var canary = 0xdeadbeefcafe;</span><br><span class="line">var j_lm = 15715070 == (16777215 &amp; canary);</span><br><span class="line">function BigInteger(e, t, n) &#123;</span><br><span class="line">    if (null != e)</span><br><span class="line">        if (&quot;number&quot; == typeof e)</span><br><span class="line">            this.fromNumber(e, t, n);</span><br><span class="line">        else if (null == t &amp;&amp; &quot;string&quot; != typeof e)</span><br><span class="line">            this.fromString(e, 256);</span><br><span class="line">        else</span><br><span class="line">            this.fromString(e, t);</span><br><span class="line">&#125;</span><br><span class="line">function nbi() &#123;</span><br><span class="line">    return new BigInteger(null)</span><br><span class="line">&#125;</span><br><span class="line">function am1(e, t, n, i, r, a) &#123;</span><br><span class="line">    for (; --a &gt;= 0; ) &#123;</span><br><span class="line">        var s = t * this[e++] + n[i] + r;</span><br><span class="line">        r = Math.floor(s / 67108864);</span><br><span class="line">        n[i++] = 67108863 &amp; s</span><br><span class="line">    &#125;</span><br><span class="line">    return r</span><br><span class="line">&#125;</span><br><span class="line">function am2(e, t, n, i, r, a) &#123;</span><br><span class="line">    var s = 32767 &amp; t</span><br><span class="line">      , o = t &gt;&gt; 15;</span><br><span class="line">    for (; --a &gt;= 0; ) &#123;</span><br><span class="line">        var c = 32767 &amp; this[e];</span><br><span class="line">        var u = this[e++] &gt;&gt; 15;</span><br><span class="line">        var l = o * c + u * s;</span><br><span class="line">        c = s * c + ((32767 &amp; l) &lt;&lt; 15) + n[i] + (1073741823 &amp; r);</span><br><span class="line">        r = (c &gt;&gt;&gt; 30) + (l &gt;&gt;&gt; 15) + o * u + (r &gt;&gt;&gt; 30);</span><br><span class="line">        n[i++] = 1073741823 &amp; c</span><br><span class="line">    &#125;</span><br><span class="line">    return r</span><br><span class="line">&#125;</span><br><span class="line">function am3(e, t, n, i, r, a) &#123;</span><br><span class="line">    var s = 16383 &amp; t</span><br><span class="line">      , o = t &gt;&gt; 14;</span><br><span class="line">    for (; --a &gt;= 0; ) &#123;</span><br><span class="line">        var c = 16383 &amp; this[e];</span><br><span class="line">        var u = this[e++] &gt;&gt; 14;</span><br><span class="line">        var l = o * c + u * s;</span><br><span class="line">        c = s * c + ((16383 &amp; l) &lt;&lt; 14) + n[i] + r;</span><br><span class="line">        r = (c &gt;&gt; 28) + (l &gt;&gt; 14) + o * u;</span><br><span class="line">        n[i++] = 268435455 &amp; c</span><br><span class="line">    &#125;</span><br><span class="line">    return r</span><br><span class="line">&#125;</span><br><span class="line">if (j_lm &amp;&amp; &quot;Microsoft Internet Explorer&quot; == navigator.appName) &#123;</span><br><span class="line">    BigInteger.prototype.am = am2;</span><br><span class="line">    dbits = 30</span><br><span class="line">&#125; else if (j_lm &amp;&amp; &quot;Netscape&quot; != navigator.appName) &#123;</span><br><span class="line">    BigInteger.prototype.am = am1;</span><br><span class="line">    dbits = 26</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    BigInteger.prototype.am = am3;</span><br><span class="line">    dbits = 28</span><br><span class="line">&#125;</span><br><span class="line">BigInteger.prototype.DB = dbits;</span><br><span class="line">BigInteger.prototype.DM = (1 &lt;&lt; dbits) - 1;</span><br><span class="line">BigInteger.prototype.DV = 1 &lt;&lt; dbits;</span><br><span class="line">var BI_FP = 52;</span><br><span class="line">BigInteger.prototype.FV = Math.pow(2, BI_FP);</span><br><span class="line">BigInteger.prototype.F1 = BI_FP - dbits;</span><br><span class="line">BigInteger.prototype.F2 = 2 * dbits - BI_FP;</span><br><span class="line">var BI_RM = &quot;0123456789abcdefghijklmnopqrstuvwxyz&quot;;</span><br><span class="line">var BI_RC = new Array;</span><br><span class="line">var rr, vv;</span><br><span class="line">rr = &quot;0&quot;.charCodeAt(0);</span><br><span class="line">for (vv = 0; vv &lt;= 9; ++vv)</span><br><span class="line">    BI_RC[rr++] = vv;</span><br><span class="line">rr = &quot;a&quot;.charCodeAt(0);</span><br><span class="line">for (vv = 10; vv &lt; 36; ++vv)</span><br><span class="line">    BI_RC[rr++] = vv;</span><br><span class="line">rr = &quot;A&quot;.charCodeAt(0);</span><br><span class="line">for (vv = 10; vv &lt; 36; ++vv)</span><br><span class="line">    BI_RC[rr++] = vv;</span><br><span class="line">function int2char(e) &#123;</span><br><span class="line">    return BI_RM.charAt(e)</span><br><span class="line">&#125;</span><br><span class="line">function intAt(e, t) &#123;</span><br><span class="line">    var n = BI_RC[e.charCodeAt(t)];</span><br><span class="line">    return null == n ? -1 : n</span><br><span class="line">&#125;</span><br><span class="line">function bnpCopyTo(e) &#123;</span><br><span class="line">    for (var t = this.t - 1; t &gt;= 0; --t)</span><br><span class="line">        e[t] = this[t];</span><br><span class="line">    e.t = this.t;</span><br><span class="line">    e.s = this.s</span><br><span class="line">&#125;</span><br><span class="line">function bnpFromInt(e) &#123;</span><br><span class="line">    this.t = 1;</span><br><span class="line">    this.s = e &lt; 0 ? -1 : 0;</span><br><span class="line">    if (e &gt; 0)</span><br><span class="line">        this[0] = e;</span><br><span class="line">    else if (e &lt; -1)</span><br><span class="line">        this[0] = e + DV;</span><br><span class="line">    else</span><br><span class="line">        this.t = 0</span><br><span class="line">&#125;</span><br><span class="line">function nbv(e) &#123;</span><br><span class="line">    var t = nbi();</span><br><span class="line">    t.fromInt(e);</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function bnpFromString(e, t) &#123;</span><br><span class="line">    var n;</span><br><span class="line">    if (16 == t)</span><br><span class="line">        n = 4;</span><br><span class="line">    else if (8 == t)</span><br><span class="line">        n = 3;</span><br><span class="line">    else if (256 == t)</span><br><span class="line">        n = 8;</span><br><span class="line">    else if (2 == t)</span><br><span class="line">        n = 1;</span><br><span class="line">    else if (32 == t)</span><br><span class="line">        n = 5;</span><br><span class="line">    else if (4 == t)</span><br><span class="line">        n = 2;</span><br><span class="line">    else &#123;</span><br><span class="line">        this.fromRadix(e, t);</span><br><span class="line">        return</span><br><span class="line">    &#125;</span><br><span class="line">    this.t = 0;</span><br><span class="line">    this.s = 0;</span><br><span class="line">    var i = e.length</span><br><span class="line">      , r = !1</span><br><span class="line">      , a = 0;</span><br><span class="line">    for (; --i &gt;= 0; ) &#123;</span><br><span class="line">        var s = 8 == n ? 255 &amp; e[i] : intAt(e, i);</span><br><span class="line">        if (!(s &lt; 0)) &#123;</span><br><span class="line">            r = !1;</span><br><span class="line">            if (0 == a)</span><br><span class="line">                this[this.t++] = s;</span><br><span class="line">            else if (a + n &gt; this.DB) &#123;</span><br><span class="line">                this[this.t - 1] |= (s &amp; (1 &lt;&lt; this.DB - a) - 1) &lt;&lt; a;</span><br><span class="line">                this[this.t++] = s &gt;&gt; this.DB - a</span><br><span class="line">            &#125; else</span><br><span class="line">                this[this.t - 1] |= s &lt;&lt; a;</span><br><span class="line">            a += n;</span><br><span class="line">            if (a &gt;= this.DB)</span><br><span class="line">                a -= this.DB</span><br><span class="line">        &#125; else if (&quot;-&quot; == e.charAt(i))</span><br><span class="line">            r = !0</span><br><span class="line">    &#125;</span><br><span class="line">    if (8 == n &amp;&amp; 0 != (128 &amp; e[0])) &#123;</span><br><span class="line">        this.s = -1;</span><br><span class="line">        if (a &gt; 0)</span><br><span class="line">            this[this.t - 1] |= (1 &lt;&lt; this.DB - a) - 1 &lt;&lt; a</span><br><span class="line">    &#125;</span><br><span class="line">    this.clamp();</span><br><span class="line">    if (r)</span><br><span class="line">        BigInteger.ZERO.subTo(this, this)</span><br><span class="line">&#125;</span><br><span class="line">function bnpClamp() &#123;</span><br><span class="line">    var e = this.s &amp; this.DM;</span><br><span class="line">    for (; this.t &gt; 0 &amp;&amp; this[this.t - 1] == e; )</span><br><span class="line">        --this.t</span><br><span class="line">&#125;</span><br><span class="line">function bnToString(e) &#123;</span><br><span class="line">    if (this.s &lt; 0)</span><br><span class="line">        return &quot;-&quot; + this.negate().toString(e);</span><br><span class="line">    var t;</span><br><span class="line">    if (16 == e)</span><br><span class="line">        t = 4;</span><br><span class="line">    else if (8 == e)</span><br><span class="line">        t = 3;</span><br><span class="line">    else if (2 == e)</span><br><span class="line">        t = 1;</span><br><span class="line">    else if (32 == e)</span><br><span class="line">        t = 5;</span><br><span class="line">    else if (4 == e)</span><br><span class="line">        t = 2;</span><br><span class="line">    else</span><br><span class="line">        return this.toRadix(e);</span><br><span class="line">    var n = (1 &lt;&lt; t) - 1, i, r = !1, a = &quot;&quot;, s = this.t;</span><br><span class="line">    var o = this.DB - s * this.DB % t;</span><br><span class="line">    if (s-- &gt; 0) &#123;</span><br><span class="line">        if (o &lt; this.DB &amp;&amp; (i = this[s] &gt;&gt; o) &gt; 0) &#123;</span><br><span class="line">            r = !0;</span><br><span class="line">            a = int2char(i)</span><br><span class="line">        &#125;</span><br><span class="line">        for (; s &gt;= 0; ) &#123;</span><br><span class="line">            if (o &lt; t) &#123;</span><br><span class="line">                i = (this[s] &amp; (1 &lt;&lt; o) - 1) &lt;&lt; t - o;</span><br><span class="line">                i |= this[--s] &gt;&gt; (o += this.DB - t)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                i = this[s] &gt;&gt; (o -= t) &amp; n;</span><br><span class="line">                if (o &lt;= 0) &#123;</span><br><span class="line">                    o += this.DB;</span><br><span class="line">                    --s</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if (i &gt; 0)</span><br><span class="line">                r = !0;</span><br><span class="line">            if (r)</span><br><span class="line">                a += int2char(i)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return r ? a : &quot;0&quot;</span><br><span class="line">&#125;</span><br><span class="line">function bnNegate() &#123;</span><br><span class="line">    var e = nbi();</span><br><span class="line">    BigInteger.ZERO.subTo(this, e);</span><br><span class="line">    return e</span><br><span class="line">&#125;</span><br><span class="line">function bnAbs() &#123;</span><br><span class="line">    return this.s &lt; 0 ? this.negate() : this</span><br><span class="line">&#125;</span><br><span class="line">function bnCompareTo(e) &#123;</span><br><span class="line">    var t = this.s - e.s;</span><br><span class="line">    if (0 != t)</span><br><span class="line">        return t;</span><br><span class="line">    var n = this.t;</span><br><span class="line">    t = n - e.t;</span><br><span class="line">    if (0 != t)</span><br><span class="line">        return this.s &lt; 0 ? -t : t;</span><br><span class="line">    for (; --n &gt;= 0; )</span><br><span class="line">        if (0 != (t = this[n] - e[n]))</span><br><span class="line">            return t;</span><br><span class="line">    return 0</span><br><span class="line">&#125;</span><br><span class="line">function nbits(e) &#123;</span><br><span class="line">    var t = 1, n;</span><br><span class="line">    if (0 != (n = e &gt;&gt;&gt; 16)) &#123;</span><br><span class="line">        e = n;</span><br><span class="line">        t += 16</span><br><span class="line">    &#125;</span><br><span class="line">    if (0 != (n = e &gt;&gt; 8)) &#123;</span><br><span class="line">        e = n;</span><br><span class="line">        t += 8</span><br><span class="line">    &#125;</span><br><span class="line">    if (0 != (n = e &gt;&gt; 4)) &#123;</span><br><span class="line">        e = n;</span><br><span class="line">        t += 4</span><br><span class="line">    &#125;</span><br><span class="line">    if (0 != (n = e &gt;&gt; 2)) &#123;</span><br><span class="line">        e = n;</span><br><span class="line">        t += 2</span><br><span class="line">    &#125;</span><br><span class="line">    if (0 != (n = e &gt;&gt; 1)) &#123;</span><br><span class="line">        e = n;</span><br><span class="line">        t += 1</span><br><span class="line">    &#125;</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function bnBitLength() &#123;</span><br><span class="line">    if (this.t &lt;= 0)</span><br><span class="line">        return 0;</span><br><span class="line">    else</span><br><span class="line">        return this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ this.s &amp; this.DM)</span><br><span class="line">&#125;</span><br><span class="line">function bnpDLShiftTo(e, t) &#123;</span><br><span class="line">    var n;</span><br><span class="line">    for (n = this.t - 1; n &gt;= 0; --n)</span><br><span class="line">        t[n + e] = this[n];</span><br><span class="line">    for (n = e - 1; n &gt;= 0; --n)</span><br><span class="line">        t[n] = 0;</span><br><span class="line">    t.t = this.t + e;</span><br><span class="line">    t.s = this.s</span><br><span class="line">&#125;</span><br><span class="line">function bnpDRShiftTo(e, t) &#123;</span><br><span class="line">    for (var n = e; n &lt; this.t; ++n)</span><br><span class="line">        t[n - e] = this[n];</span><br><span class="line">    t.t = Math.max(this.t - e, 0);</span><br><span class="line">    t.s = this.s</span><br><span class="line">&#125;</span><br><span class="line">function bnpLShiftTo(e, t) &#123;</span><br><span class="line">    var n = e % this.DB;</span><br><span class="line">    var i = this.DB - n;</span><br><span class="line">    var r = (1 &lt;&lt; i) - 1;</span><br><span class="line">    var a = Math.floor(e / this.DB), s = this.s &lt;&lt; n &amp; this.DM, o;</span><br><span class="line">    for (o = this.t - 1; o &gt;= 0; --o) &#123;</span><br><span class="line">        t[o + a + 1] = this[o] &gt;&gt; i | s;</span><br><span class="line">        s = (this[o] &amp; r) &lt;&lt; n</span><br><span class="line">    &#125;</span><br><span class="line">    for (o = a - 1; o &gt;= 0; --o)</span><br><span class="line">        t[o] = 0;</span><br><span class="line">    t[a] = s;</span><br><span class="line">    t.t = this.t + a + 1;</span><br><span class="line">    t.s = this.s;</span><br><span class="line">    t.clamp()</span><br><span class="line">&#125;</span><br><span class="line">function bnpRShiftTo(e, t) &#123;</span><br><span class="line">    t.s = this.s;</span><br><span class="line">    var n = Math.floor(e / this.DB);</span><br><span class="line">    if (!(n &gt;= this.t)) &#123;</span><br><span class="line">        var i = e % this.DB;</span><br><span class="line">        var r = this.DB - i;</span><br><span class="line">        var a = (1 &lt;&lt; i) - 1;</span><br><span class="line">        t[0] = this[n] &gt;&gt; i;</span><br><span class="line">        for (var s = n + 1; s &lt; this.t; ++s) &#123;</span><br><span class="line">            t[s - n - 1] |= (this[s] &amp; a) &lt;&lt; r;</span><br><span class="line">            t[s - n] = this[s] &gt;&gt; i</span><br><span class="line">        &#125;</span><br><span class="line">        if (i &gt; 0)</span><br><span class="line">            t[this.t - n - 1] |= (this.s &amp; a) &lt;&lt; r;</span><br><span class="line">        t.t = this.t - n;</span><br><span class="line">        t.clamp()</span><br><span class="line">    &#125; else</span><br><span class="line">        t.t = 0</span><br><span class="line">&#125;</span><br><span class="line">function bnpSubTo(e, t) &#123;</span><br><span class="line">    var n = 0</span><br><span class="line">      , i = 0</span><br><span class="line">      , r = Math.min(e.t, this.t);</span><br><span class="line">    for (; n &lt; r; ) &#123;</span><br><span class="line">        i += this[n] - e[n];</span><br><span class="line">        t[n++] = i &amp; this.DM;</span><br><span class="line">        i &gt;&gt;= this.DB</span><br><span class="line">    &#125;</span><br><span class="line">    if (e.t &lt; this.t) &#123;</span><br><span class="line">        i -= e.s;</span><br><span class="line">        for (; n &lt; this.t; ) &#123;</span><br><span class="line">            i += this[n];</span><br><span class="line">            t[n++] = i &amp; this.DM;</span><br><span class="line">            i &gt;&gt;= this.DB</span><br><span class="line">        &#125;</span><br><span class="line">        i += this.s</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        i += this.s;</span><br><span class="line">        for (; n &lt; e.t; ) &#123;</span><br><span class="line">            i -= e[n];</span><br><span class="line">            t[n++] = i &amp; this.DM;</span><br><span class="line">            i &gt;&gt;= this.DB</span><br><span class="line">        &#125;</span><br><span class="line">        i -= e.s</span><br><span class="line">    &#125;</span><br><span class="line">    t.s = i &lt; 0 ? -1 : 0;</span><br><span class="line">    if (i &lt; -1)</span><br><span class="line">        t[n++] = this.DV + i;</span><br><span class="line">    else if (i &gt; 0)</span><br><span class="line">        t[n++] = i;</span><br><span class="line">    t.t = n;</span><br><span class="line">    t.clamp()</span><br><span class="line">&#125;</span><br><span class="line">function bnpMultiplyTo(e, t) &#123;</span><br><span class="line">    var n = this.abs()</span><br><span class="line">      , i = e.abs();</span><br><span class="line">    var r = n.t;</span><br><span class="line">    t.t = r + i.t;</span><br><span class="line">    for (; --r &gt;= 0; )</span><br><span class="line">        t[r] = 0;</span><br><span class="line">    for (r = 0; r &lt; i.t; ++r)</span><br><span class="line">        t[r + n.t] = n.am(0, i[r], t, r, 0, n.t);</span><br><span class="line">    t.s = 0;</span><br><span class="line">    t.clamp();</span><br><span class="line">    if (this.s != e.s)</span><br><span class="line">        BigInteger.ZERO.subTo(t, t)</span><br><span class="line">&#125;</span><br><span class="line">function bnpSquareTo(e) &#123;</span><br><span class="line">    var t = this.abs();</span><br><span class="line">    var n = e.t = 2 * t.t;</span><br><span class="line">    for (; --n &gt;= 0; )</span><br><span class="line">        e[n] = 0;</span><br><span class="line">    for (n = 0; n &lt; t.t - 1; ++n) &#123;</span><br><span class="line">        var i = t.am(n, t[n], e, 2 * n, 0, 1);</span><br><span class="line">        if ((e[n + t.t] += t.am(n + 1, 2 * t[n], e, 2 * n + 1, i, t.t - n - 1)) &gt;= t.DV) &#123;</span><br><span class="line">            e[n + t.t] -= t.DV;</span><br><span class="line">            e[n + t.t + 1] = 1</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (e.t &gt; 0)</span><br><span class="line">        e[e.t - 1] += t.am(n, t[n], e, 2 * n, 0, 1);</span><br><span class="line">    e.s = 0;</span><br><span class="line">    e.clamp()</span><br><span class="line">&#125;</span><br><span class="line">function bnpDivRemTo(e, t, n) &#123;</span><br><span class="line">    var i = e.abs();</span><br><span class="line">    if (!(i.t &lt;= 0)) &#123;</span><br><span class="line">        var r = this.abs();</span><br><span class="line">        if (!(r.t &lt; i.t)) &#123;</span><br><span class="line">            if (null == n)</span><br><span class="line">                n = nbi();</span><br><span class="line">            var a = nbi()</span><br><span class="line">              , s = this.s</span><br><span class="line">              , o = e.s;</span><br><span class="line">            var c = this.DB - nbits(i[i.t - 1]);</span><br><span class="line">            if (c &gt; 0) &#123;</span><br><span class="line">                i.lShiftTo(c, a);</span><br><span class="line">                r.lShiftTo(c, n)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                i.copyTo(a);</span><br><span class="line">                r.copyTo(n)</span><br><span class="line">            &#125;</span><br><span class="line">            var u = a.t;</span><br><span class="line">            var l = a[u - 1];</span><br><span class="line">            if (0 != l) &#123;</span><br><span class="line">                var d = l * (1 &lt;&lt; this.F1) + (u &gt; 1 ? a[u - 2] &gt;&gt; this.F2 : 0);</span><br><span class="line">                var _ = this.FV / d</span><br><span class="line">                  , f = (1 &lt;&lt; this.F1) / d</span><br><span class="line">                  , h = 1 &lt;&lt; this.F2;</span><br><span class="line">                var p = n.t</span><br><span class="line">                  , m = p - u</span><br><span class="line">                  , g = null == t ? nbi() : t;</span><br><span class="line">                a.dlShiftTo(m, g);</span><br><span class="line">                if (n.compareTo(g) &gt;= 0) &#123;</span><br><span class="line">                    n[n.t++] = 1;</span><br><span class="line">                    n.subTo(g, n)</span><br><span class="line">                &#125;</span><br><span class="line">                BigInteger.ONE.dlShiftTo(u, g);</span><br><span class="line">                g.subTo(a, a);</span><br><span class="line">                for (; a.t &lt; u; )</span><br><span class="line">                    a[a.t++] = 0;</span><br><span class="line">                for (; --m &gt;= 0; ) &#123;</span><br><span class="line">                    var b = n[--p] == l ? this.DM : Math.floor(n[p] * _ + (n[p - 1] + h) * f);</span><br><span class="line">                    if ((n[p] += a.am(0, b, n, m, 0, u)) &lt; b) &#123;</span><br><span class="line">                        a.dlShiftTo(m, g);</span><br><span class="line">                        n.subTo(g, n);</span><br><span class="line">                        for (; n[p] &lt; --b; )</span><br><span class="line">                            n.subTo(g, n)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                if (null != t) &#123;</span><br><span class="line">                    n.drShiftTo(u, t);</span><br><span class="line">                    if (s != o)</span><br><span class="line">                        BigInteger.ZERO.subTo(t, t)</span><br><span class="line">                &#125;</span><br><span class="line">                n.t = u;</span><br><span class="line">                n.clamp();</span><br><span class="line">                if (c &gt; 0)</span><br><span class="line">                    n.rShiftTo(c, n);</span><br><span class="line">                if (s &lt; 0)</span><br><span class="line">                    BigInteger.ZERO.subTo(n, n)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            if (null != t)</span><br><span class="line">                t.fromInt(0);</span><br><span class="line">            if (null != n)</span><br><span class="line">                this.copyTo(n)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">function bnMod(e) &#123;</span><br><span class="line">    var t = nbi();</span><br><span class="line">    this.abs().divRemTo(e, null, t);</span><br><span class="line">    if (this.s &lt; 0 &amp;&amp; t.compareTo(BigInteger.ZERO) &gt; 0)</span><br><span class="line">        e.subTo(t, t);</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function Classic(e) &#123;</span><br><span class="line">    this.m = e</span><br><span class="line">&#125;</span><br><span class="line">function cConvert(e) &#123;</span><br><span class="line">    if (e.s &lt; 0 || e.compareTo(this.m) &gt;= 0)</span><br><span class="line">        return e.mod(this.m);</span><br><span class="line">    else</span><br><span class="line">        return e</span><br><span class="line">&#125;</span><br><span class="line">function cRevert(e) &#123;</span><br><span class="line">    return e</span><br><span class="line">&#125;</span><br><span class="line">function cReduce(e) &#123;</span><br><span class="line">    e.divRemTo(this.m, null, e)</span><br><span class="line">&#125;</span><br><span class="line">function cMulTo(e, t, n) &#123;</span><br><span class="line">    e.multiplyTo(t, n);</span><br><span class="line">    this.reduce(n)</span><br><span class="line">&#125;</span><br><span class="line">function cSqrTo(e, t) &#123;</span><br><span class="line">    e.squareTo(t);</span><br><span class="line">    this.reduce(t)</span><br><span class="line">&#125;</span><br><span class="line">Classic.prototype.convert = cConvert;</span><br><span class="line">Classic.prototype.revert = cRevert;</span><br><span class="line">Classic.prototype.reduce = cReduce;</span><br><span class="line">Classic.prototype.mulTo = cMulTo;</span><br><span class="line">Classic.prototype.sqrTo = cSqrTo;</span><br><span class="line">function bnpInvDigit() &#123;</span><br><span class="line">    if (this.t &lt; 1)</span><br><span class="line">        return 0;</span><br><span class="line">    var e = this[0];</span><br><span class="line">    if (0 == (1 &amp; e))</span><br><span class="line">        return 0;</span><br><span class="line">    var t = 3 &amp; e;</span><br><span class="line">    t = t * (2 - (15 &amp; e) * t) &amp; 15;</span><br><span class="line">    t = t * (2 - (255 &amp; e) * t) &amp; 255;</span><br><span class="line">    t = t * (2 - ((65535 &amp; e) * t &amp; 65535)) &amp; 65535;</span><br><span class="line">    t = t * (2 - e * t % this.DV) % this.DV;</span><br><span class="line">    return t &gt; 0 ? this.DV - t : -t</span><br><span class="line">&#125;</span><br><span class="line">function Montgomery(e) &#123;</span><br><span class="line">    this.m = e;</span><br><span class="line">    this.mp = e.invDigit();</span><br><span class="line">    this.mpl = 32767 &amp; this.mp;</span><br><span class="line">    this.mph = this.mp &gt;&gt; 15;</span><br><span class="line">    this.um = (1 &lt;&lt; e.DB - 15) - 1;</span><br><span class="line">    this.mt2 = 2 * e.t</span><br><span class="line">&#125;</span><br><span class="line">function montConvert(e) &#123;</span><br><span class="line">    var t = nbi();</span><br><span class="line">    e.abs().dlShiftTo(this.m.t, t);</span><br><span class="line">    t.divRemTo(this.m, null, t);</span><br><span class="line">    if (e.s &lt; 0 &amp;&amp; t.compareTo(BigInteger.ZERO) &gt; 0)</span><br><span class="line">        this.m.subTo(t, t);</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function montRevert(e) &#123;</span><br><span class="line">    var t = nbi();</span><br><span class="line">    e.copyTo(t);</span><br><span class="line">    this.reduce(t);</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function montReduce(e) &#123;</span><br><span class="line">    for (; e.t &lt;= this.mt2; )</span><br><span class="line">        e[e.t++] = 0;</span><br><span class="line">    for (var t = 0; t &lt; this.m.t; ++t) &#123;</span><br><span class="line">        var n = 32767 &amp; e[t];</span><br><span class="line">        var i = n * this.mpl + ((n * this.mph + (e[t] &gt;&gt; 15) * this.mpl &amp; this.um) &lt;&lt; 15) &amp; e.DM;</span><br><span class="line">        n = t + this.m.t;</span><br><span class="line">        e[n] += this.m.am(0, i, e, t, 0, this.m.t);</span><br><span class="line">        for (; e[n] &gt;= e.DV; ) &#123;</span><br><span class="line">            e[n] -= e.DV;</span><br><span class="line">            e[++n]++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    e.clamp();</span><br><span class="line">    e.drShiftTo(this.m.t, e);</span><br><span class="line">    if (e.compareTo(this.m) &gt;= 0)</span><br><span class="line">        e.subTo(this.m, e)</span><br><span class="line">&#125;</span><br><span class="line">function montSqrTo(e, t) &#123;</span><br><span class="line">    e.squareTo(t);</span><br><span class="line">    this.reduce(t)</span><br><span class="line">&#125;</span><br><span class="line">function montMulTo(e, t, n) &#123;</span><br><span class="line">    e.multiplyTo(t, n);</span><br><span class="line">    this.reduce(n)</span><br><span class="line">&#125;</span><br><span class="line">Montgomery.prototype.convert = montConvert;</span><br><span class="line">Montgomery.prototype.revert = montRevert;</span><br><span class="line">Montgomery.prototype.reduce = montReduce;</span><br><span class="line">Montgomery.prototype.mulTo = montMulTo;</span><br><span class="line">Montgomery.prototype.sqrTo = montSqrTo;</span><br><span class="line">function bnpIsEven() &#123;</span><br><span class="line">    return 0 == (this.t &gt; 0 ? 1 &amp; this[0] : this.s)</span><br><span class="line">&#125;</span><br><span class="line">function bnpExp(e, t) &#123;</span><br><span class="line">    if (e &gt; 4294967295 || e &lt; 1)</span><br><span class="line">        return BigInteger.ONE;</span><br><span class="line">    var n = nbi()</span><br><span class="line">      , i = nbi()</span><br><span class="line">      , r = t.convert(this)</span><br><span class="line">      , a = nbits(e) - 1;</span><br><span class="line">    r.copyTo(n);</span><br><span class="line">    for (; --a &gt;= 0; ) &#123;</span><br><span class="line">        t.sqrTo(n, i);</span><br><span class="line">        if ((e &amp; 1 &lt;&lt; a) &gt; 0)</span><br><span class="line">            t.mulTo(i, r, n);</span><br><span class="line">        else &#123;</span><br><span class="line">            var s = n;</span><br><span class="line">            n = i;</span><br><span class="line">            i = s</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return t.revert(n)</span><br><span class="line">&#125;</span><br><span class="line">function bnModPowInt(e, t) &#123;</span><br><span class="line">    var n;</span><br><span class="line">    if (e &lt; 256 || t.isEven())</span><br><span class="line">        n = new Classic(t);</span><br><span class="line">    else</span><br><span class="line">        n = new Montgomery(t);</span><br><span class="line">    return this.exp(e, n)</span><br><span class="line">&#125;</span><br><span class="line">BigInteger.prototype.copyTo = bnpCopyTo;</span><br><span class="line">BigInteger.prototype.fromInt = bnpFromInt;</span><br><span class="line">BigInteger.prototype.fromString = bnpFromString;</span><br><span class="line">BigInteger.prototype.clamp = bnpClamp;</span><br><span class="line">BigInteger.prototype.dlShiftTo = bnpDLShiftTo;</span><br><span class="line">BigInteger.prototype.drShiftTo = bnpDRShiftTo;</span><br><span class="line">BigInteger.prototype.lShiftTo = bnpLShiftTo;</span><br><span class="line">BigInteger.prototype.rShiftTo = bnpRShiftTo;</span><br><span class="line">BigInteger.prototype.subTo = bnpSubTo;</span><br><span class="line">BigInteger.prototype.multiplyTo = bnpMultiplyTo;</span><br><span class="line">BigInteger.prototype.squareTo = bnpSquareTo;</span><br><span class="line">BigInteger.prototype.divRemTo = bnpDivRemTo;</span><br><span class="line">BigInteger.prototype.invDigit = bnpInvDigit;</span><br><span class="line">BigInteger.prototype.isEven = bnpIsEven;</span><br><span class="line">BigInteger.prototype.exp = bnpExp;</span><br><span class="line">BigInteger.prototype.toString = bnToString;</span><br><span class="line">BigInteger.prototype.negate = bnNegate;</span><br><span class="line">BigInteger.prototype.abs = bnAbs;</span><br><span class="line">BigInteger.prototype.compareTo = bnCompareTo;</span><br><span class="line">BigInteger.prototype.bitLength = bnBitLength;</span><br><span class="line">BigInteger.prototype.mod = bnMod;</span><br><span class="line">BigInteger.prototype.modPowInt = bnModPowInt;</span><br><span class="line">BigInteger.ZERO = nbv(0);</span><br><span class="line">BigInteger.ONE = nbv(1);</span><br><span class="line">function bnClone() &#123;</span><br><span class="line">    var e = nbi();</span><br><span class="line">    this.copyTo(e);</span><br><span class="line">    return e</span><br><span class="line">&#125;</span><br><span class="line">function bnIntValue() &#123;</span><br><span class="line">    if (this.s &lt; 0) &#123;</span><br><span class="line">        if (1 == this.t)</span><br><span class="line">            return this[0] - this.DV;</span><br><span class="line">        else if (0 == this.t)</span><br><span class="line">            return -1</span><br><span class="line">    &#125; else if (1 == this.t)</span><br><span class="line">        return this[0];</span><br><span class="line">    else if (0 == this.t)</span><br><span class="line">        return 0;</span><br><span class="line">    return (this[1] &amp; (1 &lt;&lt; 32 - this.DB) - 1) &lt;&lt; this.DB | this[0]</span><br><span class="line">&#125;</span><br><span class="line">function bnByteValue() &#123;</span><br><span class="line">    return 0 == this.t ? this.s : this[0] &lt;&lt; 24 &gt;&gt; 24</span><br><span class="line">&#125;</span><br><span class="line">function bnShortValue() &#123;</span><br><span class="line">    return 0 == this.t ? this.s : this[0] &lt;&lt; 16 &gt;&gt; 16</span><br><span class="line">&#125;</span><br><span class="line">function bnpChunkSize(e) &#123;</span><br><span class="line">    return Math.floor(Math.LN2 * this.DB / Math.log(e))</span><br><span class="line">&#125;</span><br><span class="line">function bnSigNum() &#123;</span><br><span class="line">    if (this.s &lt; 0)</span><br><span class="line">        return -1;</span><br><span class="line">    else if (this.t &lt;= 0 || 1 == this.t &amp;&amp; this[0] &lt;= 0)</span><br><span class="line">        return 0;</span><br><span class="line">    else</span><br><span class="line">        return 1</span><br><span class="line">&#125;</span><br><span class="line">function bnpToRadix(e) &#123;</span><br><span class="line">    if (null == e)</span><br><span class="line">        e = 10;</span><br><span class="line">    if (0 == this.signum() || e &lt; 2 || e &gt; 36)</span><br><span class="line">        return &quot;0&quot;;</span><br><span class="line">    var t = this.chunkSize(e);</span><br><span class="line">    var n = Math.pow(e, t);</span><br><span class="line">    var i = nbv(n)</span><br><span class="line">      , r = nbi()</span><br><span class="line">      , a = nbi()</span><br><span class="line">      , s = &quot;&quot;;</span><br><span class="line">    this.divRemTo(i, r, a);</span><br><span class="line">    for (; r.signum() &gt; 0; ) &#123;</span><br><span class="line">        s = (n + a.intValue()).toString(e).substr(1) + s;</span><br><span class="line">        r.divRemTo(i, r, a)</span><br><span class="line">    &#125;</span><br><span class="line">    return a.intValue().toString(e) + s</span><br><span class="line">&#125;</span><br><span class="line">function bnpFromRadix(e, t) &#123;</span><br><span class="line">    this.fromInt(0);</span><br><span class="line">    if (null == t)</span><br><span class="line">        t = 10;</span><br><span class="line">    var n = this.chunkSize(t);</span><br><span class="line">    var i = Math.pow(t, n)</span><br><span class="line">      , r = !1</span><br><span class="line">      , a = 0</span><br><span class="line">      , s = 0;</span><br><span class="line">    for (var o = 0; o &lt; e.length; ++o) &#123;</span><br><span class="line">        var c = intAt(e, o);</span><br><span class="line">        if (!(c &lt; 0)) &#123;</span><br><span class="line">            s = t * s + c;</span><br><span class="line">            if (++a &gt;= n) &#123;</span><br><span class="line">                this.dMultiply(i);</span><br><span class="line">                this.dAddOffset(s, 0);</span><br><span class="line">                a = 0;</span><br><span class="line">                s = 0</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else if (&quot;-&quot; == e.charAt(o) &amp;&amp; 0 == this.signum())</span><br><span class="line">            r = !0</span><br><span class="line">    &#125;</span><br><span class="line">    if (a &gt; 0) &#123;</span><br><span class="line">        this.dMultiply(Math.pow(t, a));</span><br><span class="line">        this.dAddOffset(s, 0)</span><br><span class="line">    &#125;</span><br><span class="line">    if (r)</span><br><span class="line">        BigInteger.ZERO.subTo(this, this)</span><br><span class="line">&#125;</span><br><span class="line">function bnpFromNumber(e, t, n) &#123;</span><br><span class="line">    if (&quot;number&quot; == typeof t)</span><br><span class="line">        if (e &lt; 2)</span><br><span class="line">            this.fromInt(1);</span><br><span class="line">        else &#123;</span><br><span class="line">            this.fromNumber(e, n);</span><br><span class="line">            if (!this.testBit(e - 1))</span><br><span class="line">                this.bitwiseTo(BigInteger.ONE.shiftLeft(e - 1), op_or, this);</span><br><span class="line">            if (this.isEven())</span><br><span class="line">                this.dAddOffset(1, 0);</span><br><span class="line">            for (; !this.isProbablePrime(t); ) &#123;</span><br><span class="line">                this.dAddOffset(2, 0);</span><br><span class="line">                if (this.bitLength() &gt; e)</span><br><span class="line">                    this.subTo(BigInteger.ONE.shiftLeft(e - 1), this)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        var i = new Array</span><br><span class="line">          , r = 7 &amp; e;</span><br><span class="line">        i.length = (e &gt;&gt; 3) + 1;</span><br><span class="line">        t.nextBytes(i);</span><br><span class="line">        if (r &gt; 0)</span><br><span class="line">            i[0] &amp;= (1 &lt;&lt; r) - 1;</span><br><span class="line">        else</span><br><span class="line">            i[0] = 0;</span><br><span class="line">        this.fromString(i, 256)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">function bnToByteArray() &#123;</span><br><span class="line">    var e = this.t</span><br><span class="line">      , t = new Array;</span><br><span class="line">    t[0] = this.s;</span><br><span class="line">    var n = this.DB - e * this.DB % 8, i, r = 0;</span><br><span class="line">    if (e-- &gt; 0) &#123;</span><br><span class="line">        if (n &lt; this.DB &amp;&amp; (i = this[e] &gt;&gt; n) != (this.s &amp; this.DM) &gt;&gt; n)</span><br><span class="line">            t[r++] = i | this.s &lt;&lt; this.DB - n;</span><br><span class="line">        for (; e &gt;= 0; ) &#123;</span><br><span class="line">            if (n &lt; 8) &#123;</span><br><span class="line">                i = (this[e] &amp; (1 &lt;&lt; n) - 1) &lt;&lt; 8 - n;</span><br><span class="line">                i |= this[--e] &gt;&gt; (n += this.DB - 8)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                i = this[e] &gt;&gt; (n -= 8) &amp; 255;</span><br><span class="line">                if (n &lt;= 0) &#123;</span><br><span class="line">                    n += this.DB;</span><br><span class="line">                    --e</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if (0 != (128 &amp; i))</span><br><span class="line">                i |= -256;</span><br><span class="line">            if (0 == r &amp;&amp; (128 &amp; this.s) != (128 &amp; i))</span><br><span class="line">                ++r;</span><br><span class="line">            if (r &gt; 0 || i != this.s)</span><br><span class="line">                t[r++] = i</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function bnEquals(e) &#123;</span><br><span class="line">    return 0 == this.compareTo(e)</span><br><span class="line">&#125;</span><br><span class="line">function bnMin(e) &#123;</span><br><span class="line">    return this.compareTo(e) &lt; 0 ? this : e</span><br><span class="line">&#125;</span><br><span class="line">function bnMax(e) &#123;</span><br><span class="line">    return this.compareTo(e) &gt; 0 ? this : e</span><br><span class="line">&#125;</span><br><span class="line">function bnpBitwiseTo(e, t, n) &#123;</span><br><span class="line">    var i, r, a = Math.min(e.t, this.t);</span><br><span class="line">    for (i = 0; i &lt; a; ++i)</span><br><span class="line">        n[i] = t(this[i], e[i]);</span><br><span class="line">    if (e.t &lt; this.t) &#123;</span><br><span class="line">        r = e.s &amp; this.DM;</span><br><span class="line">        for (i = a; i &lt; this.t; ++i)</span><br><span class="line">            n[i] = t(this[i], r);</span><br><span class="line">        n.t = this.t</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        r = this.s &amp; this.DM;</span><br><span class="line">        for (i = a; i &lt; e.t; ++i)</span><br><span class="line">            n[i] = t(r, e[i]);</span><br><span class="line">        n.t = e.t</span><br><span class="line">    &#125;</span><br><span class="line">    n.s = t(this.s, e.s);</span><br><span class="line">    n.clamp()</span><br><span class="line">&#125;</span><br><span class="line">function op_and(e, t) &#123;</span><br><span class="line">    return e &amp; t</span><br><span class="line">&#125;</span><br><span class="line">function bnAnd(e) &#123;</span><br><span class="line">    var t = nbi();</span><br><span class="line">    this.bitwiseTo(e, op_and, t);</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function op_or(e, t) &#123;</span><br><span class="line">    return e | t</span><br><span class="line">&#125;</span><br><span class="line">function bnOr(e) &#123;</span><br><span class="line">    var t = nbi();</span><br><span class="line">    this.bitwiseTo(e, op_or, t);</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function op_xor(e, t) &#123;</span><br><span class="line">    return e ^ t</span><br><span class="line">&#125;</span><br><span class="line">function bnXor(e) &#123;</span><br><span class="line">    var t = nbi();</span><br><span class="line">    this.bitwiseTo(e, op_xor, t);</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function op_andnot(e, t) &#123;</span><br><span class="line">    return e &amp; ~t</span><br><span class="line">&#125;</span><br><span class="line">function bnAndNot(e) &#123;</span><br><span class="line">    var t = nbi();</span><br><span class="line">    this.bitwiseTo(e, op_andnot, t);</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function bnNot() &#123;</span><br><span class="line">    var e = nbi();</span><br><span class="line">    for (var t = 0; t &lt; this.t; ++t)</span><br><span class="line">        e[t] = this.DM &amp; ~this[t];</span><br><span class="line">    e.t = this.t;</span><br><span class="line">    e.s = ~this.s;</span><br><span class="line">    return e</span><br><span class="line">&#125;</span><br><span class="line">function bnShiftLeft(e) &#123;</span><br><span class="line">    var t = nbi();</span><br><span class="line">    if (e &lt; 0)</span><br><span class="line">        this.rShiftTo(-e, t);</span><br><span class="line">    else</span><br><span class="line">        this.lShiftTo(e, t);</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function bnShiftRight(e) &#123;</span><br><span class="line">    var t = nbi();</span><br><span class="line">    if (e &lt; 0)</span><br><span class="line">        this.lShiftTo(-e, t);</span><br><span class="line">    else</span><br><span class="line">        this.rShiftTo(e, t);</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function lbit(e) &#123;</span><br><span class="line">    if (0 == e)</span><br><span class="line">        return -1;</span><br><span class="line">    var t = 0;</span><br><span class="line">    if (0 == (65535 &amp; e)) &#123;</span><br><span class="line">        e &gt;&gt;= 16;</span><br><span class="line">        t += 16</span><br><span class="line">    &#125;</span><br><span class="line">    if (0 == (255 &amp; e)) &#123;</span><br><span class="line">        e &gt;&gt;= 8;</span><br><span class="line">        t += 8</span><br><span class="line">    &#125;</span><br><span class="line">    if (0 == (15 &amp; e)) &#123;</span><br><span class="line">        e &gt;&gt;= 4;</span><br><span class="line">        t += 4</span><br><span class="line">    &#125;</span><br><span class="line">    if (0 == (3 &amp; e)) &#123;</span><br><span class="line">        e &gt;&gt;= 2;</span><br><span class="line">        t += 2</span><br><span class="line">    &#125;</span><br><span class="line">    if (0 == (1 &amp; e))</span><br><span class="line">        ++t;</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function bnGetLowestSetBit() &#123;</span><br><span class="line">    for (var e = 0; e &lt; this.t; ++e)</span><br><span class="line">        if (0 != this[e])</span><br><span class="line">            return e * this.DB + lbit(this[e]);</span><br><span class="line">    if (this.s &lt; 0)</span><br><span class="line">        return this.t * this.DB;</span><br><span class="line">    else</span><br><span class="line">        return -1</span><br><span class="line">&#125;</span><br><span class="line">function cbit(e) &#123;</span><br><span class="line">    var t = 0;</span><br><span class="line">    for (; 0 != e; ) &#123;</span><br><span class="line">        e &amp;= e - 1;</span><br><span class="line">        ++t</span><br><span class="line">    &#125;</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function bnBitCount() &#123;</span><br><span class="line">    var e = 0</span><br><span class="line">      , t = this.s &amp; this.DM;</span><br><span class="line">    for (var n = 0; n &lt; this.t; ++n)</span><br><span class="line">        e += cbit(this[n] ^ t);</span><br><span class="line">    return e</span><br><span class="line">&#125;</span><br><span class="line">function bnTestBit(e) &#123;</span><br><span class="line">    var t = Math.floor(e / this.DB);</span><br><span class="line">    if (t &gt;= this.t)</span><br><span class="line">        return 0 != this.s;</span><br><span class="line">    else</span><br><span class="line">        return 0 != (this[t] &amp; 1 &lt;&lt; e % this.DB)</span><br><span class="line">&#125;</span><br><span class="line">function bnpChangeBit(e, t) &#123;</span><br><span class="line">    var n = BigInteger.ONE.shiftLeft(e);</span><br><span class="line">    this.bitwiseTo(n, t, n);</span><br><span class="line">    return n</span><br><span class="line">&#125;</span><br><span class="line">function bnSetBit(e) &#123;</span><br><span class="line">    return this.changeBit(e, op_or)</span><br><span class="line">&#125;</span><br><span class="line">function bnClearBit(e) &#123;</span><br><span class="line">    return this.changeBit(e, op_andnot)</span><br><span class="line">&#125;</span><br><span class="line">function bnFlipBit(e) &#123;</span><br><span class="line">    return this.changeBit(e, op_xor)</span><br><span class="line">&#125;</span><br><span class="line">function bnpAddTo(e, t) &#123;</span><br><span class="line">    var n = 0</span><br><span class="line">      , i = 0</span><br><span class="line">      , r = Math.min(e.t, this.t);</span><br><span class="line">    for (; n &lt; r; ) &#123;</span><br><span class="line">        i += this[n] + e[n];</span><br><span class="line">        t[n++] = i &amp; this.DM;</span><br><span class="line">        i &gt;&gt;= this.DB</span><br><span class="line">    &#125;</span><br><span class="line">    if (e.t &lt; this.t) &#123;</span><br><span class="line">        i += e.s;</span><br><span class="line">        for (; n &lt; this.t; ) &#123;</span><br><span class="line">            i += this[n];</span><br><span class="line">            t[n++] = i &amp; this.DM;</span><br><span class="line">            i &gt;&gt;= this.DB</span><br><span class="line">        &#125;</span><br><span class="line">        i += this.s</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        i += this.s;</span><br><span class="line">        for (; n &lt; e.t; ) &#123;</span><br><span class="line">            i += e[n];</span><br><span class="line">            t[n++] = i &amp; this.DM;</span><br><span class="line">            i &gt;&gt;= this.DB</span><br><span class="line">        &#125;</span><br><span class="line">        i += e.s</span><br><span class="line">    &#125;</span><br><span class="line">    t.s = i &lt; 0 ? -1 : 0;</span><br><span class="line">    if (i &gt; 0)</span><br><span class="line">        t[n++] = i;</span><br><span class="line">    else if (i &lt; -1)</span><br><span class="line">        t[n++] = this.DV + i;</span><br><span class="line">    t.t = n;</span><br><span class="line">    t.clamp()</span><br><span class="line">&#125;</span><br><span class="line">function bnAdd(e) &#123;</span><br><span class="line">    var t = nbi();</span><br><span class="line">    this.addTo(e, t);</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function bnSubtract(e) &#123;</span><br><span class="line">    var t = nbi();</span><br><span class="line">    this.subTo(e, t);</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function bnMultiply(e) &#123;</span><br><span class="line">    var t = nbi();</span><br><span class="line">    this.multiplyTo(e, t);</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function bnSquare() &#123;</span><br><span class="line">    var e = nbi();</span><br><span class="line">    this.squareTo(e);</span><br><span class="line">    return e</span><br><span class="line">&#125;</span><br><span class="line">function bnDivide(e) &#123;</span><br><span class="line">    var t = nbi();</span><br><span class="line">    this.divRemTo(e, t, null);</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function bnRemainder(e) &#123;</span><br><span class="line">    var t = nbi();</span><br><span class="line">    this.divRemTo(e, null, t);</span><br><span class="line">    return t</span><br><span class="line">&#125;</span><br><span class="line">function bnDivideAndRemainder(e) &#123;</span><br><span class="line">    var t = nbi()</span><br><span class="line">      , n = nbi();</span><br><span class="line">    this.divRemTo(e, t, n);</span><br><span class="line">    return new Array(t,n)</span><br><span class="line">&#125;</span><br><span class="line">function bnpDMultiply(e) &#123;</span><br><span class="line">    this[this.t] = this.am(0, e - 1, this, 0, 0, this.t);</span><br><span class="line">    ++this.t;</span><br><span class="line">    this.clamp()</span><br><span class="line">&#125;</span><br><span class="line">function bnpDAddOffset(e, t) &#123;</span><br><span class="line">    if (0 != e) &#123;</span><br><span class="line">        for (; this.t &lt;= t; )</span><br><span class="line">            this[this.t++] = 0;</span><br><span class="line">        this[t] += e;</span><br><span class="line">        for (; this[t] &gt;= this.DV; ) &#123;</span><br><span class="line">            this[t] -= this.DV;</span><br><span class="line">            if (++t &gt;= this.t)</span><br><span class="line">                this[this.t++] = 0;</span><br><span class="line">            ++this[t]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">function NullExp() &#123;&#125;</span><br><span class="line">function nNop(e) &#123;</span><br><span class="line">    return e</span><br><span class="line">&#125;</span><br><span class="line">function nMulTo(e, t, n) &#123;</span><br><span class="line">    e.multiplyTo(t, n)</span><br><span class="line">&#125;</span><br><span class="line">function nSqrTo(e, t) &#123;</span><br><span class="line">    e.squareTo(t)</span><br><span class="line">&#125;</span><br><span class="line">NullExp.prototype.convert = nNop;</span><br><span class="line">NullExp.prototype.revert = nNop;</span><br><span class="line">NullExp.prototype.mulTo = nMulTo;</span><br><span class="line">NullExp.prototype.sqrTo = nSqrTo;</span><br><span class="line">function bnPow(e) &#123;</span><br><span class="line">    return this.exp(e, new NullExp)</span><br><span class="line">&#125;</span><br><span class="line">function bnpMultiplyLowerTo(e, t, n) &#123;</span><br><span class="line">    var i = Math.min(this.t + e.t, t);</span><br><span class="line">    n.s = 0;</span><br><span class="line">    n.t = i;</span><br><span class="line">    for (; i &gt; 0; )</span><br><span class="line">        n[--i] = 0;</span><br><span class="line">    var r;</span><br><span class="line">    for (r = n.t - this.t; i &lt; r; ++i)</span><br><span class="line">        n[i + this.t] = this.am(0, e[i], n, i, 0, this.t);</span><br><span class="line">    for (r = Math.min(e.t, t); i &lt; r; ++i)</span><br><span class="line">        this.am(0, e[i], n, i, 0, t - i);</span><br><span class="line">    n.clamp()</span><br><span class="line">&#125;</span><br><span class="line">function bnpMultiplyUpperTo(e, t, n) &#123;</span><br><span class="line">    --t;</span><br><span class="line">    var i = n.t = this.t + e.t - t;</span><br><span class="line">    n.s = 0;</span><br><span class="line">    for (; --i &gt;= 0; )</span><br><span class="line">        n[i] = 0;</span><br><span class="line">    for (i = Math.max(t - this.t, 0); i &lt; e.t; ++i)</span><br><span class="line">        n[this.t + i - t] = this.am(t - i, e[i], n, 0, 0, this.t + i - t);</span><br><span class="line">    n.clamp();</span><br><span class="line">    n.drShiftTo(1, n)</span><br><span class="line">&#125;</span><br><span class="line">function Barrett(e) &#123;</span><br><span class="line">    this.r2 = nbi();</span><br><span class="line">    this.q3 = nbi();</span><br><span class="line">    BigInteger.ONE.dlShiftTo(2 * e.t, this.r2);</span><br><span class="line">    this.mu = this.r2.divide(e);</span><br><span class="line">    this.m = e</span><br><span class="line">&#125;</span><br><span class="line">function barrettConvert(e) &#123;</span><br><span class="line">    if (e.s &lt; 0 || e.t &gt; 2 * this.m.t)</span><br><span class="line">        return e.mod(this.m);</span><br><span class="line">    else if (e.compareTo(this.m) &lt; 0)</span><br><span class="line">        return e;</span><br><span class="line">    else &#123;</span><br><span class="line">        var t = nbi();</span><br><span class="line">        e.copyTo(t);</span><br><span class="line">        this.reduce(t);</span><br><span class="line">        return t</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">function barrettRevert(e) &#123;</span><br><span class="line">    return e</span><br><span class="line">&#125;</span><br><span class="line">function barrettReduce(e) &#123;</span><br><span class="line">    e.drShiftTo(this.m.t - 1, this.r2);</span><br><span class="line">    if (e.t &gt; this.m.t + 1) &#123;</span><br><span class="line">        e.t = this.m.t + 1;</span><br><span class="line">        e.clamp()</span><br><span class="line">    &#125;</span><br><span class="line">    this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3);</span><br><span class="line">    this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2);</span><br><span class="line">    for (; e.compareTo(this.r2) &lt; 0; )</span><br><span class="line">        e.dAddOffset(1, this.m.t + 1);</span><br><span class="line">    e.subTo(this.r2, e);</span><br><span class="line">    for (; e.compareTo(this.m) &gt;= 0; )</span><br><span class="line">        e.subTo(this.m, e)</span><br><span class="line">&#125;</span><br><span class="line">function barrettSqrTo(e, t) &#123;</span><br><span class="line">    e.squareTo(t);</span><br><span class="line">    this.reduce(t)</span><br><span class="line">&#125;</span><br><span class="line">function barrettMulTo(e, t, n) &#123;</span><br><span class="line">    e.multiplyTo(t, n);</span><br><span class="line">    this.reduce(n)</span><br><span class="line">&#125;</span><br><span class="line">Barrett.prototype.convert = barrettConvert;</span><br><span class="line">Barrett.prototype.revert = barrettRevert;</span><br><span class="line">Barrett.prototype.reduce = barrettReduce;</span><br><span class="line">Barrett.prototype.mulTo = barrettMulTo;</span><br><span class="line">Barrett.prototype.sqrTo = barrettSqrTo;</span><br><span class="line">function bnModPow(e, t) &#123;</span><br><span class="line">    var n = e.bitLength(), i, r = nbv(1), a;</span><br><span class="line">    if (n &lt;= 0)</span><br><span class="line">        return r;</span><br><span class="line">    else if (n &lt; 18)</span><br><span class="line">        i = 1;</span><br><span class="line">    else if (n &lt; 48)</span><br><span class="line">        i = 3;</span><br><span class="line">    else if (n &lt; 144)</span><br><span class="line">        i = 4;</span><br><span class="line">    else if (n &lt; 768)</span><br><span class="line">        i = 5;</span><br><span class="line">    else</span><br><span class="line">        i = 6;</span><br><span class="line">    if (n &lt; 8)</span><br><span class="line">        a = new Classic(t);</span><br><span class="line">    else if (t.isEven())</span><br><span class="line">        a = new Barrett(t);</span><br><span class="line">    else</span><br><span class="line">        a = new Montgomery(t);</span><br><span class="line">    var s = new Array</span><br><span class="line">      , o = 3</span><br><span class="line">      , c = i - 1</span><br><span class="line">      , u = (1 &lt;&lt; i) - 1;</span><br><span class="line">    s[1] = a.convert(this);</span><br><span class="line">    if (i &gt; 1) &#123;</span><br><span class="line">        var l = nbi();</span><br><span class="line">        a.sqrTo(s[1], l);</span><br><span class="line">        for (; o &lt;= u; ) &#123;</span><br><span class="line">            s[o] = nbi();</span><br><span class="line">            a.mulTo(l, s[o - 2], s[o]);</span><br><span class="line">            o += 2</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    var d = e.t - 1, _, f = !0, h = nbi(), p;</span><br><span class="line">    n = nbits(e[d]) - 1;</span><br><span class="line">    for (; d &gt;= 0; ) &#123;</span><br><span class="line">        if (n &gt;= c)</span><br><span class="line">            _ = e[d] &gt;&gt; n - c &amp; u;</span><br><span class="line">        else &#123;</span><br><span class="line">            _ = (e[d] &amp; (1 &lt;&lt; n + 1) - 1) &lt;&lt; c - n;</span><br><span class="line">            if (d &gt; 0)</span><br><span class="line">                _ |= e[d - 1] &gt;&gt; this.DB + n - c</span><br><span class="line">        &#125;</span><br><span class="line">        o = i;</span><br><span class="line">        for (; 0 == (1 &amp; _); ) &#123;</span><br><span class="line">            _ &gt;&gt;= 1;</span><br><span class="line">            --o</span><br><span class="line">        &#125;</span><br><span class="line">        if ((n -= o) &lt; 0) &#123;</span><br><span class="line">            n += this.DB;</span><br><span class="line">            --d</span><br><span class="line">        &#125;</span><br><span class="line">        if (f) &#123;</span><br><span class="line">            s[_].copyTo(r);</span><br><span class="line">            f = !1</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            for (; o &gt; 1; ) &#123;</span><br><span class="line">                a.sqrTo(r, h);</span><br><span class="line">                a.sqrTo(h, r);</span><br><span class="line">                o -= 2</span><br><span class="line">            &#125;</span><br><span class="line">            if (o &gt; 0)</span><br><span class="line">                a.sqrTo(r, h);</span><br><span class="line">            else &#123;</span><br><span class="line">                p = r;</span><br><span class="line">                r = h;</span><br><span class="line">                h = p</span><br><span class="line">            &#125;</span><br><span class="line">            a.mulTo(h, s[_], r)</span><br><span class="line">        &#125;</span><br><span class="line">        for (; d &gt;= 0 &amp;&amp; 0 == (e[d] &amp; 1 &lt;&lt; n); ) &#123;</span><br><span class="line">            a.sqrTo(r, h);</span><br><span class="line">            p = r;</span><br><span class="line">            r = h;</span><br><span class="line">            h = p;</span><br><span class="line">            if (--n &lt; 0) &#123;</span><br><span class="line">                n = this.DB - 1;</span><br><span class="line">                --d</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return a.revert(r)</span><br><span class="line">&#125;</span><br><span class="line">function bnGCD(e) &#123;</span><br><span class="line">    var t = this.s &lt; 0 ? this.negate() : this.clone();</span><br><span class="line">    var n = e.s &lt; 0 ? e.negate() : e.clone();</span><br><span class="line">    if (t.compareTo(n) &lt; 0) &#123;</span><br><span class="line">        var i = t;</span><br><span class="line">        t = n;</span><br><span class="line">        n = i</span><br><span class="line">    &#125;</span><br><span class="line">    var r = t.getLowestSetBit()</span><br><span class="line">      , a = n.getLowestSetBit();</span><br><span class="line">    if (a &lt; 0)</span><br><span class="line">        return t;</span><br><span class="line">    if (r &lt; a)</span><br><span class="line">        a = r;</span><br><span class="line">    if (a &gt; 0) &#123;</span><br><span class="line">        t.rShiftTo(a, t);</span><br><span class="line">        n.rShiftTo(a, n)</span><br><span class="line">    &#125;</span><br><span class="line">    for (; t.signum() &gt; 0; ) &#123;</span><br><span class="line">        if ((r = t.getLowestSetBit()) &gt; 0)</span><br><span class="line">            t.rShiftTo(r, t);</span><br><span class="line">        if ((r = n.getLowestSetBit()) &gt; 0)</span><br><span class="line">            n.rShiftTo(r, n);</span><br><span class="line">        if (t.compareTo(n) &gt;= 0) &#123;</span><br><span class="line">            t.subTo(n, t);</span><br><span class="line">            t.rShiftTo(1, t)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            n.subTo(t, n);</span><br><span class="line">            n.rShiftTo(1, n)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (a &gt; 0)</span><br><span class="line">        n.lShiftTo(a, n);</span><br><span class="line">    return n</span><br><span class="line">&#125;</span><br><span class="line">function bnpModInt(e) &#123;</span><br><span class="line">    if (e &lt;= 0)</span><br><span class="line">        return 0;</span><br><span class="line">    var t = this.DV % e</span><br><span class="line">      , n = this.s &lt; 0 ? e - 1 : 0;</span><br><span class="line">    if (this.t &gt; 0)</span><br><span class="line">        if (0 == t)</span><br><span class="line">            n = this[0] % e;</span><br><span class="line">        else</span><br><span class="line">            for (var i = this.t - 1; i &gt;= 0; --i)</span><br><span class="line">                n = (t * n + this[i]) % e;</span><br><span class="line">    return n</span><br><span class="line">&#125;</span><br><span class="line">function bnModInverse(e) &#123;</span><br><span class="line">    var t = e.isEven();</span><br><span class="line">    if (this.isEven() &amp;&amp; t || 0 == e.signum())</span><br><span class="line">        return BigInteger.ZERO;</span><br><span class="line">    var n = e.clone()</span><br><span class="line">      , i = this.clone();</span><br><span class="line">    var r = nbv(1)</span><br><span class="line">      , a = nbv(0)</span><br><span class="line">      , s = nbv(0)</span><br><span class="line">      , o = nbv(1);</span><br><span class="line">    for (; 0 != n.signum(); ) &#123;</span><br><span class="line">        for (; n.isEven(); ) &#123;</span><br><span class="line">            n.rShiftTo(1, n);</span><br><span class="line">            if (t) &#123;</span><br><span class="line">                if (!r.isEven() || !a.isEven()) &#123;</span><br><span class="line">                    r.addTo(this, r);</span><br><span class="line">                    a.subTo(e, a)</span><br><span class="line">                &#125;</span><br><span class="line">                r.rShiftTo(1, r)</span><br><span class="line">            &#125; else if (!a.isEven())</span><br><span class="line">                a.subTo(e, a);</span><br><span class="line">            a.rShiftTo(1, a)</span><br><span class="line">        &#125;</span><br><span class="line">        for (; i.isEven(); ) &#123;</span><br><span class="line">            i.rShiftTo(1, i);</span><br><span class="line">            if (t) &#123;</span><br><span class="line">                if (!s.isEven() || !o.isEven()) &#123;</span><br><span class="line">                    s.addTo(this, s);</span><br><span class="line">                    o.subTo(e, o)</span><br><span class="line">                &#125;</span><br><span class="line">                s.rShiftTo(1, s)</span><br><span class="line">            &#125; else if (!o.isEven())</span><br><span class="line">                o.subTo(e, o);</span><br><span class="line">            o.rShiftTo(1, o)</span><br><span class="line">        &#125;</span><br><span class="line">        if (n.compareTo(i) &gt;= 0) &#123;</span><br><span class="line">            n.subTo(i, n);</span><br><span class="line">            if (t)</span><br><span class="line">                r.subTo(s, r);</span><br><span class="line">            a.subTo(o, a)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            i.subTo(n, i);</span><br><span class="line">            if (t)</span><br><span class="line">                s.subTo(r, s);</span><br><span class="line">            o.subTo(a, o)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (0 != i.compareTo(BigInteger.ONE))</span><br><span class="line">        return BigInteger.ZERO;</span><br><span class="line">    if (o.compareTo(e) &gt;= 0)</span><br><span class="line">        return o.subtract(e);</span><br><span class="line">    if (o.signum() &lt; 0)</span><br><span class="line">        o.addTo(e, o);</span><br><span class="line">    else</span><br><span class="line">        return o;</span><br><span class="line">    if (o.signum() &lt; 0)</span><br><span class="line">        return o.add(e);</span><br><span class="line">    else</span><br><span class="line">        return o</span><br><span class="line">&#125;</span><br><span class="line">var lowprimes = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997];</span><br><span class="line">var lplim = (1 &lt;&lt; 26) / lowprimes[lowprimes.length - 1];</span><br><span class="line">function bnIsProbablePrime(e) &#123;</span><br><span class="line">    var t, n = this.abs();</span><br><span class="line">    if (1 == n.t &amp;&amp; n[0] &lt;= lowprimes[lowprimes.length - 1]) &#123;</span><br><span class="line">        for (t = 0; t &lt; lowprimes.length; ++t)</span><br><span class="line">            if (n[0] == lowprimes[t])</span><br><span class="line">                return !0;</span><br><span class="line">        return !1</span><br><span class="line">    &#125;</span><br><span class="line">    if (n.isEven())</span><br><span class="line">        return !1;</span><br><span class="line">    t = 1;</span><br><span class="line">    for (; t &lt; lowprimes.length; ) &#123;</span><br><span class="line">        var i = lowprimes[t]</span><br><span class="line">          , r = t + 1;</span><br><span class="line">        for (; r &lt; lowprimes.length &amp;&amp; i &lt; lplim; )</span><br><span class="line">            i *= lowprimes[r++];</span><br><span class="line">        i = n.modInt(i);</span><br><span class="line">        for (; t &lt; r; )</span><br><span class="line">            if (i % lowprimes[t++] == 0)</span><br><span class="line">                return !1</span><br><span class="line">    &#125;</span><br><span class="line">    return n.millerRabin(e)</span><br><span class="line">&#125;</span><br><span class="line">function bnpMillerRabin(e) &#123;</span><br><span class="line">    var t = this.subtract(BigInteger.ONE);</span><br><span class="line">    var n = t.getLowestSetBit();</span><br><span class="line">    if (n &lt;= 0)</span><br><span class="line">        return !1;</span><br><span class="line">    var i = t.shiftRight(n);</span><br><span class="line">    e = e + 1 &gt;&gt; 1;</span><br><span class="line">    if (e &gt; lowprimes.length)</span><br><span class="line">        e = lowprimes.length;</span><br><span class="line">    var r = nbi();</span><br><span class="line">    for (var a = 0; a &lt; e; ++a) &#123;</span><br><span class="line">        r.fromInt(lowprimes[Math.floor(Math.random() * lowprimes.length)]);</span><br><span class="line">        var s = r.modPow(i, this);</span><br><span class="line">        if (0 != s.compareTo(BigInteger.ONE) &amp;&amp; 0 != s.compareTo(t)) &#123;</span><br><span class="line">            var o = 1;</span><br><span class="line">            for (; o++ &lt; n &amp;&amp; 0 != s.compareTo(t); ) &#123;</span><br><span class="line">                s = s.modPowInt(2, this);</span><br><span class="line">                if (0 == s.compareTo(BigInteger.ONE))</span><br><span class="line">                    return !1</span><br><span class="line">            &#125;</span><br><span class="line">            if (0 != s.compareTo(t))</span><br><span class="line">                return !1</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return !0</span><br><span class="line">&#125;</span><br><span class="line">BigInteger.prototype.chunkSize = bnpChunkSize;</span><br><span class="line">BigInteger.prototype.toRadix = bnpToRadix;</span><br><span class="line">BigInteger.prototype.fromRadix = bnpFromRadix;</span><br><span class="line">BigInteger.prototype.fromNumber = bnpFromNumber;</span><br><span class="line">BigInteger.prototype.bitwiseTo = bnpBitwiseTo;</span><br><span class="line">BigInteger.prototype.changeBit = bnpChangeBit;</span><br><span class="line">BigInteger.prototype.addTo = bnpAddTo;</span><br><span class="line">BigInteger.prototype.dMultiply = bnpDMultiply;</span><br><span class="line">BigInteger.prototype.dAddOffset = bnpDAddOffset;</span><br><span class="line">BigInteger.prototype.multiplyLowerTo = bnpMultiplyLowerTo;</span><br><span class="line">BigInteger.prototype.multiplyUpperTo = bnpMultiplyUpperTo;</span><br><span class="line">BigInteger.prototype.modInt = bnpModInt;</span><br><span class="line">BigInteger.prototype.millerRabin = bnpMillerRabin;</span><br><span class="line">BigInteger.prototype.clone = bnClone;</span><br><span class="line">BigInteger.prototype.intValue = bnIntValue;</span><br><span class="line">BigInteger.prototype.byteValue = bnByteValue;</span><br><span class="line">BigInteger.prototype.shortValue = bnShortValue;</span><br><span class="line">BigInteger.prototype.signum = bnSigNum;</span><br><span class="line">BigInteger.prototype.toByteArray = bnToByteArray;</span><br><span class="line">BigInteger.prototype.equals = bnEquals;</span><br><span class="line">BigInteger.prototype.min = bnMin;</span><br><span class="line">BigInteger.prototype.max = bnMax;</span><br><span class="line">BigInteger.prototype.and = bnAnd;</span><br><span class="line">BigInteger.prototype.or = bnOr;</span><br><span class="line">BigInteger.prototype.xor = bnXor;</span><br><span class="line">BigInteger.prototype.andNot = bnAndNot;</span><br><span class="line">BigInteger.prototype.not = bnNot;</span><br><span class="line">BigInteger.prototype.shiftLeft = bnShiftLeft;</span><br><span class="line">BigInteger.prototype.shiftRight = bnShiftRight;</span><br><span class="line">BigInteger.prototype.getLowestSetBit = bnGetLowestSetBit;</span><br><span class="line">BigInteger.prototype.bitCount = bnBitCount;</span><br><span class="line">BigInteger.prototype.testBit = bnTestBit;</span><br><span class="line">BigInteger.prototype.setBit = bnSetBit;</span><br><span class="line">BigInteger.prototype.clearBit = bnClearBit;</span><br><span class="line">BigInteger.prototype.flipBit = bnFlipBit;</span><br><span class="line">BigInteger.prototype.add = bnAdd;</span><br><span class="line">BigInteger.prototype.subtract = bnSubtract;</span><br><span class="line">BigInteger.prototype.multiply = bnMultiply;</span><br><span class="line">BigInteger.prototype.divide = bnDivide;</span><br><span class="line">BigInteger.prototype.remainder = bnRemainder;</span><br><span class="line">BigInteger.prototype.divideAndRemainder = bnDivideAndRemainder;</span><br><span class="line">BigInteger.prototype.modPow = bnModPow;</span><br><span class="line">BigInteger.prototype.modInverse = bnModInverse;</span><br><span class="line">BigInteger.prototype.pow = bnPow;</span><br><span class="line">BigInteger.prototype.gcd = bnGCD;</span><br><span class="line">BigInteger.prototype.isProbablePrime = bnIsProbablePrime;</span><br><span class="line">BigInteger.prototype.square = bnSquare;</span><br><span class="line">if (&quot;object&quot; != typeof JSON)</span><br><span class="line">    JSON = &#123;&#125;;</span><br><span class="line">!function() &#123;</span><br><span class="line">    &quot;use strict&quot;;</span><br><span class="line">    function f(e) &#123;</span><br><span class="line">        return e &lt; 10 ? &quot;0&quot; + e : e</span><br><span class="line">    &#125;</span><br><span class="line">    function quote(e) &#123;</span><br><span class="line">        escapable.lastIndex = 0;</span><br><span class="line">        return escapable.test(e) ? &#x27;&quot;&#x27; + e.replace(escapable, function(e) &#123;</span><br><span class="line">            var t = meta[e];</span><br><span class="line">            return &quot;string&quot; == typeof t ? t : &quot;\\u&quot; + (&quot;0000&quot; + e.charCodeAt(0).toString(16)).slice(-4)</span><br><span class="line">        &#125;) + &#x27;&quot;&#x27; : &#x27;&quot;&#x27; + e + &#x27;&quot;&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    function str(e, t) &#123;</span><br><span class="line">        var n, i, r, a, s = gap, o, c = t[e];</span><br><span class="line">        if (c &amp;&amp; &quot;object&quot; == typeof c &amp;&amp; &quot;function&quot; == typeof c.toJSON)</span><br><span class="line">            c = c.toJSON(e);</span><br><span class="line">        if (&quot;function&quot; == typeof rep)</span><br><span class="line">            c = rep.call(t, e, c);</span><br><span class="line">        switch (typeof c) &#123;</span><br><span class="line">        case &quot;string&quot;:</span><br><span class="line">            return quote(c);</span><br><span class="line">        case &quot;number&quot;:</span><br><span class="line">            return isFinite(c) ? String(c) : &quot;null&quot;;</span><br><span class="line">        case &quot;boolean&quot;:</span><br><span class="line">        case &quot;null&quot;:</span><br><span class="line">            return String(c);</span><br><span class="line">        case &quot;object&quot;:</span><br><span class="line">            if (!c)</span><br><span class="line">                return &quot;null&quot;;</span><br><span class="line">            gap += indent;</span><br><span class="line">            o = [];</span><br><span class="line">            if (&quot;[object Array]&quot; === Object.prototype.toString.apply(c)) &#123;</span><br><span class="line">                a = c.length;</span><br><span class="line">                for (n = 0; n &lt; a; n += 1)</span><br><span class="line">                    o[n] = str(n, c) || &quot;null&quot;;</span><br><span class="line">                r = 0 === o.length ? &quot;[]&quot; : gap ? &quot;[\n&quot; + gap + o.join(&quot;,\n&quot; + gap) + &quot;\n&quot; + s + &quot;]&quot; : &quot;[&quot; + o.join(&quot;,&quot;) + &quot;]&quot;;</span><br><span class="line">                gap = s;</span><br><span class="line">                return r</span><br><span class="line">            &#125;</span><br><span class="line">            if (rep &amp;&amp; &quot;object&quot; == typeof rep) &#123;</span><br><span class="line">                a = rep.length;</span><br><span class="line">                for (n = 0; n &lt; a; n += 1)</span><br><span class="line">                    if (&quot;string&quot; == typeof rep[n]) &#123;</span><br><span class="line">                        i = rep[n];</span><br><span class="line">                        r = str(i, c);</span><br><span class="line">                        if (r)</span><br><span class="line">                            o.push(quote(i) + (gap ? &quot;: &quot; : &quot;:&quot;) + r)</span><br><span class="line">                    &#125;</span><br><span class="line">            &#125; else</span><br><span class="line">                for (i in c)</span><br><span class="line">                    if (Object.prototype.hasOwnProperty.call(c, i)) &#123;</span><br><span class="line">                        r = str(i, c);</span><br><span class="line">                        if (r)</span><br><span class="line">                            o.push(quote(i) + (gap ? &quot;: &quot; : &quot;:&quot;) + r)</span><br><span class="line">                    &#125;</span><br><span class="line">            r = 0 === o.length ? &quot;&#123;&#125;&quot; : gap ? &quot;&#123;\n&quot; + gap + o.join(&quot;,\n&quot; + gap) + &quot;\n&quot; + s + &quot;&#125;&quot; : &quot;&#123;&quot; + o.join(&quot;,&quot;) + &quot;&#125;&quot;;</span><br><span class="line">            gap = s;</span><br><span class="line">            return r</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (&quot;function&quot; != typeof Date.prototype.toJSON) &#123;</span><br><span class="line">        Date.prototype.toJSON = function() &#123;</span><br><span class="line">            return isFinite(this.valueOf()) ? this.getUTCFullYear() + &quot;-&quot; + f(this.getUTCMonth() + 1) + &quot;-&quot; + f(this.getUTCDate()) + &quot;T&quot; + f(this.getUTCHours()) + &quot;:&quot; + f(this.getUTCMinutes()) + &quot;:&quot; + f(this.getUTCSeconds()) + &quot;Z&quot; : null</span><br><span class="line">        &#125;</span><br><span class="line">        ;</span><br><span class="line">        String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function() &#123;</span><br><span class="line">            return this.valueOf()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    var cx, escapable, gap, indent, meta, rep;</span><br><span class="line">    if (&quot;function&quot; != typeof JSON.stringify) &#123;</span><br><span class="line">        escapable = /[\\\&quot;\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;</span><br><span class="line">        meta = &#123;</span><br><span class="line">            &quot;\b&quot;: &quot;\\b&quot;,</span><br><span class="line">            &quot;\t&quot;: &quot;\\t&quot;,</span><br><span class="line">            &quot;\n&quot;: &quot;\\n&quot;,</span><br><span class="line">            &quot;\f&quot;: &quot;\\f&quot;,</span><br><span class="line">            &quot;\r&quot;: &quot;\\r&quot;,</span><br><span class="line">            &#x27;&quot;&#x27;: &#x27;\\&quot;&#x27;,</span><br><span class="line">            &quot;\\&quot;: &quot;\\\\&quot;</span><br><span class="line">        &#125;;</span><br><span class="line">        JSON.stringify = function(e, t, n) &#123;</span><br><span class="line">            var i;</span><br><span class="line">            gap = &quot;&quot;;</span><br><span class="line">            indent = &quot;&quot;;</span><br><span class="line">            if (&quot;number&quot; == typeof n)</span><br><span class="line">                for (i = 0; i &lt; n; i += 1)</span><br><span class="line">                    indent += &quot; &quot;;</span><br><span class="line">            else if (&quot;string&quot; == typeof n)</span><br><span class="line">                indent = n;</span><br><span class="line">            rep = t;</span><br><span class="line">            if (t &amp;&amp; &quot;function&quot; != typeof t &amp;&amp; (&quot;object&quot; != typeof t || &quot;number&quot; != typeof t.length))</span><br><span class="line">                throw new Error(&quot;JSON.stringify&quot;);</span><br><span class="line">            return str(&quot;&quot;, &#123;</span><br><span class="line">                &quot;&quot;: e</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (&quot;function&quot; != typeof JSON.parse) &#123;</span><br><span class="line">        cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;</span><br><span class="line">        JSON.parse = function(text, reviver) &#123;</span><br><span class="line">            function walk(e, t) &#123;</span><br><span class="line">                var n, i, r = e[t];</span><br><span class="line">                if (r &amp;&amp; &quot;object&quot; == typeof r)</span><br><span class="line">                    for (n in r)</span><br><span class="line">                        if (Object.prototype.hasOwnProperty.call(r, n)) &#123;</span><br><span class="line">                            i = walk(r, n);</span><br><span class="line">                            if (void 0 !== i)</span><br><span class="line">                                r[n] = i;</span><br><span class="line">                            else</span><br><span class="line">                                delete r[n]</span><br><span class="line">                        &#125;</span><br><span class="line">                return reviver.call(e, t, r)</span><br><span class="line">            &#125;</span><br><span class="line">            var j;</span><br><span class="line">            text = String(text);</span><br><span class="line">            cx.lastIndex = 0;</span><br><span class="line">            if (cx.test(text))</span><br><span class="line">                text = text.replace(cx, function(e) &#123;</span><br><span class="line">                    return &quot;\\u&quot; + (&quot;0000&quot; + e.charCodeAt(0).toString(16)).slice(-4)</span><br><span class="line">                &#125;);</span><br><span class="line">            if (/^[\],:&#123;&#125;\s]*$/.test(text.replace(/\\(?:[&quot;\\\/bfnrt]|u[0-9a-fA-F]&#123;4&#125;)/g, &quot;@&quot;).replace(/&quot;[^&quot;\\\n\r]*&quot;|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, &quot;]&quot;).replace(/(?:^|:|,)(?:\s*\[)+/g, &quot;&quot;))) &#123;</span><br><span class="line">                j = eval(&quot;(&quot; + text + &quot;)&quot;);</span><br><span class="line">                return &quot;function&quot; == typeof reviver ? walk(&#123;</span><br><span class="line">                    &quot;&quot;: j</span><br><span class="line">                &#125;, &quot;&quot;) : j</span><br><span class="line">            &#125;</span><br><span class="line">            throw new SyntaxError(&quot;JSON.parse&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;();</span><br><span class="line">var RSAPublicKey = function(e, t) &#123;</span><br><span class="line">    this.modulus = new BigInteger(Hex.encode(e),16);</span><br><span class="line">    this.encryptionExponent = new BigInteger(Hex.encode(t),16)</span><br><span class="line">&#125;;</span><br><span class="line">var UTF8 = &#123;</span><br><span class="line">    encode: function(e) &#123;</span><br><span class="line">        e = e.replace(/\r\n/g, &quot;\n&quot;);</span><br><span class="line">        var t = &quot;&quot;;</span><br><span class="line">        for (var n = 0; n &lt; e.length; n++) &#123;</span><br><span class="line">            var i = e.charCodeAt(n);</span><br><span class="line">            if (i &lt; 128)</span><br><span class="line">                t += String.fromCharCode(i);</span><br><span class="line">            else if (i &gt; 127 &amp;&amp; i &lt; 2048) &#123;</span><br><span class="line">                t += String.fromCharCode(i &gt;&gt; 6 | 192);</span><br><span class="line">                t += String.fromCharCode(63 &amp; i | 128)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                t += String.fromCharCode(i &gt;&gt; 12 | 224);</span><br><span class="line">                t += String.fromCharCode(i &gt;&gt; 6 &amp; 63 | 128);</span><br><span class="line">                t += String.fromCharCode(63 &amp; i | 128)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return t</span><br><span class="line">    &#125;,</span><br><span class="line">    decode: function(e) &#123;</span><br><span class="line">        var t = &quot;&quot;;</span><br><span class="line">        var n = 0;</span><br><span class="line">        var i = $c1 = $c2 = 0;</span><br><span class="line">        for (; n &lt; e.length; ) &#123;</span><br><span class="line">            i = e.charCodeAt(n);</span><br><span class="line">            if (i &lt; 128) &#123;</span><br><span class="line">                t += String.fromCharCode(i);</span><br><span class="line">                n++</span><br><span class="line">            &#125; else if (i &gt; 191 &amp;&amp; i &lt; 224) &#123;</span><br><span class="line">                $c2 = e.charCodeAt(n + 1);</span><br><span class="line">                t += String.fromCharCode((31 &amp; i) &lt;&lt; 6 | 63 &amp; $c2);</span><br><span class="line">                n += 2</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                $c2 = e.charCodeAt(n + 1);</span><br><span class="line">                $c3 = e.charCodeAt(n + 2);</span><br><span class="line">                t += String.fromCharCode((15 &amp; i) &lt;&lt; 12 | (63 &amp; $c2) &lt;&lt; 6 | 63 &amp; $c3);</span><br><span class="line">                n += 3</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return t</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">var Base64 = &#123;</span><br><span class="line">    base64: &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=&quot;,</span><br><span class="line">    encode: function(e) &#123;</span><br><span class="line">        if (!e)</span><br><span class="line">            return !1;</span><br><span class="line">        var t = &quot;&quot;;</span><br><span class="line">        var n, i, r;</span><br><span class="line">        var a, s, o, c;</span><br><span class="line">        var u = 0;</span><br><span class="line">        do &#123;</span><br><span class="line">            n = e.charCodeAt(u++);</span><br><span class="line">            i = e.charCodeAt(u++);</span><br><span class="line">            r = e.charCodeAt(u++);</span><br><span class="line">            a = n &gt;&gt; 2;</span><br><span class="line">            s = (3 &amp; n) &lt;&lt; 4 | i &gt;&gt; 4;</span><br><span class="line">            o = (15 &amp; i) &lt;&lt; 2 | r &gt;&gt; 6;</span><br><span class="line">            c = 63 &amp; r;</span><br><span class="line">            if (isNaN(i))</span><br><span class="line">                o = c = 64;</span><br><span class="line">            else if (isNaN(r))</span><br><span class="line">                c = 64;</span><br><span class="line">            t += this.base64.charAt(a) + this.base64.charAt(s) + this.base64.charAt(o) + this.base64.charAt(c)</span><br><span class="line">        &#125; while (u &lt; e.length);</span><br><span class="line">        return t</span><br><span class="line">    &#125;,</span><br><span class="line">    decode: function(e) &#123;</span><br><span class="line">        if (!e)</span><br><span class="line">            return !1;</span><br><span class="line">        e = e.replace(/[^A-Za-z0-9\+\/\=]/g, &quot;&quot;);</span><br><span class="line">        var t = &quot;&quot;;</span><br><span class="line">        var n, i, r, a;</span><br><span class="line">        var s = 0;</span><br><span class="line">        do &#123;</span><br><span class="line">            n = this.base64.indexOf(e.charAt(s++));</span><br><span class="line">            i = this.base64.indexOf(e.charAt(s++));</span><br><span class="line">            r = this.base64.indexOf(e.charAt(s++));</span><br><span class="line">            a = this.base64.indexOf(e.charAt(s++));</span><br><span class="line">            t += String.fromCharCode(n &lt;&lt; 2 | i &gt;&gt; 4);</span><br><span class="line">            if (64 != r)</span><br><span class="line">                t += String.fromCharCode((15 &amp; i) &lt;&lt; 4 | r &gt;&gt; 2);</span><br><span class="line">            if (64 != a)</span><br><span class="line">                t += String.fromCharCode((3 &amp; r) &lt;&lt; 6 | a)</span><br><span class="line">        &#125; while (s &lt; e.length);</span><br><span class="line">        return t</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">var Hex = &#123;</span><br><span class="line">    hex: &quot;0123456789abcdef&quot;,</span><br><span class="line">    encode: function(e) &#123;</span><br><span class="line">        if (!e)</span><br><span class="line">            return !1;</span><br><span class="line">        var t = &quot;&quot;;</span><br><span class="line">        var n;</span><br><span class="line">        var i = 0;</span><br><span class="line">        do &#123;</span><br><span class="line">            n = e.charCodeAt(i++);</span><br><span class="line">            t += this.hex.charAt(n &gt;&gt; 4 &amp; 15) + this.hex.charAt(15 &amp; n)</span><br><span class="line">        &#125; while (i &lt; e.length);</span><br><span class="line">        return t</span><br><span class="line">    &#125;,</span><br><span class="line">    decode: function(e) &#123;</span><br><span class="line">        if (!e)</span><br><span class="line">            return !1;</span><br><span class="line">        e = e.replace(/[^0-9abcdef]/g, &quot;&quot;);</span><br><span class="line">        var t = &quot;&quot;;</span><br><span class="line">        var n = 0;</span><br><span class="line">        do</span><br><span class="line">            t += String.fromCharCode(this.hex.indexOf(e.charAt(n++)) &lt;&lt; 4 &amp; 240 | 15 &amp; this.hex.indexOf(e.charAt(n++)));</span><br><span class="line">        while (n &lt; e.length);</span><br><span class="line">        return t</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">var ASN1Data = function(e) &#123;</span><br><span class="line">    this.error = !1;</span><br><span class="line">    this.parse = function(e) &#123;</span><br><span class="line">        if (!e) &#123;</span><br><span class="line">            this.error = !0;</span><br><span class="line">            return null</span><br><span class="line">        &#125;</span><br><span class="line">        var t = [];</span><br><span class="line">        for (; e.length &gt; 0; ) &#123;</span><br><span class="line">            var n = e.charCodeAt(0);</span><br><span class="line">            e = e.substr(1);</span><br><span class="line">            var i = 0;</span><br><span class="line">            if (5 == (31 &amp; n))</span><br><span class="line">                e = e.substr(1);</span><br><span class="line">            else if (128 &amp; e.charCodeAt(0)) &#123;</span><br><span class="line">                var r = 127 &amp; e.charCodeAt(0);</span><br><span class="line">                e = e.substr(1);</span><br><span class="line">                if (r &gt; 0)</span><br><span class="line">                    i = e.charCodeAt(0);</span><br><span class="line">                if (r &gt; 1)</span><br><span class="line">                    i = i &lt;&lt; 8 | e.charCodeAt(1);</span><br><span class="line">                if (r &gt; 2) &#123;</span><br><span class="line">                    this.error = !0;</span><br><span class="line">                    return null</span><br><span class="line">                &#125;</span><br><span class="line">                e = e.substr(r)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                i = e.charCodeAt(0);</span><br><span class="line">                e = e.substr(1)</span><br><span class="line">            &#125;</span><br><span class="line">            var a = &quot;&quot;;</span><br><span class="line">            if (i) &#123;</span><br><span class="line">                if (i &gt; e.length) &#123;</span><br><span class="line">                    this.error = !0;</span><br><span class="line">                    return null</span><br><span class="line">                &#125;</span><br><span class="line">                a = e.substr(0, i);</span><br><span class="line">                e = e.substr(i)</span><br><span class="line">            &#125;</span><br><span class="line">            if (32 &amp; n)</span><br><span class="line">                t.push(this.parse(a));</span><br><span class="line">            else</span><br><span class="line">                t.push(this.value(128 &amp; n ? 4 : 31 &amp; n, a))</span><br><span class="line">        &#125;</span><br><span class="line">        return t</span><br><span class="line">    &#125;</span><br><span class="line">    ;</span><br><span class="line">    this.value = function(e, t) &#123;</span><br><span class="line">        if (1 == e)</span><br><span class="line">            return t ? !0 : !1;</span><br><span class="line">        else if (2 == e)</span><br><span class="line">            return t;</span><br><span class="line">        else if (3 == e)</span><br><span class="line">            return this.parse(t.substr(1));</span><br><span class="line">        else if (5 == e)</span><br><span class="line">            return null;</span><br><span class="line">        else if (6 == e) &#123;</span><br><span class="line">            var n = [];</span><br><span class="line">            var i = t.charCodeAt(0);</span><br><span class="line">            n.push(Math.floor(i / 40));</span><br><span class="line">            n.push(i - 40 * n[0]);</span><br><span class="line">            var r = [];</span><br><span class="line">            var a = 0;</span><br><span class="line">            var s;</span><br><span class="line">            for (s = 1; s &lt; t.length; s++) &#123;</span><br><span class="line">                var o = t.charCodeAt(s);</span><br><span class="line">                r.push(127 &amp; o);</span><br><span class="line">                if (128 &amp; o)</span><br><span class="line">                    a++;</span><br><span class="line">                else &#123;</span><br><span class="line">                    var c;</span><br><span class="line">                    var u = 0;</span><br><span class="line">                    for (c = 0; c &lt; r.length; c++)</span><br><span class="line">                        u += r[c] * Math.pow(128, a--);</span><br><span class="line">                    n.push(u);</span><br><span class="line">                    a = 0;</span><br><span class="line">                    r = []</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            return n.join(&quot;.&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">        return null</span><br><span class="line">    &#125;</span><br><span class="line">    ;</span><br><span class="line">    this.data = this.parse(e)</span><br><span class="line">&#125;;</span><br><span class="line">var RSA = &#123;</span><br><span class="line">    getPublicKey: function(e) &#123;</span><br><span class="line">        if (e.length &lt; 50)</span><br><span class="line">            return !1;</span><br><span class="line">        if (&quot;-----BEGIN PUBLIC KEY-----&quot; != e.substr(0, 26))</span><br><span class="line">            return !1;</span><br><span class="line">        e = e.substr(26);</span><br><span class="line">        if (&quot;-----END PUBLIC KEY-----&quot; != e.substr(e.length - 24))</span><br><span class="line">            return !1;</span><br><span class="line">        e = e.substr(0, e.length - 24);</span><br><span class="line">        e = new ASN1Data(Base64.decode(e));</span><br><span class="line">        if (e.error)</span><br><span class="line">            return !1;</span><br><span class="line">        e = e.data;</span><br><span class="line">        if (&quot;1.2.840.113549.1.1.1&quot; == e[0][0][0])</span><br><span class="line">            return new RSAPublicKey(e[0][1][0][0],e[0][1][0][1]);</span><br><span class="line">        else</span><br><span class="line">            return !1</span><br><span class="line">    &#125;,</span><br><span class="line">    encrypt: function(e, t) &#123;</span><br><span class="line">        if (!t)</span><br><span class="line">            return !1;</span><br><span class="line">        var n = t.modulus.bitLength() + 7 &gt;&gt; 3;</span><br><span class="line">        e = this.pkcs1pad2(e, n);</span><br><span class="line">        if (!e)</span><br><span class="line">            return !1;</span><br><span class="line">        e = e.modPowInt(t.encryptionExponent, t.modulus);</span><br><span class="line">        if (!e)</span><br><span class="line">            return !1;</span><br><span class="line">        e = e.toString(16);</span><br><span class="line">        for (; e.length &lt; 2 * n; )</span><br><span class="line">            e = &quot;0&quot; + e;</span><br><span class="line">        return Base64.encode(Hex.decode(e))</span><br><span class="line">    &#125;,</span><br><span class="line">    decrypt: function(e) &#123;</span><br><span class="line">        var t = new BigInteger(e,16)</span><br><span class="line">    &#125;,</span><br><span class="line">    pkcs1pad2: function(e, t) &#123;</span><br><span class="line">        if (t &lt; e.length + 11)</span><br><span class="line">            return null;</span><br><span class="line">        var n = [];</span><br><span class="line">        var i = e.length - 1;</span><br><span class="line">        for (; i &gt;= 0 &amp;&amp; t &gt; 0; )</span><br><span class="line">            n[--t] = e.charCodeAt(i--);</span><br><span class="line">        n[--t] = 0;</span><br><span class="line">        for (; t &gt; 2; )</span><br><span class="line">            n[--t] = Math.floor(254 * Math.random()) + 1;</span><br><span class="line">        n[--t] = 2;</span><br><span class="line">        n[--t] = 0;</span><br><span class="line">        return new BigInteger(n)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">function encrypt2(e) &#123;</span><br><span class="line">    var h = &#x27;-----BEGIN PUBLIC KEY-----MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC5gsH+AA4XWONB5TDcUd+xCz7ejOFHZKlcZDx+pF1i7Gsvi1vjyJoQhRtRSn950x498VUkx7rUxg1/ScBVfrRxQOZ8xFBye3pjAzfb22+RCuYApSVpJ3OO3KsEuKExftz9oFBv3ejxPlYc5yq7YiBO8XlTnQN0Sa4R4qhPO3I2MQIDAQAB-----END PUBLIC KEY-----&#x27;</span><br><span class="line">    var t = RSA.getPublicKey(h);</span><br><span class="line">    return RSA.encrypt(e, t)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081109195.png" alt="image.png"> </p><h2 id="2-encParams加密参数"><a href="#2-encParams加密参数" class="headerlink" title="2. encParams加密参数"></a>2. encParams加密参数</h2><p>全局搜索，定位到参数位置：确认SM4加密</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081110950.png" alt="image.png"> </p><h3 id="（1）跟进加密函数r-sm4Encrypt"><a href="#（1）跟进加密函数r-sm4Encrypt" class="headerlink" title="（1）跟进加密函数r._$sm4Encrypt"></a>（1）跟进加密函数r._$sm4Encrypt</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">_p._$sm4Encrypt = function(e) &#123;</span><br><span class="line">        return window.URSSM4.encrypt(JSON.stringify(e), _sm4pubkey)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081111173.png" alt="image.png"> </p><p>这块的 _sm4pubkey 是固定值为：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">_sm4pubkey = &#x27;BC60B8B9E4FFEFFA219E5AD77F11F9E2&#x27;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081111473.png" alt="image.png"> </p><p>定位 “window.URSSM4.encrypt” 函数位置，发现是webpack的形式</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081111841.png" alt="image.png"> </p><h3 id="（2）webpack代码分析"><a href="#（2）webpack代码分析" class="headerlink" title="（2）webpack代码分析"></a>（2）webpack代码分析</h3><p>①代码先复制进notepad++中</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081111138.png" alt="image.png"> </p><p>②找到分发器的位置</p><p>发现这块有调用的过程，且调用函数为n，所以猜测函数n所在位置可能为分发器</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081112926.png" alt="image.png"> </p><p>下断点，重新刷新一下页面（因为webpack是在页面最初就加载进来的，所以需要刷新页面）</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081112841.png" alt="image.png"> </p><p>成功断下，定位到n的位置：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081112802.png" alt="image.png"> </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081112996.png" alt="image.png"> </p><p>分发器代码简单改写下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> _e</span><br><span class="line"></span><br><span class="line">!<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">e</span>(<span class="params">i</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> r = n[i];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">void</span> <span class="number">0</span> !== r)</span><br><span class="line">      <span class="keyword">return</span> r.<span class="property">exports</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;--&gt;&#x27;</span>,i)</span><br><span class="line">     r = n[i] = &#123;</span><br><span class="line">       <span class="attr">exports</span>: &#123;&#125;</span><br><span class="line">       &#125;;</span><br><span class="line">    <span class="keyword">return</span> t[i](r, r.<span class="property">exports</span>, e),</span><br><span class="line">    r.<span class="property">exports</span></span><br><span class="line">  &#125;</span><br><span class="line">  _e = e</span><br><span class="line">&#125;(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//加载webpack模块</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>③扣取加密模块代码</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">7228: function(e) &#123;</span><br><span class="line">       e.exports = function(e, t) &#123;</span><br><span class="line">           (null == t || t &gt; e.length) &amp;&amp; (t = e.length);</span><br><span class="line">           for (var n = 0, i = new Array(t); n &lt; t; n++)</span><br><span class="line">               i[n] = e[n];</span><br><span class="line">           return i</span><br><span class="line">       &#125;</span><br><span class="line">       ,</span><br><span class="line">       e.exports[&quot;default&quot;] = e.exports,</span><br><span class="line">       e.exports.__esModule = !0</span><br><span class="line">   &#125;,</span><br><span class="line">   3646: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7228);</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           if (Array.isArray(e))</span><br><span class="line">               return i(e)</span><br><span class="line">       &#125;</span><br><span class="line">       ,</span><br><span class="line">       e.exports[&quot;default&quot;] = e.exports,</span><br><span class="line">       e.exports.__esModule = !0</span><br><span class="line">   &#125;,</span><br><span class="line">   6860: function(e) &#123;</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           if (&quot;undefined&quot; != typeof Symbol &amp;&amp; null != e[Symbol.iterator] || null != e[&quot;@@iterator&quot;])</span><br><span class="line">               return Array.from(e)</span><br><span class="line">       &#125;</span><br><span class="line">       ,</span><br><span class="line">       e.exports[&quot;default&quot;] = e.exports,</span><br><span class="line">       e.exports.__esModule = !0</span><br><span class="line">   &#125;,</span><br><span class="line">   8206: function(e) &#123;</span><br><span class="line">       e.exports = function() &#123;</span><br><span class="line">           throw new TypeError(&quot;Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;)</span><br><span class="line">       &#125;</span><br><span class="line">       ,</span><br><span class="line">       e.exports[&quot;default&quot;] = e.exports,</span><br><span class="line">       e.exports.__esModule = !0</span><br><span class="line">   &#125;,</span><br><span class="line">   319: function(e, t, n) &#123;</span><br><span class="line">       var i = n(3646)</span><br><span class="line">         , r = n(6860)</span><br><span class="line">         , a = n(379)</span><br><span class="line">         , s = n(8206);</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           return i(e) || r(e) || a(e) || s()</span><br><span class="line">       &#125;</span><br><span class="line">       ,</span><br><span class="line">       e.exports[&quot;default&quot;] = e.exports,</span><br><span class="line">       e.exports.__esModule = !0</span><br><span class="line">   &#125;,</span><br><span class="line">   379: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7228);</span><br><span class="line">       e.exports = function(e, t) &#123;</span><br><span class="line">           if (e) &#123;</span><br><span class="line">               if (&quot;string&quot; == typeof e)</span><br><span class="line">                   return i(e, t);</span><br><span class="line">               var n = Object.prototype.toString.call(e).slice(8, -1);</span><br><span class="line">               return &quot;Map&quot; === (n = &quot;Object&quot; === n &amp;&amp; e.constructor ? e.constructor.name : n) || &quot;Set&quot; === n ? Array.from(e) : &quot;Arguments&quot; === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? i(e, t) : void 0</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       ,</span><br><span class="line">       e.exports[&quot;default&quot;] = e.exports,</span><br><span class="line">       e.exports.__esModule = !0</span><br><span class="line">   &#125;,</span><br><span class="line">   9579: function(e, t, n) &#123;</span><br><span class="line">       function i(e) &#123;</span><br><span class="line">           for (var t = [], n = 0, i = e.length; n &lt; i; n += 2)</span><br><span class="line">               t.push(parseInt(e.substr(n, 2), 16));</span><br><span class="line">           return t</span><br><span class="line">       &#125;</span><br><span class="line">       function r(e, t) &#123;</span><br><span class="line">           return e &lt;&lt; t | e &gt;&gt;&gt; 32 - t</span><br><span class="line">       &#125;</span><br><span class="line">       function a(e) &#123;</span><br><span class="line">           return (255 &amp; _[e &gt;&gt;&gt; 24 &amp; 255]) &lt;&lt; 24 | (255 &amp; _[e &gt;&gt;&gt; 16 &amp; 255]) &lt;&lt; 16 | (255 &amp; _[e &gt;&gt;&gt; 8 &amp; 255]) &lt;&lt; 8 | 255 &amp; _[255 &amp; e]</span><br><span class="line">       &#125;</span><br><span class="line">       function s(e) &#123;</span><br><span class="line">           return e ^ r(e, 2) ^ r(e, 10) ^ r(e, 18) ^ r(e, 24)</span><br><span class="line">       &#125;</span><br><span class="line">       function o(e) &#123;</span><br><span class="line">           return e ^ r(e, 13) ^ r(e, 23)</span><br><span class="line">       &#125;</span><br><span class="line">       function c(e, t, n, r) &#123;</span><br><span class="line">           var c = 3 &lt; arguments.length &amp;&amp; void 0 !== r ? r : &#123;&#125;</span><br><span class="line">             , _ = c.padding</span><br><span class="line">             , h = void 0 === _ ? &quot;pkcs#5&quot; : _</span><br><span class="line">             , p = c.mode</span><br><span class="line">             , _ = c.iv</span><br><span class="line">             , _ = void 0 === _ ? [] : _</span><br><span class="line">             , c = c.output</span><br><span class="line">             , c = void 0 === c ? &quot;string&quot; : c;</span><br><span class="line">           if (&quot;cbc&quot; === p &amp;&amp; 16 !== (_ = &quot;string&quot; == typeof _ ? i(_) : _).length)</span><br><span class="line">               throw new Error(&quot;iv is invalid&quot;);</span><br><span class="line">           if (16 !== (t = &quot;string&quot; == typeof t ? i(t) : t).length)</span><br><span class="line">               throw new Error(&quot;key is invalid&quot;);</span><br><span class="line">           if (e = (&quot;string&quot; == typeof e ? n !== l ? function(e) &#123;</span><br><span class="line">               for (var t = [], n = 0, i = e.length; n &lt; i; n++) &#123;</span><br><span class="line">                   var r = e.codePointAt(n);</span><br><span class="line">                   if (r &lt;= 127)</span><br><span class="line">                       t.push(r);</span><br><span class="line">                   else if (r &lt;= 2047)</span><br><span class="line">                       t.push(192 | r &gt;&gt;&gt; 6),</span><br><span class="line">                       t.push(128 | 63 &amp; r);</span><br><span class="line">                   else if (r &lt;= 55295 || 57344 &lt;= r &amp;&amp; r &lt;= 65535)</span><br><span class="line">                       t.push(224 | r &gt;&gt;&gt; 12),</span><br><span class="line">                       t.push(128 | r &gt;&gt;&gt; 6 &amp; 63),</span><br><span class="line">                       t.push(128 | 63 &amp; r);</span><br><span class="line">                   else &#123;</span><br><span class="line">                       if (!(65536 &lt;= r &amp;&amp; r &lt;= 1114111))</span><br><span class="line">                           throw t.push(r),</span><br><span class="line">                           new Error(&quot;input is not supported&quot;);</span><br><span class="line">                       n++,</span><br><span class="line">                       t.push(240 | r &gt;&gt;&gt; 18 &amp; 28),</span><br><span class="line">                       t.push(128 | r &gt;&gt;&gt; 12 &amp; 63),</span><br><span class="line">                       t.push(128 | r &gt;&gt;&gt; 6 &amp; 63),</span><br><span class="line">                       t.push(128 | 63 &amp; r)</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">               return t</span><br><span class="line">           &#125;</span><br><span class="line">           : i : u)(e),</span><br><span class="line">           &quot;pkcs#5&quot; === h &amp;&amp; n !== l)</span><br><span class="line">               for (var m = d - e.length % d, g = 0; g &lt; m; g++)</span><br><span class="line">                   e.push(m);</span><br><span class="line">           var b = new Array(32);</span><br><span class="line">           !function(e, t, n) &#123;</span><br><span class="line">               for (var i = new Array(4), r = new Array(4), s = 0; s &lt; 4; s++)</span><br><span class="line">                   r[0] = 255 &amp; e[0 + 4 * s],</span><br><span class="line">                   r[1] = 255 &amp; e[1 + 4 * s],</span><br><span class="line">                   r[2] = 255 &amp; e[2 + 4 * s],</span><br><span class="line">                   r[3] = 255 &amp; e[3 + 4 * s],</span><br><span class="line">                   i[s] = r[0] &lt;&lt; 24 | r[1] &lt;&lt; 16 | r[2] &lt;&lt; 8 | r[3];</span><br><span class="line">               i[0] ^= 2746333894,</span><br><span class="line">               i[1] ^= 1453994832,</span><br><span class="line">               i[2] ^= 1736282519,</span><br><span class="line">               i[3] ^= 2993693404;</span><br><span class="line">               for (var c, u = 0; u &lt; 32; u += 4)</span><br><span class="line">                   c = i[1] ^ i[2] ^ i[3] ^ f[u + 0],</span><br><span class="line">                   t[u + 0] = i[0] ^= o(a(c)),</span><br><span class="line">                   c = i[2] ^ i[3] ^ i[0] ^ f[u + 1],</span><br><span class="line">                   t[u + 1] = i[1] ^= o(a(c)),</span><br><span class="line">                   c = i[3] ^ i[0] ^ i[1] ^ f[u + 2],</span><br><span class="line">                   t[u + 2] = i[2] ^= o(a(c)),</span><br><span class="line">                   c = i[0] ^ i[1] ^ i[2] ^ f[u + 3],</span><br><span class="line">                   t[u + 3] = i[3] ^= o(a(c));</span><br><span class="line">               if (n === l)</span><br><span class="line">                   for (var d, _ = 0; _ &lt; 16; _++)</span><br><span class="line">                       d = t[_],</span><br><span class="line">                       t[_] = t[31 - _],</span><br><span class="line">                       t[31 - _] = d</span><br><span class="line">           &#125;(t, b, n);</span><br><span class="line">           for (var v = [], y = _, $ = e.length, w = 0; d &lt;= $; ) &#123;</span><br><span class="line">               var C = e.slice(w, w + 16)</span><br><span class="line">                 , x = new Array(16);</span><br><span class="line">               if (&quot;cbc&quot; === p)</span><br><span class="line">                   for (var T = 0; T &lt; d; T++)</span><br><span class="line">                       n !== l &amp;&amp; (C[T] ^= y[T]);</span><br><span class="line">               !function(e, t, n) &#123;</span><br><span class="line">                   for (var i = new Array(4), r = new Array(4), o = 0; o &lt; 4; o++)</span><br><span class="line">                       r[0] = 255 &amp; e[4 * o],</span><br><span class="line">                       r[1] = 255 &amp; e[4 * o + 1],</span><br><span class="line">                       r[2] = 255 &amp; e[4 * o + 2],</span><br><span class="line">                       r[3] = 255 &amp; e[4 * o + 3],</span><br><span class="line">                       i[o] = r[0] &lt;&lt; 24 | r[1] &lt;&lt; 16 | r[2] &lt;&lt; 8 | r[3];</span><br><span class="line">                   for (var c, u = 0; u &lt; 32; u += 4)</span><br><span class="line">                       c = i[1] ^ i[2] ^ i[3] ^ n[u + 0],</span><br><span class="line">                       i[0] ^= s(a(c)),</span><br><span class="line">                       c = i[2] ^ i[3] ^ i[0] ^ n[u + 1],</span><br><span class="line">                       i[1] ^= s(a(c)),</span><br><span class="line">                       c = i[3] ^ i[0] ^ i[1] ^ n[u + 2],</span><br><span class="line">                       i[2] ^= s(a(c)),</span><br><span class="line">                       c = i[0] ^ i[1] ^ i[2] ^ n[u + 3],</span><br><span class="line">                       i[3] ^= s(a(c));</span><br><span class="line">                   for (var l = 0; l &lt; 16; l += 4)</span><br><span class="line">                       t[l] = i[3 - l / 4] &gt;&gt;&gt; 24 &amp; 255,</span><br><span class="line">                       t[l + 1] = i[3 - l / 4] &gt;&gt;&gt; 16 &amp; 255,</span><br><span class="line">                       t[l + 2] = i[3 - l / 4] &gt;&gt;&gt; 8 &amp; 255,</span><br><span class="line">                       t[l + 3] = 255 &amp; i[3 - l / 4]</span><br><span class="line">               &#125;(C, x, b);</span><br><span class="line">               for (var k = 0; k &lt; d; k++)</span><br><span class="line">                   &quot;cbc&quot; === p &amp;&amp; n === l &amp;&amp; (x[k] ^= y[k]),</span><br><span class="line">                   v[w + k] = x[k];</span><br><span class="line">               &quot;cbc&quot; === p &amp;&amp; (y = n !== l ? x : C),</span><br><span class="line">               $ -= d,</span><br><span class="line">               w += d</span><br><span class="line">           &#125;</span><br><span class="line">           return &quot;pkcs#5&quot; === h &amp;&amp; n === l &amp;&amp; (h = v[v.length - 1],</span><br><span class="line">           v.splice(v.length - h, h)),</span><br><span class="line">           &quot;array&quot; !== c ? n !== l ? v.map(function(e) &#123;</span><br><span class="line">               return 1 === (e = e.toString(16)).length ? &quot;0&quot; + e : e</span><br><span class="line">           &#125;).join(&quot;&quot;) : function(e) &#123;</span><br><span class="line">               for (var t = [], n = 0, i = e.length; n &lt; i; n++)</span><br><span class="line">                   240 &lt;= e[n] &amp;&amp; e[n] &lt;= 247 ? (t.push(String.fromCodePoint(((7 &amp; e[n]) &lt;&lt; 18) + ((63 &amp; e[n + 1]) &lt;&lt; 12) + ((63 &amp; e[n + 2]) &lt;&lt; 6) + (63 &amp; e[n + 3]))),</span><br><span class="line">                   n += 3) : 224 &lt;= e[n] &amp;&amp; e[n] &lt;= 239 ? (t.push(String.fromCodePoint(((15 &amp; e[n]) &lt;&lt; 12) + ((63 &amp; e[n + 1]) &lt;&lt; 6) + (63 &amp; e[n + 2]))),</span><br><span class="line">                   n += 2) : 192 &lt;= e[n] &amp;&amp; e[n] &lt;= 223 ? (t.push(String.fromCodePoint(((31 &amp; e[n]) &lt;&lt; 6) + (63 &amp; e[n + 1]))),</span><br><span class="line">                   n++) : t.push(String.fromCodePoint(e[n]));</span><br><span class="line">               return t.join(&quot;&quot;)</span><br><span class="line">           &#125;(v) : v</span><br><span class="line">       &#125;</span><br><span class="line">       var u = n(319);</span><br><span class="line">       n(1058),</span><br><span class="line">       n(9600),</span><br><span class="line">       n(1249),</span><br><span class="line">       n(3710),</span><br><span class="line">       n(1539),</span><br><span class="line">       n(9714),</span><br><span class="line">       n(9841),</span><br><span class="line">       n(4953),</span><br><span class="line">       n(7042),</span><br><span class="line">       n(561);</span><br><span class="line">       var l = 0</span><br><span class="line">         , d = 16</span><br><span class="line">         , _ = [214, 144, 233, 254, 204, 225, 61, 183, 22, 182, 20, 194, 40, 251, 44, 5, 43, 103, 154, 118, 42, 190, 4, 195, 170, 68, 19, 38, 73, 134, 6, 153, 156, 66, 80, 244, 145, 239, 152, 122, 51, 84, 11, 67, 237, 207, 172, 98, 228, 179, 28, 169, 201, 8, 232, 149, 128, 223, 148, 250, 117, 143, 63, 166, 71, 7, 167, 252, 243, 115, 23, 186, 131, 89, 60, 25, 230, 133, 79, 168, 104, 107, 129, 178, 113, 100, 218, 139, 248, 235, 15, 75, 112, 86, 157, 53, 30, 36, 14, 94, 99, 88, 209, 162, 37, 34, 124, 59, 1, 33, 120, 135, 212, 0, 70, 87, 159, 211, 39, 82, 76, 54, 2, 231, 160, 196, 200, 158, 234, 191, 138, 210, 64, 199, 56, 181, 163, 247, 242, 206, 249, 97, 21, 161, 224, 174, 93, 164, 155, 52, 26, 85, 173, 147, 50, 48, 245, 140, 177, 227, 29, 246, 226, 46, 130, 102, 202, 96, 192, 41, 35, 171, 13, 83, 78, 111, 213, 219, 55, 69, 222, 253, 142, 47, 3, 255, 106, 114, 109, 108, 91, 81, 141, 27, 175, 146, 187, 221, 188, 127, 17, 217, 92, 65, 31, 16, 90, 216, 10, 193, 49, 136, 165, 205, 123, 189, 45, 116, 208, 18, 184, 229, 180, 176, 137, 105, 151, 74, 12, 150, 119, 126, 101, 185, 241, 9, 197, 110, 198, 132, 24, 240, 125, 236, 58, 220, 77, 32, 121, 238, 95, 62, 215, 203, 57, 72]</span><br><span class="line">         , f = [462357, 472066609, 943670861, 1415275113, 1886879365, 2358483617, 2830087869, 3301692121, 3773296373, 4228057617, 404694573, 876298825, 1347903077, 1819507329, 2291111581, 2762715833, 3234320085, 3705924337, 4177462797, 337322537, 808926789, 1280531041, 1752135293, 2223739545, 2695343797, 3166948049, 3638552301, 4110090761, 269950501, 741554753, 1213159005, 1684763257];</span><br><span class="line">       e.exports = &#123;</span><br><span class="line">           encrypt: function(e, t, n) &#123;</span><br><span class="line">               return c(e, t, 1, n)</span><br><span class="line">           &#125;,</span><br><span class="line">           decrypt: function(e, t, n) &#123;</span><br><span class="line">               return c(e, t, 0, n)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   9662: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = n(614)</span><br><span class="line">         , a = n(6330)</span><br><span class="line">         , s = i.TypeError;</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           if (r(e))</span><br><span class="line">               return e;</span><br><span class="line">           throw s(a(e) + &quot; is not a function&quot;)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   9670: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = n(111)</span><br><span class="line">         , a = i.String</span><br><span class="line">         , s = i.TypeError;</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           if (r(e))</span><br><span class="line">               return e;</span><br><span class="line">           throw s(a(e) + &quot; is not an object&quot;)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   1318: function(e, t, n) &#123;</span><br><span class="line">       var i = n(5656)</span><br><span class="line">         , r = n(1400)</span><br><span class="line">         , a = n(6244)</span><br><span class="line">         , n = function(e) &#123;</span><br><span class="line">           return function(t, n, s) &#123;</span><br><span class="line">               var o, c = i(t), u = a(c), l = r(s, u);</span><br><span class="line">               if (e &amp;&amp; n != n) &#123;</span><br><span class="line">                   for (; l &lt; u; )</span><br><span class="line">                       if ((o = c[l++]) != o)</span><br><span class="line">                           return !0</span><br><span class="line">               &#125; else</span><br><span class="line">                   for (; l &lt; u; l++)</span><br><span class="line">                       if ((e || l in c) &amp;&amp; c[l] === n)</span><br><span class="line">                           return e || l || 0;</span><br><span class="line">               return !e &amp;&amp; -1</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;;</span><br><span class="line">       e.exports = &#123;</span><br><span class="line">           includes: n(!0),</span><br><span class="line">           indexOf: n(!1)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   2092: function(e, t, n) &#123;</span><br><span class="line">       var i = n(9974)</span><br><span class="line">         , r = n(1702)</span><br><span class="line">         , a = n(8361)</span><br><span class="line">         , s = n(7908)</span><br><span class="line">         , o = n(6244)</span><br><span class="line">         , c = n(5417)</span><br><span class="line">         , u = r([].push)</span><br><span class="line">         , r = function(e) &#123;</span><br><span class="line">           var t = 1 == e</span><br><span class="line">             , n = 2 == e</span><br><span class="line">             , r = 3 == e</span><br><span class="line">             , l = 4 == e</span><br><span class="line">             , d = 6 == e</span><br><span class="line">             , _ = 7 == e</span><br><span class="line">             , f = 5 == e || d;</span><br><span class="line">           return function(h, p, m, g) &#123;</span><br><span class="line">               for (var b, v, y = s(h), $ = a(y), w = i(p, m), C = o($), x = 0, g = g || c, T = t ? g(h, C) : n || _ ? g(h, 0) : void 0; x &lt; C; x++)</span><br><span class="line">                   if ((f || x in $) &amp;&amp; (v = w(b = $[x], x, y),</span><br><span class="line">                   e))</span><br><span class="line">                       if (t)</span><br><span class="line">                           T[x] = v;</span><br><span class="line">                       else if (v)</span><br><span class="line">                           switch (e) &#123;</span><br><span class="line">                           case 3:</span><br><span class="line">                               return !0;</span><br><span class="line">                           case 5:</span><br><span class="line">                               return b;</span><br><span class="line">                           case 6:</span><br><span class="line">                               return x;</span><br><span class="line">                           case 2:</span><br><span class="line">                               u(T, b)</span><br><span class="line">                           &#125;</span><br><span class="line">                       else</span><br><span class="line">                           switch (e) &#123;</span><br><span class="line">                           case 4:</span><br><span class="line">                               return !1;</span><br><span class="line">                           case 7:</span><br><span class="line">                               u(T, b)</span><br><span class="line">                           &#125;</span><br><span class="line">               return d ? -1 : r || l ? l : T</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;;</span><br><span class="line">       e.exports = &#123;</span><br><span class="line">           forEach: r(0),</span><br><span class="line">           map: r(1),</span><br><span class="line">           filter: r(2),</span><br><span class="line">           some: r(3),</span><br><span class="line">           every: r(4),</span><br><span class="line">           find: r(5),</span><br><span class="line">           findIndex: r(6),</span><br><span class="line">           filterReject: r(7)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   1194: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7293)</span><br><span class="line">         , r = n(5112)</span><br><span class="line">         , a = n(7392)</span><br><span class="line">         , s = r(&quot;species&quot;);</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           return 51 &lt;= a || !i(function() &#123;</span><br><span class="line">               var t = [];</span><br><span class="line">               return (t.constructor = &#123;&#125;)[s] = function() &#123;</span><br><span class="line">                   return &#123;</span><br><span class="line">                       foo: 1</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">               ,</span><br><span class="line">               1 !== t[e](Boolean).foo</span><br><span class="line">           &#125;)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   9341: function(e, t, n) &#123;</span><br><span class="line">       &quot;use strict&quot;;</span><br><span class="line">       var i = n(7293);</span><br><span class="line">       e.exports = function(e, t) &#123;</span><br><span class="line">           var n = [][e];</span><br><span class="line">           return !!n &amp;&amp; i(function() &#123;</span><br><span class="line">               n.call(null, t || function() &#123;</span><br><span class="line">                   throw 1</span><br><span class="line">               &#125;</span><br><span class="line">               , 1)</span><br><span class="line">           &#125;)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   206: function(e, t, n) &#123;</span><br><span class="line">       n = n(1702);</span><br><span class="line">       e.exports = n([].slice)</span><br><span class="line">   &#125;,</span><br><span class="line">   7475: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = n(3157)</span><br><span class="line">         , a = n(4411)</span><br><span class="line">         , s = n(111)</span><br><span class="line">         , o = n(5112)(&quot;species&quot;)</span><br><span class="line">         , c = i.Array;</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           var t;</span><br><span class="line">           return r(e) &amp;&amp; (t = e.constructor,</span><br><span class="line">           (a(t) &amp;&amp; (t === c || r(t.prototype)) || s(t) &amp;&amp; null === (t = t[o])) &amp;&amp; (t = void 0)),</span><br><span class="line">           void 0 === t ? c : t</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   5417: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7475);</span><br><span class="line">       e.exports = function(e, t) &#123;</span><br><span class="line">           return new (i(e))(0 === t ? 0 : t)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   4326: function(e, t, n) &#123;</span><br><span class="line">       var n = n(1702)</span><br><span class="line">         , i = n(&#123;&#125;.toString)</span><br><span class="line">         , r = n(&quot;&quot;.slice);</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           return r(i(e), 8, -1)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   648: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = n(1694)</span><br><span class="line">         , a = n(614)</span><br><span class="line">         , s = n(4326)</span><br><span class="line">         , o = n(5112)(&quot;toStringTag&quot;)</span><br><span class="line">         , c = i.Object</span><br><span class="line">         , u = &quot;Arguments&quot; == s(function() &#123;</span><br><span class="line">           return arguments</span><br><span class="line">       &#125;());</span><br><span class="line">       e.exports = r ? s : function(e) &#123;</span><br><span class="line">           var t;</span><br><span class="line">           return void 0 === e ? &quot;Undefined&quot; : null === e ? &quot;Null&quot; : &quot;string&quot; == typeof (e = function(e, t) &#123;</span><br><span class="line">               try &#123;</span><br><span class="line">                   return e[t]</span><br><span class="line">               &#125; catch (n) &#123;&#125;</span><br><span class="line">           &#125;(t = c(e), o)) ? e : u ? s(t) : &quot;Object&quot; == (e = s(t)) &amp;&amp; a(t.callee) ? &quot;Arguments&quot; : e</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   9920: function(e, t, n) &#123;</span><br><span class="line">       var i = n(2597)</span><br><span class="line">         , r = n(3887)</span><br><span class="line">         , a = n(1236)</span><br><span class="line">         , s = n(3070);</span><br><span class="line">       e.exports = function(e, t) &#123;</span><br><span class="line">           for (var n = r(t), o = s.f, c = a.f, u = 0; u &lt; n.length; u++) &#123;</span><br><span class="line">               var l = n[u];</span><br><span class="line">               i(e, l) || o(e, l, c(t, l))</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   8880: function(e, t, n) &#123;</span><br><span class="line">       var i = n(9781)</span><br><span class="line">         , r = n(3070)</span><br><span class="line">         , a = n(9114);</span><br><span class="line">       e.exports = i ? function(e, t, n) &#123;</span><br><span class="line">           return r.f(e, t, a(1, n))</span><br><span class="line">       &#125;</span><br><span class="line">       : function(e, t, n) &#123;</span><br><span class="line">           return e[t] = n,</span><br><span class="line">           e</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   9114: function(e) &#123;</span><br><span class="line">       e.exports = function(e, t) &#123;</span><br><span class="line">           return &#123;</span><br><span class="line">               enumerable: !(1 &amp; e),</span><br><span class="line">               configurable: !(2 &amp; e),</span><br><span class="line">               writable: !(4 &amp; e),</span><br><span class="line">               value: t</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   6135: function(e, t, n) &#123;</span><br><span class="line">       &quot;use strict&quot;;</span><br><span class="line">       var i = n(4948)</span><br><span class="line">         , r = n(3070)</span><br><span class="line">         , a = n(9114);</span><br><span class="line">       e.exports = function(e, t, n) &#123;</span><br><span class="line">           t = i(t);</span><br><span class="line">           t in e ? r.f(e, t, a(0, n)) : e[t] = n</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   9781: function(e, t, n) &#123;</span><br><span class="line">       n = n(7293);</span><br><span class="line">       e.exports = !n(function() &#123;</span><br><span class="line">           return 7 != Object.defineProperty(&#123;&#125;, 1, &#123;</span><br><span class="line">               get: function() &#123;</span><br><span class="line">                   return 7</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;)[1]</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;,</span><br><span class="line">   317: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , n = n(111)</span><br><span class="line">         , r = i.document</span><br><span class="line">         , a = n(r) &amp;&amp; n(r.createElement);</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           return a ? r.createElement(e) : &#123;&#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   8113: function(e, t, n) &#123;</span><br><span class="line">       n = n(5005);</span><br><span class="line">       e.exports = n(&quot;navigator&quot;, &quot;userAgent&quot;) || &quot;&quot;</span><br><span class="line">   &#125;,</span><br><span class="line">   7392: function(e, t, n) &#123;</span><br><span class="line">       var i, r, a = n(7854), s = n(8113), n = a.process, a = a.Deno, a = n &amp;&amp; n.versions || a &amp;&amp; a.version, a = a &amp;&amp; a.v8;</span><br><span class="line">       !(r = a ? 0 &lt; (i = a.split(&quot;.&quot;))[0] &amp;&amp; i[0] &lt; 4 ? 1 : +(i[0] + i[1]) : r) &amp;&amp; s &amp;&amp; (!(i = s.match(/Edge\/(\d+)/)) || 74 &lt;= i[1]) &amp;&amp; (i = s.match(/Chrome\/(\d+)/)) &amp;&amp; (r = +i[1]),</span><br><span class="line">       e.exports = r</span><br><span class="line">   &#125;,</span><br><span class="line">   748: function(e) &#123;</span><br><span class="line">       e.exports = [&quot;constructor&quot;, &quot;hasOwnProperty&quot;, &quot;isPrototypeOf&quot;, &quot;propertyIsEnumerable&quot;, &quot;toLocaleString&quot;, &quot;toString&quot;, &quot;valueOf&quot;]</span><br><span class="line">   &#125;,</span><br><span class="line">   2109: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = n(1236).f</span><br><span class="line">         , a = n(8880)</span><br><span class="line">         , s = n(1320)</span><br><span class="line">         , o = n(3505)</span><br><span class="line">         , c = n(9920)</span><br><span class="line">         , u = n(4705);</span><br><span class="line">       e.exports = function(e, t) &#123;</span><br><span class="line">           var n, l, d, _ = e.target, f = e.global, h = e.stat, p = f ? i : h ? i[_] || o(_, &#123;&#125;) : (i[_] || &#123;&#125;).prototype;</span><br><span class="line">           if (p)</span><br><span class="line">               for (n in t) &#123;</span><br><span class="line">                   if (l = t[n],</span><br><span class="line">                   d = e.noTargetGet ? (d = r(p, n)) &amp;&amp; d.value : p[n],</span><br><span class="line">                   !u(f ? n : _ + (h ? &quot;.&quot; : &quot;#&quot;) + n, e.forced) &amp;&amp; void 0 !== d) &#123;</span><br><span class="line">                       if (typeof l == typeof d)</span><br><span class="line">                           continue;</span><br><span class="line">                       c(l, d)</span><br><span class="line">                   &#125;</span><br><span class="line">                   (e.sham || d &amp;&amp; d.sham) &amp;&amp; a(l, &quot;sham&quot;, !0),</span><br><span class="line">                   s(p, n, l, e)</span><br><span class="line">               &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   7293: function(e) &#123;</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           try &#123;</span><br><span class="line">               return !!e()</span><br><span class="line">           &#125; catch (t) &#123;</span><br><span class="line">               return !0</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   9974: function(e, t, n) &#123;</span><br><span class="line">       var i = n(1702)</span><br><span class="line">         , r = n(9662)</span><br><span class="line">         , a = i(i.bind);</span><br><span class="line">       e.exports = function(e, t) &#123;</span><br><span class="line">           return r(e),</span><br><span class="line">           void 0 === t ? e : a ? a(e, t) : function() &#123;</span><br><span class="line">               return e.apply(t, arguments)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   6916: function(e) &#123;</span><br><span class="line">       var t = Function.prototype.call;</span><br><span class="line">       e.exports = t.bind ? t.bind(t) : function() &#123;</span><br><span class="line">           return t.apply(t, arguments)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   6530: function(e, t, n) &#123;</span><br><span class="line">       var i = n(9781)</span><br><span class="line">         , r = n(2597)</span><br><span class="line">         , a = Function.prototype</span><br><span class="line">         , s = i &amp;&amp; Object.getOwnPropertyDescriptor</span><br><span class="line">         , n = r(a, &quot;name&quot;)</span><br><span class="line">         , r = n &amp;&amp; &quot;something&quot; === function() &#123;&#125;</span><br><span class="line">       .name</span><br><span class="line">         , s = n &amp;&amp; (!i || s(a, &quot;name&quot;).configurable);</span><br><span class="line">       e.exports = &#123;</span><br><span class="line">           EXISTS: n,</span><br><span class="line">           PROPER: r,</span><br><span class="line">           CONFIGURABLE: s</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   1702: function(e) &#123;</span><br><span class="line">       var t = Function.prototype</span><br><span class="line">         , n = t.bind</span><br><span class="line">         , i = t.call</span><br><span class="line">         , r = n &amp;&amp; n.bind(i);</span><br><span class="line">       e.exports = n ? function(e) &#123;</span><br><span class="line">           return e &amp;&amp; r(i, e)</span><br><span class="line">       &#125;</span><br><span class="line">       : function(e) &#123;</span><br><span class="line">           return e &amp;&amp; function() &#123;</span><br><span class="line">               return i.apply(e, arguments)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   5005: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = n(614);</span><br><span class="line">       e.exports = function(e, t) &#123;</span><br><span class="line">           return arguments.length &lt; 2 ? (n = i[e],</span><br><span class="line">           r(n) ? n : void 0) : i[e] &amp;&amp; i[e][t];</span><br><span class="line">           var n</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   8173: function(e, t, n) &#123;</span><br><span class="line">       var i = n(9662);</span><br><span class="line">       e.exports = function(e, t) &#123;</span><br><span class="line">           e = e[t];</span><br><span class="line">           return null == e ? void 0 : i(e)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   7854: function(e, t, n) &#123;</span><br><span class="line">       var i = function(e) &#123;</span><br><span class="line">           return e &amp;&amp; e.Math == Math &amp;&amp; e</span><br><span class="line">       &#125;;</span><br><span class="line">       e.exports = i(&quot;object&quot; == typeof globalThis &amp;&amp; globalThis) || i(&quot;object&quot; == typeof window &amp;&amp; window) || i(&quot;object&quot; == typeof self &amp;&amp; self) || i(&quot;object&quot; == typeof n.g &amp;&amp; n.g) || function() &#123;</span><br><span class="line">           return this</span><br><span class="line">       &#125;() || Function(&quot;return this&quot;)()</span><br><span class="line">   &#125;,</span><br><span class="line">   2597: function(e, t, n) &#123;</span><br><span class="line">       var i = n(1702)</span><br><span class="line">         , r = n(7908)</span><br><span class="line">         , a = i(&#123;&#125;.hasOwnProperty);</span><br><span class="line">       e.exports = Object.hasOwn || function(e, t) &#123;</span><br><span class="line">           return a(r(e), t)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   3501: function(e) &#123;</span><br><span class="line">       e.exports = &#123;&#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   4664: function(e, t, n) &#123;</span><br><span class="line">       var i = n(9781)</span><br><span class="line">         , r = n(7293)</span><br><span class="line">         , a = n(317);</span><br><span class="line">       e.exports = !i &amp;&amp; !r(function() &#123;</span><br><span class="line">           return 7 != Object.defineProperty(a(&quot;div&quot;), &quot;a&quot;, &#123;</span><br><span class="line">               get: function() &#123;</span><br><span class="line">                   return 7</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;).a</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;,</span><br><span class="line">   8361: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = n(1702)</span><br><span class="line">         , a = n(7293)</span><br><span class="line">         , s = n(4326)</span><br><span class="line">         , o = i.Object</span><br><span class="line">         , c = r(&quot;&quot;.split);</span><br><span class="line">       e.exports = a(function() &#123;</span><br><span class="line">           return !o(&quot;z&quot;).propertyIsEnumerable(0)</span><br><span class="line">       &#125;) ? function(e) &#123;</span><br><span class="line">           return &quot;String&quot; == s(e) ? c(e, &quot;&quot;) : o(e)</span><br><span class="line">       &#125;</span><br><span class="line">       : o</span><br><span class="line">   &#125;,</span><br><span class="line">   2788: function(e, t, n) &#123;</span><br><span class="line">       var i = n(1702)</span><br><span class="line">         , r = n(614)</span><br><span class="line">         , n = n(5465)</span><br><span class="line">         , a = i(Function.toString);</span><br><span class="line">       r(n.inspectSource) || (n.inspectSource = function(e) &#123;</span><br><span class="line">           return a(e)</span><br><span class="line">       &#125;</span><br><span class="line">       ),</span><br><span class="line">       e.exports = n.inspectSource</span><br><span class="line">   &#125;,</span><br><span class="line">   9909: function(e, t, n) &#123;</span><br><span class="line">       var i, r, a, s, o, c, u, l, d = n(8536), _ = n(7854), f = n(1702), h = n(111), p = n(8880), m = n(2597), g = n(5465), b = n(6200), n = n(3501), v = &quot;Object already initialized&quot;, y = _.TypeError, _ = _.WeakMap;</span><br><span class="line">       u = d || g.state ? (i = g.state || (g.state = new _),</span><br><span class="line">       r = f(i.get),</span><br><span class="line">       a = f(i.has),</span><br><span class="line">       s = f(i.set),</span><br><span class="line">       o = function(e, t) &#123;</span><br><span class="line">           if (a(i, e))</span><br><span class="line">               throw new y(v);</span><br><span class="line">           return t.facade = e,</span><br><span class="line">           s(i, e, t),</span><br><span class="line">           t</span><br><span class="line">       &#125;</span><br><span class="line">       ,</span><br><span class="line">       c = function(e) &#123;</span><br><span class="line">           return r(i, e) || &#123;&#125;</span><br><span class="line">       &#125;</span><br><span class="line">       ,</span><br><span class="line">       function(e) &#123;</span><br><span class="line">           return a(i, e)</span><br><span class="line">       &#125;</span><br><span class="line">       ) : (n[l = b(&quot;state&quot;)] = !0,</span><br><span class="line">       o = function(e, t) &#123;</span><br><span class="line">           if (m(e, l))</span><br><span class="line">               throw new y(v);</span><br><span class="line">           return t.facade = e,</span><br><span class="line">           p(e, l, t),</span><br><span class="line">           t</span><br><span class="line">       &#125;</span><br><span class="line">       ,</span><br><span class="line">       c = function(e) &#123;</span><br><span class="line">           return m(e, l) ? e[l] : &#123;&#125;</span><br><span class="line">       &#125;</span><br><span class="line">       ,</span><br><span class="line">       function(e) &#123;</span><br><span class="line">           return m(e, l)</span><br><span class="line">       &#125;</span><br><span class="line">       ),</span><br><span class="line">       e.exports = &#123;</span><br><span class="line">           set: o,</span><br><span class="line">           get: c,</span><br><span class="line">           has: u,</span><br><span class="line">           enforce: function(e) &#123;</span><br><span class="line">               return u(e) ? c(e) : o(e, &#123;&#125;)</span><br><span class="line">           &#125;,</span><br><span class="line">           getterFor: function(e) &#123;</span><br><span class="line">               return function(t) &#123;</span><br><span class="line">                   var n;</span><br><span class="line">                   if (!h(t) || (n = c(t)).type !== e)</span><br><span class="line">                       throw y(&quot;Incompatible receiver, &quot; + e + &quot; required&quot;);</span><br><span class="line">                   return n</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   3157: function(e, t, n) &#123;</span><br><span class="line">       var i = n(4326);</span><br><span class="line">       e.exports = Array.isArray || function(e) &#123;</span><br><span class="line">           return &quot;Array&quot; == i(e)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   614: function(e) &#123;</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           return &quot;function&quot; == typeof e</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   4411: function(e, t, n) &#123;</span><br><span class="line">       var i = n(1702)</span><br><span class="line">         , r = n(7293)</span><br><span class="line">         , a = n(614)</span><br><span class="line">         , s = n(648)</span><br><span class="line">         , o = n(5005)</span><br><span class="line">         , c = n(2788)</span><br><span class="line">         , u = function() &#123;&#125;</span><br><span class="line">         , l = []</span><br><span class="line">         , d = o(&quot;Reflect&quot;, &quot;construct&quot;)</span><br><span class="line">         , _ = /^\s*(?:class|function)\b/</span><br><span class="line">         , f = i(_.exec)</span><br><span class="line">         , h = !_.exec(u)</span><br><span class="line">         , p = function(e) &#123;</span><br><span class="line">           if (!a(e))</span><br><span class="line">               return !1;</span><br><span class="line">           try &#123;</span><br><span class="line">               return d(u, l, e),</span><br><span class="line">               !0</span><br><span class="line">           &#125; catch (t) &#123;</span><br><span class="line">               return !1</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;;</span><br><span class="line">       e.exports = !d || r(function() &#123;</span><br><span class="line">           var e;</span><br><span class="line">           return p(p.call) || !p(Object) || !p(function() &#123;</span><br><span class="line">               e = !0</span><br><span class="line">           &#125;) || e</span><br><span class="line">       &#125;) ? function(e) &#123;</span><br><span class="line">           if (!a(e))</span><br><span class="line">               return !1;</span><br><span class="line">           switch (s(e)) &#123;</span><br><span class="line">           case &quot;AsyncFunction&quot;:</span><br><span class="line">           case &quot;GeneratorFunction&quot;:</span><br><span class="line">           case &quot;AsyncGeneratorFunction&quot;:</span><br><span class="line">               return !1</span><br><span class="line">           &#125;</span><br><span class="line">           return h || !!f(_, c(e))</span><br><span class="line">       &#125;</span><br><span class="line">       : p</span><br><span class="line">   &#125;,</span><br><span class="line">   4705: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7293)</span><br><span class="line">         , r = n(614)</span><br><span class="line">         , a = /#|\.prototype\./</span><br><span class="line">         , n = function(e, t) &#123;</span><br><span class="line">           e = o[s(e)];</span><br><span class="line">           return e == u || e != c &amp;&amp; (r(t) ? i(t) : !!t)</span><br><span class="line">       &#125;</span><br><span class="line">         , s = n.normalize = function(e) &#123;</span><br><span class="line">           return String(e).replace(a, &quot;.&quot;).toLowerCase()</span><br><span class="line">       &#125;</span><br><span class="line">         , o = n.data = &#123;&#125;</span><br><span class="line">         , c = n.NATIVE = &quot;N&quot;</span><br><span class="line">         , u = n.POLYFILL = &quot;P&quot;;</span><br><span class="line">       e.exports = n</span><br><span class="line">   &#125;,</span><br><span class="line">   111: function(e, t, n) &#123;</span><br><span class="line">       var i = n(614);</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           return &quot;object&quot; == typeof e ? null !== e : i(e)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   1913: function(e) &#123;</span><br><span class="line">       e.exports = !1</span><br><span class="line">   &#125;,</span><br><span class="line">   2190: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = n(5005)</span><br><span class="line">         , a = n(614)</span><br><span class="line">         , s = n(7976)</span><br><span class="line">         , n = n(3307)</span><br><span class="line">         , o = i.Object;</span><br><span class="line">       e.exports = n ? function(e) &#123;</span><br><span class="line">           return &quot;symbol&quot; == typeof e</span><br><span class="line">       &#125;</span><br><span class="line">       : function(e) &#123;</span><br><span class="line">           var t = r(&quot;Symbol&quot;);</span><br><span class="line">           return a(t) &amp;&amp; s(t.prototype, o(e))</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   6244: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7466);</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           return i(e.length)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   133: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7392)</span><br><span class="line">         , n = n(7293);</span><br><span class="line">       e.exports = !!Object.getOwnPropertySymbols &amp;&amp; !n(function() &#123;</span><br><span class="line">           var e = Symbol();</span><br><span class="line">           return !String(e) || !(Object(e)instanceof Symbol) || !Symbol.sham &amp;&amp; i &amp;&amp; i &lt; 41</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;,</span><br><span class="line">   8536: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = n(614)</span><br><span class="line">         , n = n(2788)</span><br><span class="line">         , i = i.WeakMap;</span><br><span class="line">       e.exports = r(i) &amp;&amp; /native code/.test(n(i))</span><br><span class="line">   &#125;,</span><br><span class="line">   3009: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = n(7293)</span><br><span class="line">         , a = n(1702)</span><br><span class="line">         , s = n(1340)</span><br><span class="line">         , o = n(3111).trim</span><br><span class="line">         , n = n(1361)</span><br><span class="line">         , c = i.parseInt</span><br><span class="line">         , i = i.Symbol</span><br><span class="line">         , u = i &amp;&amp; i.iterator</span><br><span class="line">         , l = /^[+-]?0x/i</span><br><span class="line">         , d = a(l.exec)</span><br><span class="line">         , r = 8 !== c(n + &quot;08&quot;) || 22 !== c(n + &quot;0x16&quot;) || u &amp;&amp; !r(function() &#123;</span><br><span class="line">           c(Object(u))</span><br><span class="line">       &#125;);</span><br><span class="line">       e.exports = r ? function _(e, t) &#123;</span><br><span class="line">           e = o(s(e));</span><br><span class="line">           return c(e, t &gt;&gt;&gt; 0 || (d(l, e) ? 16 : 10))</span><br><span class="line">       &#125;</span><br><span class="line">       : c</span><br><span class="line">   &#125;,</span><br><span class="line">   3070: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = n(9781)</span><br><span class="line">         , a = n(4664)</span><br><span class="line">         , s = n(9670)</span><br><span class="line">         , o = n(4948)</span><br><span class="line">         , c = i.TypeError</span><br><span class="line">         , u = Object.defineProperty;</span><br><span class="line">       t.f = r ? u : function(e, t, n) &#123;</span><br><span class="line">           if (s(e),</span><br><span class="line">           t = o(t),</span><br><span class="line">           s(n),</span><br><span class="line">           a)</span><br><span class="line">               try &#123;</span><br><span class="line">                   return u(e, t, n)</span><br><span class="line">               &#125; catch (i) &#123;&#125;</span><br><span class="line">           if (&quot;get&quot;in n || &quot;set&quot;in n)</span><br><span class="line">               throw c(&quot;Accessors not supported&quot;);</span><br><span class="line">           return &quot;value&quot;in n &amp;&amp; (e[t] = n.value),</span><br><span class="line">           e</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   1236: function(e, t, n) &#123;</span><br><span class="line">       var i = n(9781)</span><br><span class="line">         , r = n(6916)</span><br><span class="line">         , a = n(5296)</span><br><span class="line">         , s = n(9114)</span><br><span class="line">         , o = n(5656)</span><br><span class="line">         , c = n(4948)</span><br><span class="line">         , u = n(2597)</span><br><span class="line">         , l = n(4664)</span><br><span class="line">         , d = Object.getOwnPropertyDescriptor;</span><br><span class="line">       t.f = i ? d : function(e, t) &#123;</span><br><span class="line">           if (e = o(e),</span><br><span class="line">           t = c(t),</span><br><span class="line">           l)</span><br><span class="line">               try &#123;</span><br><span class="line">                   return d(e, t)</span><br><span class="line">               &#125; catch (n) &#123;&#125;</span><br><span class="line">           if (u(e, t))</span><br><span class="line">               return s(!r(a.f, e, t), e[t])</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   8006: function(e, t, n) &#123;</span><br><span class="line">       var i = n(6324)</span><br><span class="line">         , r = n(748).concat(&quot;length&quot;, &quot;prototype&quot;);</span><br><span class="line">       t.f = Object.getOwnPropertyNames || function(e) &#123;</span><br><span class="line">           return i(e, r)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   5181: function(e, t) &#123;</span><br><span class="line">       t.f = Object.getOwnPropertySymbols</span><br><span class="line">   &#125;,</span><br><span class="line">   7976: function(e, t, n) &#123;</span><br><span class="line">       n = n(1702);</span><br><span class="line">       e.exports = n(&#123;&#125;.isPrototypeOf)</span><br><span class="line">   &#125;,</span><br><span class="line">   6324: function(e, t, n) &#123;</span><br><span class="line">       var i = n(1702)</span><br><span class="line">         , r = n(2597)</span><br><span class="line">         , a = n(5656)</span><br><span class="line">         , s = n(1318).indexOf</span><br><span class="line">         , o = n(3501)</span><br><span class="line">         , c = i([].push);</span><br><span class="line">       e.exports = function(e, t) &#123;</span><br><span class="line">           var n, i = a(e), u = 0, l = [];</span><br><span class="line">           for (n in i)</span><br><span class="line">               !r(o, n) &amp;&amp; r(i, n) &amp;&amp; c(l, n);</span><br><span class="line">           for (; t.length &gt; u; )</span><br><span class="line">               r(i, n = t[u++]) &amp;&amp; (~s(l, n) || c(l, n));</span><br><span class="line">           return l</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   5296: function(e, t) &#123;</span><br><span class="line">       &quot;use strict&quot;;</span><br><span class="line">       var n = &#123;&#125;.propertyIsEnumerable</span><br><span class="line">         , i = Object.getOwnPropertyDescriptor</span><br><span class="line">         , r = i &amp;&amp; !n.call(&#123;</span><br><span class="line">           1: 2</span><br><span class="line">       &#125;, 1);</span><br><span class="line">       t.f = r ? function(e) &#123;</span><br><span class="line">           e = i(this, e);</span><br><span class="line">           return !!e &amp;&amp; e.enumerable</span><br><span class="line">       &#125;</span><br><span class="line">       : n</span><br><span class="line">   &#125;,</span><br><span class="line">   288: function(e, t, n) &#123;</span><br><span class="line">       &quot;use strict&quot;;</span><br><span class="line">       var i = n(1694)</span><br><span class="line">         , r = n(648);</span><br><span class="line">       e.exports = i ? &#123;&#125;.toString : function() &#123;</span><br><span class="line">           return &quot;[object &quot; + r(this) + &quot;]&quot;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   2140: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = n(6916)</span><br><span class="line">         , a = n(614)</span><br><span class="line">         , s = n(111)</span><br><span class="line">         , o = i.TypeError;</span><br><span class="line">       e.exports = function(e, t) &#123;</span><br><span class="line">           var n, i;</span><br><span class="line">           if (&quot;string&quot; === t &amp;&amp; a(n = e.toString) &amp;&amp; !s(i = r(n, e)))</span><br><span class="line">               return i;</span><br><span class="line">           if (a(n = e.valueOf) &amp;&amp; !s(i = r(n, e)))</span><br><span class="line">               return i;</span><br><span class="line">           if (&quot;string&quot; !== t &amp;&amp; a(n = e.toString) &amp;&amp; !s(i = r(n, e)))</span><br><span class="line">               return i;</span><br><span class="line">           throw o(&quot;Can&#x27;t convert object to primitive value&quot;)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   3887: function(e, t, n) &#123;</span><br><span class="line">       var i = n(5005)</span><br><span class="line">         , r = n(1702)</span><br><span class="line">         , a = n(8006)</span><br><span class="line">         , s = n(5181)</span><br><span class="line">         , o = n(9670)</span><br><span class="line">         , c = r([].concat);</span><br><span class="line">       e.exports = i(&quot;Reflect&quot;, &quot;ownKeys&quot;) || function(e) &#123;</span><br><span class="line">           var t = a.f(o(e))</span><br><span class="line">             , n = s.f;</span><br><span class="line">           return n ? c(t, n(e)) : t</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   1320: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = n(614)</span><br><span class="line">         , a = n(2597)</span><br><span class="line">         , s = n(8880)</span><br><span class="line">         , o = n(3505)</span><br><span class="line">         , c = n(2788)</span><br><span class="line">         , u = n(9909)</span><br><span class="line">         , l = n(6530).CONFIGURABLE</span><br><span class="line">         , d = u.get</span><br><span class="line">         , _ = u.enforce</span><br><span class="line">         , f = String(String).split(&quot;String&quot;);</span><br><span class="line">       (e.exports = function(e, t, n, c) &#123;</span><br><span class="line">           var u = !!c &amp;&amp; !!c.unsafe</span><br><span class="line">             , d = !!c &amp;&amp; !!c.enumerable</span><br><span class="line">             , h = !!c &amp;&amp; !!c.noTargetGet</span><br><span class="line">             , p = c &amp;&amp; void 0 !== c.name ? c.name : t;</span><br><span class="line">           r(n) &amp;&amp; (&quot;Symbol(&quot; === String(p).slice(0, 7) &amp;&amp; (p = &quot;[&quot; + String(p).replace(/^Symbol\(([^)]*)\)/, &quot;$1&quot;) + &quot;]&quot;),</span><br><span class="line">           (!a(n, &quot;name&quot;) || l &amp;&amp; n.name !== p) &amp;&amp; s(n, &quot;name&quot;, p),</span><br><span class="line">           (c = _(n)).source || (c.source = f.join(&quot;string&quot; == typeof p ? p : &quot;&quot;))),</span><br><span class="line">           e !== i ? (u ? !h &amp;&amp; e[t] &amp;&amp; (d = !0) : delete e[t],</span><br><span class="line">           d ? e[t] = n : s(e, t, n)) : d ? e[t] = n : o(t, n)</span><br><span class="line">       &#125;</span><br><span class="line">       )(Function.prototype, &quot;toString&quot;, function() &#123;</span><br><span class="line">           return r(this) &amp;&amp; d(this).source || c(this)</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;,</span><br><span class="line">   7066: function(e, t, n) &#123;</span><br><span class="line">       &quot;use strict&quot;;</span><br><span class="line">       var i = n(9670);</span><br><span class="line">       e.exports = function() &#123;</span><br><span class="line">           var e = i(this)</span><br><span class="line">             , t = &quot;&quot;;</span><br><span class="line">           return e.global &amp;&amp; (t += &quot;g&quot;),</span><br><span class="line">           e.ignoreCase &amp;&amp; (t += &quot;i&quot;),</span><br><span class="line">           e.multiline &amp;&amp; (t += &quot;m&quot;),</span><br><span class="line">           e.dotAll &amp;&amp; (t += &quot;s&quot;),</span><br><span class="line">           e.unicode &amp;&amp; (t += &quot;u&quot;),</span><br><span class="line">           e.sticky &amp;&amp; (t += &quot;y&quot;),</span><br><span class="line">           t</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   4488: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854).TypeError;</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           if (void 0 == e)</span><br><span class="line">               throw i(&quot;Can&#x27;t call method on &quot; + e);</span><br><span class="line">           return e</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   3505: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = Object.defineProperty;</span><br><span class="line">       e.exports = function(e, t) &#123;</span><br><span class="line">           try &#123;</span><br><span class="line">               r(i, e, &#123;</span><br><span class="line">                   value: t,</span><br><span class="line">                   configurable: !0,</span><br><span class="line">                   writable: !0</span><br><span class="line">               &#125;)</span><br><span class="line">           &#125; catch (n) &#123;</span><br><span class="line">               i[e] = t</span><br><span class="line">           &#125;</span><br><span class="line">           return t</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   6200: function(e, t, n) &#123;</span><br><span class="line">       var i = n(2309)</span><br><span class="line">         , r = n(9711)</span><br><span class="line">         , a = i(&quot;keys&quot;);</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           return a[e] || (a[e] = r(e))</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   5465: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = n(3505)</span><br><span class="line">         , n = &quot;__core-js_shared__&quot;</span><br><span class="line">         , r = i[n] || r(n, &#123;&#125;);</span><br><span class="line">       e.exports = r</span><br><span class="line">   &#125;,</span><br><span class="line">   2309: function(e, t, n) &#123;</span><br><span class="line">       var i = n(1913)</span><br><span class="line">         , r = n(5465);</span><br><span class="line">       (e.exports = function(e, t) &#123;</span><br><span class="line">           return r[e] || (r[e] = void 0 !== t ? t : &#123;&#125;)</span><br><span class="line">       &#125;</span><br><span class="line">       )(&quot;versions&quot;, []).push(&#123;</span><br><span class="line">           version: &quot;3.19.0&quot;,</span><br><span class="line">           mode: i ? &quot;pure&quot; : &quot;global&quot;,</span><br><span class="line">           copyright: &quot;© 2021 Denis Pushkarev (zloirock.ru)&quot;</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;,</span><br><span class="line">   8710: function(e, t, n) &#123;</span><br><span class="line">       var i = n(1702)</span><br><span class="line">         , r = n(9303)</span><br><span class="line">         , a = n(1340)</span><br><span class="line">         , s = n(4488)</span><br><span class="line">         , o = i(&quot;&quot;.charAt)</span><br><span class="line">         , c = i(&quot;&quot;.charCodeAt)</span><br><span class="line">         , u = i(&quot;&quot;.slice)</span><br><span class="line">         , i = function(e) &#123;</span><br><span class="line">           return function(t, n) &#123;</span><br><span class="line">               var i, l = a(s(t)), d = r(n), t = l.length;</span><br><span class="line">               return d &lt; 0 || t &lt;= d ? e ? &quot;&quot; : void 0 : (n = c(l, d)) &lt; 55296 || 56319 &lt; n || d + 1 === t || (i = c(l, d + 1)) &lt; 56320 || 57343 &lt; i ? e ? o(l, d) : n : e ? u(l, d, d + 2) : i - 56320 + (n - 55296 &lt;&lt; 10) + 65536</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;;</span><br><span class="line">       e.exports = &#123;</span><br><span class="line">           codeAt: i(!1),</span><br><span class="line">           charAt: i(!0)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   3111: function(e, t, n) &#123;</span><br><span class="line">       var i = n(1702)</span><br><span class="line">         , r = n(4488)</span><br><span class="line">         , a = n(1340)</span><br><span class="line">         , n = n(1361)</span><br><span class="line">         , s = i(&quot;&quot;.replace)</span><br><span class="line">         , n = &quot;[&quot; + n + &quot;]&quot;</span><br><span class="line">         , o = RegExp(&quot;^&quot; + n + n + &quot;*&quot;)</span><br><span class="line">         , c = RegExp(n + n + &quot;*$&quot;)</span><br><span class="line">         , n = function(e) &#123;</span><br><span class="line">           return function(t) &#123;</span><br><span class="line">               t = a(r(t));</span><br><span class="line">               return 1 &amp; e &amp;&amp; (t = s(t, o, &quot;&quot;)),</span><br><span class="line">               t = 2 &amp; e ? s(t, c, &quot;&quot;) : t</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;;</span><br><span class="line">       e.exports = &#123;</span><br><span class="line">           start: n(1),</span><br><span class="line">           end: n(2),</span><br><span class="line">           trim: n(3)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   1400: function(e, t, n) &#123;</span><br><span class="line">       var i = n(9303)</span><br><span class="line">         , r = Math.max</span><br><span class="line">         , a = Math.min;</span><br><span class="line">       e.exports = function(e, t) &#123;</span><br><span class="line">           e = i(e);</span><br><span class="line">           return e &lt; 0 ? r(e + t, 0) : a(e, t)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   5656: function(e, t, n) &#123;</span><br><span class="line">       var i = n(8361)</span><br><span class="line">         , r = n(4488);</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           return i(r(e))</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   9303: function(e) &#123;</span><br><span class="line">       var t = Math.ceil</span><br><span class="line">         , n = Math.floor;</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           e = +e;</span><br><span class="line">           return e != e || 0 == e ? 0 : (0 &lt; e ? n : t)(e)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   7466: function(e, t, n) &#123;</span><br><span class="line">       var i = n(9303)</span><br><span class="line">         , r = Math.min;</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           return 0 &lt; e ? r(i(e), 9007199254740991) : 0</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   7908: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = n(4488)</span><br><span class="line">         , a = i.Object;</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           return a(r(e))</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   7593: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = n(6916)</span><br><span class="line">         , a = n(111)</span><br><span class="line">         , s = n(2190)</span><br><span class="line">         , o = n(8173)</span><br><span class="line">         , c = n(2140)</span><br><span class="line">         , n = n(5112)</span><br><span class="line">         , u = i.TypeError</span><br><span class="line">         , l = n(&quot;toPrimitive&quot;);</span><br><span class="line">       e.exports = function(e, t) &#123;</span><br><span class="line">           if (!a(e) || s(e))</span><br><span class="line">               return e;</span><br><span class="line">           var n = o(e, l);</span><br><span class="line">           if (n) &#123;</span><br><span class="line">               if (void 0 === t &amp;&amp; (t = &quot;default&quot;),</span><br><span class="line">               n = r(n, e, t),</span><br><span class="line">               !a(n) || s(n))</span><br><span class="line">                   return n;</span><br><span class="line">               throw u(&quot;Can&#x27;t convert object to primitive value&quot;)</span><br><span class="line">           &#125;</span><br><span class="line">           return void 0 === t &amp;&amp; (t = &quot;number&quot;),</span><br><span class="line">           c(e, t)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   4948: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7593)</span><br><span class="line">         , r = n(2190);</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           e = i(e, &quot;string&quot;);</span><br><span class="line">           return r(e) ? e : e + &quot;&quot;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   1694: function(e, t, n) &#123;</span><br><span class="line">       var i = &#123;&#125;;</span><br><span class="line">       i[n(5112)(&quot;toStringTag&quot;)] = &quot;z&quot;,</span><br><span class="line">       e.exports = &quot;[object z]&quot; === String(i)</span><br><span class="line">   &#125;,</span><br><span class="line">   1340: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = n(648)</span><br><span class="line">         , a = i.String;</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           if (&quot;Symbol&quot; === r(e))</span><br><span class="line">               throw TypeError(&quot;Cannot convert a Symbol value to a string&quot;);</span><br><span class="line">           return a(e)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   6330: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854).String;</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           try &#123;</span><br><span class="line">               return i(e)</span><br><span class="line">           &#125; catch (t) &#123;</span><br><span class="line">               return &quot;Object&quot;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   9711: function(e, t, n) &#123;</span><br><span class="line">       var n = n(1702)</span><br><span class="line">         , i = 0</span><br><span class="line">         , r = Math.random()</span><br><span class="line">         , a = n(1..toString);</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           return &quot;Symbol(&quot; + (void 0 === e ? &quot;&quot; : e) + &quot;)_&quot; + a(++i + r, 36)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   3307: function(e, t, n) &#123;</span><br><span class="line">       n = n(133);</span><br><span class="line">       e.exports = n &amp;&amp; !Symbol.sham &amp;&amp; &quot;symbol&quot; == typeof Symbol.iterator</span><br><span class="line">   &#125;,</span><br><span class="line">   5112: function(e, t, n) &#123;</span><br><span class="line">       var i = n(7854)</span><br><span class="line">         , r = n(2309)</span><br><span class="line">         , a = n(2597)</span><br><span class="line">         , s = n(9711)</span><br><span class="line">         , o = n(133)</span><br><span class="line">         , c = n(3307)</span><br><span class="line">         , u = r(&quot;wks&quot;)</span><br><span class="line">         , l = i.Symbol</span><br><span class="line">         , d = l &amp;&amp; l[&quot;for&quot;]</span><br><span class="line">         , _ = c ? l : l &amp;&amp; l.withoutSetter || s;</span><br><span class="line">       e.exports = function(e) &#123;</span><br><span class="line">           var t;</span><br><span class="line">           return a(u, e) &amp;&amp; (o || &quot;string&quot; == typeof u[e]) || (t = &quot;Symbol.&quot; + e,</span><br><span class="line">           o &amp;&amp; a(l, e) ? u[e] = l[e] : u[e] = (c &amp;&amp; d ? d : _)(t)),</span><br><span class="line">           u[e]</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   1361: function(e) &#123;</span><br><span class="line">       e.exports = &quot;\t\n\x0B\f\r                　\u2028\u2029\ufeff&quot;</span><br><span class="line">   &#125;,</span><br><span class="line">   9600: function(e, t, n) &#123;</span><br><span class="line">       &quot;use strict&quot;;</span><br><span class="line">       var i = n(2109)</span><br><span class="line">         , r = n(1702)</span><br><span class="line">         , a = n(8361)</span><br><span class="line">         , s = n(5656)</span><br><span class="line">         , n = n(9341)</span><br><span class="line">         , o = r([].join)</span><br><span class="line">         , a = a != Object</span><br><span class="line">         , n = n(&quot;join&quot;, &quot;,&quot;);</span><br><span class="line">       i(&#123;</span><br><span class="line">           target: &quot;Array&quot;,</span><br><span class="line">           proto: !0,</span><br><span class="line">           forced: a || !n</span><br><span class="line">       &#125;, &#123;</span><br><span class="line">           join: function(e) &#123;</span><br><span class="line">               return o(s(this), void 0 === e ? &quot;,&quot; : e)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;,</span><br><span class="line">   1249: function(e, t, n) &#123;</span><br><span class="line">       &quot;use strict&quot;;</span><br><span class="line">       var i = n(2109)</span><br><span class="line">         , r = n(2092).map;</span><br><span class="line">       i(&#123;</span><br><span class="line">           target: &quot;Array&quot;,</span><br><span class="line">           proto: !0,</span><br><span class="line">           forced: !n(1194)(&quot;map&quot;)</span><br><span class="line">       &#125;, &#123;</span><br><span class="line">           map: function(e) &#123;</span><br><span class="line">               return r(this, e, 1 &lt; arguments.length ? arguments[1] : void 0)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;,</span><br><span class="line">   7042: function(e, t, n) &#123;</span><br><span class="line">       &quot;use strict&quot;;</span><br><span class="line">       var i = n(2109)</span><br><span class="line">         , r = n(7854)</span><br><span class="line">         , a = n(3157)</span><br><span class="line">         , s = n(4411)</span><br><span class="line">         , o = n(111)</span><br><span class="line">         , c = n(1400)</span><br><span class="line">         , u = n(6244)</span><br><span class="line">         , l = n(5656)</span><br><span class="line">         , d = n(6135)</span><br><span class="line">         , _ = n(5112)</span><br><span class="line">         , f = n(1194)</span><br><span class="line">         , h = n(206)</span><br><span class="line">         , f = f(&quot;slice&quot;)</span><br><span class="line">         , p = _(&quot;species&quot;)</span><br><span class="line">         , m = r.Array</span><br><span class="line">         , g = Math.max;</span><br><span class="line">       i(&#123;</span><br><span class="line">           target: &quot;Array&quot;,</span><br><span class="line">           proto: !0,</span><br><span class="line">           forced: !f</span><br><span class="line">       &#125;, &#123;</span><br><span class="line">           slice: function(e, t) &#123;</span><br><span class="line">               var n, i, r, _ = l(this), f = u(_), b = c(e, f), v = c(void 0 === t ? f : t, f);</span><br><span class="line">               if (a(_) &amp;&amp; (n = _.constructor,</span><br><span class="line">               (n = s(n) &amp;&amp; (n === m || a(n.prototype)) || o(n) &amp;&amp; null === (n = n[p]) ? void 0 : n) === m || void 0 === n))</span><br><span class="line">                   return h(_, b, v);</span><br><span class="line">               for (i = new (void 0 === n ? m : n)(g(v - b, 0)),</span><br><span class="line">               r = 0; b &lt; v; b++,</span><br><span class="line">               r++)</span><br><span class="line">                   b in _ &amp;&amp; d(i, r, _[b]);</span><br><span class="line">               return i.length = r,</span><br><span class="line">               i</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;,</span><br><span class="line">   561: function(e, t, n) &#123;</span><br><span class="line">       &quot;use strict&quot;;</span><br><span class="line">       var i = n(2109)</span><br><span class="line">         , r = n(7854)</span><br><span class="line">         , a = n(1400)</span><br><span class="line">         , s = n(9303)</span><br><span class="line">         , o = n(6244)</span><br><span class="line">         , c = n(7908)</span><br><span class="line">         , u = n(5417)</span><br><span class="line">         , l = n(6135)</span><br><span class="line">         , n = n(1194)(&quot;splice&quot;)</span><br><span class="line">         , d = r.TypeError</span><br><span class="line">         , _ = Math.max</span><br><span class="line">         , f = Math.min;</span><br><span class="line">       i(&#123;</span><br><span class="line">           target: &quot;Array&quot;,</span><br><span class="line">           proto: !0,</span><br><span class="line">           forced: !n</span><br><span class="line">       &#125;, &#123;</span><br><span class="line">           splice: function(e, t) &#123;</span><br><span class="line">               var n, i, r, h, p, m, g = c(this), b = o(g), v = a(e, b), e = arguments.length;</span><br><span class="line">               if (0 === e ? n = i = 0 : i = 1 === e ? (n = 0,</span><br><span class="line">               b - v) : (n = e - 2,</span><br><span class="line">               f(_(s(t), 0), b - v)),</span><br><span class="line">               9007199254740991 &lt; b + n - i)</span><br><span class="line">                   throw d(&quot;Maximum allowed length exceeded&quot;);</span><br><span class="line">               for (r = u(g, i),</span><br><span class="line">               h = 0; h &lt; i; h++)</span><br><span class="line">                   (p = v + h)in g &amp;&amp; l(r, h, g[p]);</span><br><span class="line">               if (n &lt; (r.length = i)) &#123;</span><br><span class="line">                   for (h = v; h &lt; b - i; h++)</span><br><span class="line">                       m = h + n,</span><br><span class="line">                       (p = h + i)in g ? g[m] = g[p] : delete g[m];</span><br><span class="line">                   for (h = b; b - i + n &lt; h; h--)</span><br><span class="line">                       delete g[h - 1]</span><br><span class="line">               &#125; else if (i &lt; n)</span><br><span class="line">                   for (h = b - i; v &lt; h; h--)</span><br><span class="line">                       m = h + n - 1,</span><br><span class="line">                       (p = h + i - 1)in g ? g[m] = g[p] : delete g[m];</span><br><span class="line">               for (h = 0; h &lt; n; h++)</span><br><span class="line">                   g[h + v] = arguments[h + 2];</span><br><span class="line">               return g.length = b - i + n,</span><br><span class="line">               r</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;,</span><br><span class="line">   3710: function(e, t, n) &#123;</span><br><span class="line">       var i = n(1702)</span><br><span class="line">         , r = n(1320)</span><br><span class="line">         , a = Date.prototype</span><br><span class="line">         , s = &quot;Invalid Date&quot;</span><br><span class="line">         , n = &quot;toString&quot;</span><br><span class="line">         , o = i(a[n])</span><br><span class="line">         , c = i(a.getTime);</span><br><span class="line">       String(new Date(NaN)) != s &amp;&amp; r(a, n, function() &#123;</span><br><span class="line">           var e = c(this);</span><br><span class="line">           return e == e ? o(this) : s</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;,</span><br><span class="line">   1539: function(e, t, n) &#123;</span><br><span class="line">       var i = n(1694)</span><br><span class="line">         , r = n(1320)</span><br><span class="line">         , n = n(288);</span><br><span class="line">       i || r(Object.prototype, &quot;toString&quot;, n, &#123;</span><br><span class="line">           unsafe: !0</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;,</span><br><span class="line">   1058: function(e, t, n) &#123;</span><br><span class="line">       var i = n(2109)</span><br><span class="line">         , n = n(3009);</span><br><span class="line">       i(&#123;</span><br><span class="line">           global: !0,</span><br><span class="line">           forced: parseInt != n</span><br><span class="line">       &#125;, &#123;</span><br><span class="line">           parseInt: n</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;,</span><br><span class="line">   9714: function(e, t, n) &#123;</span><br><span class="line">       &quot;use strict&quot;;</span><br><span class="line">       var i = n(1702)</span><br><span class="line">         , r = n(6530).PROPER</span><br><span class="line">         , a = n(1320)</span><br><span class="line">         , s = n(9670)</span><br><span class="line">         , o = n(7976)</span><br><span class="line">         , c = n(1340)</span><br><span class="line">         , u = n(7293)</span><br><span class="line">         , l = n(7066)</span><br><span class="line">         , n = &quot;toString&quot;</span><br><span class="line">         , d = RegExp.prototype</span><br><span class="line">         , _ = d[n]</span><br><span class="line">         , f = i(l)</span><br><span class="line">         , u = u(function() &#123;</span><br><span class="line">           return &quot;/a/b&quot; != _.call(&#123;</span><br><span class="line">               source: &quot;a&quot;,</span><br><span class="line">               flags: &quot;b&quot;</span><br><span class="line">           &#125;)</span><br><span class="line">       &#125;)</span><br><span class="line">         , r = r &amp;&amp; _.name != n;</span><br><span class="line">       (u || r) &amp;&amp; a(RegExp.prototype, n, function() &#123;</span><br><span class="line">           var e = s(this)</span><br><span class="line">             , t = c(e.source)</span><br><span class="line">             , n = e.flags;</span><br><span class="line">           return &quot;/&quot; + t + &quot;/&quot; + c(void 0 !== n || !o(d, e) || &quot;flags&quot;in d ? n : f(e))</span><br><span class="line">       &#125;, &#123;</span><br><span class="line">           unsafe: !0</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;,</span><br><span class="line">   9841: function(e, t, n) &#123;</span><br><span class="line">       &quot;use strict&quot;;</span><br><span class="line">       var i = n(2109)</span><br><span class="line">         , r = n(8710).codeAt;</span><br><span class="line">       i(&#123;</span><br><span class="line">           target: &quot;String&quot;,</span><br><span class="line">           proto: !0</span><br><span class="line">       &#125;, &#123;</span><br><span class="line">           codePointAt: function(e) &#123;</span><br><span class="line">               return r(this, e)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;,</span><br><span class="line">   4953: function(e, t, n) &#123;</span><br><span class="line">       var i = n(2109)</span><br><span class="line">         , r = n(7854)</span><br><span class="line">         , a = n(1702)</span><br><span class="line">         , s = n(1400)</span><br><span class="line">         , o = r.RangeError</span><br><span class="line">         , c = String.fromCharCode</span><br><span class="line">         , r = String.fromCodePoint</span><br><span class="line">         , u = a([].join);</span><br><span class="line">       i(&#123;</span><br><span class="line">           target: &quot;String&quot;,</span><br><span class="line">           stat: !0,</span><br><span class="line">           forced: !!r &amp;&amp; 1 != r.length</span><br><span class="line">       &#125;, &#123;</span><br><span class="line">           fromCodePoint: function(e) &#123;</span><br><span class="line">               for (var t, n = [], i = arguments.length, r = 0; r &lt; i; ) &#123;</span><br><span class="line">                   if (t = +arguments[r++],</span><br><span class="line">                   s(t, 1114111) !== t)</span><br><span class="line">                       throw o(t + &quot; is not a valid code point&quot;);</span><br><span class="line">                   n[r] = t &lt; 65536 ? c(t) : c(55296 + ((t -= 65536) &gt;&gt; 10), t % 1024 + 56320)</span><br><span class="line">               &#125;</span><br><span class="line">               return u(n, &quot;&quot;)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>④编写加密函数</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> pwd = <span class="string">&#x27;&#123;&quot;un&quot;:&quot;admin123@163.com&quot;,&quot;pw&quot;:&quot;ffhnKr8vA0EIEEclcRR6Ik8sDkEkjcvalofxRMQcS+ADdxyWoPpZFE6pehucjf/+0F5MliRjC51VMPUkGK/ceLj5fTlhNj34pHSfnU7zMd35XwSaPax/ucpNWpStm4tb0gyl+rb0ulEzQn7Tk4FR1hCUcE5kyAjo52567M+Eb8Q=&quot;,&quot;pd&quot;:&quot;mail163&quot;,&quot;l&quot;:0,&quot;d&quot;:30,&quot;t&quot;:1695908789441,&quot;pkid&quot;:&quot;CvViHzl&quot;,&quot;domains&quot;:&quot;163.com&quot;,&quot;tk&quot;:&quot;8753c188d3bbad4996c4cf699e3beef5&quot;,&quot;pwdKeyUp&quot;:1,&quot;channel&quot;:0,&quot;topURL&quot;:&quot;https://smart.mail.163.com/login.htm&quot;,&quot;rtid&quot;:&quot;RXuDHOFWWNPiiotxQy3UqrnZvRh7yrSM&quot;&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> _sm4pubkey = <span class="string">&#x27;BC60B8B9E4FFEFFA219E5AD77F11F9E2&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = <span class="title function_">_e</span>(<span class="string">&#x27;9579&#x27;</span>); <span class="comment">//定义导出函数，将加密模块导出为全局变量p</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">enc</span>(<span class="params">pwd</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> p.<span class="title function_">encrypt</span>(pwd, _sm4pubkey)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="（3）完整代码测试"><a href="#（3）完整代码测试" class="headerlink" title="（3）完整代码测试"></a>（3）完整代码测试</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var _e</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">!function(t) &#123;</span><br><span class="line">        function e(i) &#123;</span><br><span class="line">            n = &#123;&#125;</span><br><span class="line">            //console.log(i)</span><br><span class="line">            var r = n[i];</span><br><span class="line">            if (void 0 !== r) return r.exports;</span><br><span class="line">            r = n[i] = &#123;</span><br><span class="line">                exports: &#123;&#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            return t[i](r, r.exports, e),</span><br><span class="line">            r.exports</span><br><span class="line">        &#125;</span><br><span class="line">        _e = e</span><br><span class="line">    &#125;(&#123;</span><br><span class="line">        7228: function(e) &#123;</span><br><span class="line">            e.exports = function(e, t) &#123;</span><br><span class="line">                (null == t || t &gt; e.length) &amp;&amp; (t = e.length);</span><br><span class="line">                for (var n = 0, i = new Array(t); n &lt; t; n++)</span><br><span class="line">                i[n] = e[n];</span><br><span class="line">                return i</span><br><span class="line">            &#125;,</span><br><span class="line">            e.exports[&quot;default&quot;] = e.exports,</span><br><span class="line">            e.exports.__esModule = !0</span><br><span class="line">        &#125;,</span><br><span class="line">        3646: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7228);</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                if (Array.isArray(e)) return i(e)</span><br><span class="line">            &#125;,</span><br><span class="line">            e.exports[&quot;default&quot;] = e.exports,</span><br><span class="line">            e.exports.__esModule = !0</span><br><span class="line">        &#125;,</span><br><span class="line">        6860: function(e) &#123;</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                if (&quot;undefined&quot; != typeof Symbol &amp;&amp; null != e[Symbol.iterator] || null != e[&quot;@@iterator&quot;]) return Array.from(e)</span><br><span class="line">            &#125;,</span><br><span class="line">            e.exports[&quot;default&quot;] = e.exports,</span><br><span class="line">            e.exports.__esModule = !0</span><br><span class="line">        &#125;,</span><br><span class="line">        8206: function(e) &#123;</span><br><span class="line">            e.exports = function() &#123;</span><br><span class="line">                throw new TypeError(&quot;Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            e.exports[&quot;default&quot;] = e.exports,</span><br><span class="line">            e.exports.__esModule = !0</span><br><span class="line">        &#125;,</span><br><span class="line">        319: function(e, t, n) &#123;</span><br><span class="line">            var i = n(3646),</span><br><span class="line">                r = n(6860),</span><br><span class="line">                a = n(379),</span><br><span class="line">                s = n(8206);</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                return i(e) || r(e) || a(e) || s()</span><br><span class="line">            &#125;,</span><br><span class="line">            e.exports[&quot;default&quot;] = e.exports,</span><br><span class="line">            e.exports.__esModule = !0</span><br><span class="line">        &#125;,</span><br><span class="line">        379: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7228);</span><br><span class="line">            e.exports = function(e, t) &#123;</span><br><span class="line">                if (e) &#123;</span><br><span class="line">                    if (&quot;string&quot; == typeof e) return i(e, t);</span><br><span class="line">                    var n = Object.prototype.toString.call(e).slice(8, -1);</span><br><span class="line">                    return &quot;Map&quot; === (n = &quot;Object&quot; === n &amp;&amp; e.constructor ? e.constructor.name : n) || &quot;Set&quot; === n ? Array.from(e) : &quot;Arguments&quot; === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? i(e, t) : void 0</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            e.exports[&quot;default&quot;] = e.exports,</span><br><span class="line">            e.exports.__esModule = !0</span><br><span class="line">        &#125;,</span><br><span class="line">        9579: function(e, t, n) &#123;</span><br><span class="line">            function i(e) &#123;</span><br><span class="line">                for (var t = [], n = 0, i = e.length; n &lt; i; n += 2)</span><br><span class="line">                t.push(parseInt(e.substr(n, 2), 16));</span><br><span class="line">                return t</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            function r(e, t) &#123;</span><br><span class="line">                return e &lt;&lt; t | e &gt;&gt;&gt; 32 - t</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            function a(e) &#123;</span><br><span class="line">                return (255 &amp; _[e &gt;&gt;&gt; 24 &amp; 255]) &lt;&lt; 24 | (255 &amp; _[e &gt;&gt;&gt; 16 &amp; 255]) &lt;&lt; 16 | (255 &amp; _[e &gt;&gt;&gt; 8 &amp; 255]) &lt;&lt; 8 | 255 &amp; _[255 &amp; e]</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            function s(e) &#123;</span><br><span class="line">                return e ^ r(e, 2) ^ r(e, 10) ^ r(e, 18) ^ r(e, 24)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            function o(e) &#123;</span><br><span class="line">                return e ^ r(e, 13) ^ r(e, 23)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            function c(e, t, n, r) &#123;</span><br><span class="line">                var c = 3 &lt; arguments.length &amp;&amp; void 0 !== r ? r : &#123;&#125;, _ = c.padding,</span><br><span class="line">                    h = void 0 === _ ? &quot;pkcs#5&quot; : _,</span><br><span class="line">                    p = c.mode,</span><br><span class="line">                    _ = c.iv,</span><br><span class="line">                    _ = void 0 === _ ? [] : _,</span><br><span class="line">                    c = c.output,</span><br><span class="line">                    c = void 0 === c ? &quot;string&quot; : c;</span><br><span class="line">                if (&quot;cbc&quot; === p &amp;&amp; 16 !== (_ = &quot;string&quot; == typeof _ ? i(_) : _).length) throw new Error(&quot;iv is invalid&quot;);</span><br><span class="line">                if (16 !== (t = &quot;string&quot; == typeof t ? i(t) : t).length) throw new Error(&quot;key is invalid&quot;);</span><br><span class="line">                if (e = (&quot;string&quot; == typeof e ? n !== l ? function(e) &#123;</span><br><span class="line">                    for (var t = [], n = 0, i = e.length; n &lt; i; n++) &#123;</span><br><span class="line">                        var r = e.codePointAt(n);</span><br><span class="line">                        if (r &lt;= 127) t.push(r);</span><br><span class="line">                        else if (r &lt;= 2047) t.push(192 | r &gt;&gt;&gt; 6),</span><br><span class="line">                        t.push(128 | 63 &amp; r);</span><br><span class="line">                        else if (r &lt;= 55295 || 57344 &lt;= r &amp;&amp; r &lt;= 65535) t.push(224 | r &gt;&gt;&gt; 12),</span><br><span class="line">                        t.push(128 | r &gt;&gt;&gt; 6 &amp; 63),</span><br><span class="line">                        t.push(128 | 63 &amp; r);</span><br><span class="line">                        else &#123;</span><br><span class="line">                            if (!(65536 &lt;= r &amp;&amp; r &lt;= 1114111)) throw t.push(r),</span><br><span class="line">                            new Error(&quot;input is not supported&quot;);</span><br><span class="line">                            n++,</span><br><span class="line">                            t.push(240 | r &gt;&gt;&gt; 18 &amp; 28),</span><br><span class="line">                            t.push(128 | r &gt;&gt;&gt; 12 &amp; 63),</span><br><span class="line">                            t.push(128 | r &gt;&gt;&gt; 6 &amp; 63),</span><br><span class="line">                            t.push(128 | 63 &amp; r)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    return t</span><br><span class="line">                &#125; : i : u)(e),</span><br><span class="line">                    &quot;pkcs#5&quot; === h &amp;&amp; n !== l) for (var m = d - e.length % d, g = 0; g &lt; m; g++)</span><br><span class="line">                e.push(m);</span><br><span class="line">                var b = new Array(32);</span><br><span class="line">                ! function(e, t, n) &#123;</span><br><span class="line">                    for (var i = new Array(4), r = new Array(4), s = 0; s &lt; 4; s++)</span><br><span class="line">                    r[0] = 255 &amp; e[0 + 4 * s],</span><br><span class="line">                    r[1] = 255 &amp; e[1 + 4 * s],</span><br><span class="line">                    r[2] = 255 &amp; e[2 + 4 * s],</span><br><span class="line">                    r[3] = 255 &amp; e[3 + 4 * s],</span><br><span class="line">                    i[s] = r[0] &lt;&lt; 24 | r[1] &lt;&lt; 16 | r[2] &lt;&lt; 8 | r[3];</span><br><span class="line">                    i[0] ^= 2746333894,</span><br><span class="line">                    i[1] ^= 1453994832,</span><br><span class="line">                    i[2] ^= 1736282519,</span><br><span class="line">                    i[3] ^= 2993693404;</span><br><span class="line">                    for (var c, u = 0; u &lt; 32; u += 4)</span><br><span class="line">                    c = i[1] ^ i[2] ^ i[3] ^ f[u + 0],</span><br><span class="line">                    t[u + 0] = i[0] ^= o(a(c)),</span><br><span class="line">                    c = i[2] ^ i[3] ^ i[0] ^ f[u + 1],</span><br><span class="line">                    t[u + 1] = i[1] ^= o(a(c)),</span><br><span class="line">                    c = i[3] ^ i[0] ^ i[1] ^ f[u + 2],</span><br><span class="line">                    t[u + 2] = i[2] ^= o(a(c)),</span><br><span class="line">                    c = i[0] ^ i[1] ^ i[2] ^ f[u + 3],</span><br><span class="line">                    t[u + 3] = i[3] ^= o(a(c));</span><br><span class="line">                    if (n === l) for (var d, _ = 0; _ &lt; 16; _++)</span><br><span class="line">                    d = t[_],</span><br><span class="line">                    t[_] = t[31 - _],</span><br><span class="line">                    t[31 - _] = d</span><br><span class="line">                &#125;(t, b, n);</span><br><span class="line">                for (var v = [], y = _, $ = e.length, w = 0; d &lt;= $;) &#123;</span><br><span class="line">                    var C = e.slice(w, w + 16),</span><br><span class="line">                        x = new Array(16);</span><br><span class="line">                    if (&quot;cbc&quot; === p) for (var T = 0; T &lt; d; T++)</span><br><span class="line">                    n !== l &amp;&amp; (C[T] ^= y[T]);</span><br><span class="line">                    ! function(e, t, n) &#123;</span><br><span class="line">                        for (var i = new Array(4), r = new Array(4), o = 0; o &lt; 4; o++)</span><br><span class="line">                        r[0] = 255 &amp; e[4 * o],</span><br><span class="line">                        r[1] = 255 &amp; e[4 * o + 1],</span><br><span class="line">                        r[2] = 255 &amp; e[4 * o + 2],</span><br><span class="line">                        r[3] = 255 &amp; e[4 * o + 3],</span><br><span class="line">                        i[o] = r[0] &lt;&lt; 24 | r[1] &lt;&lt; 16 | r[2] &lt;&lt; 8 | r[3];</span><br><span class="line">                        for (var c, u = 0; u &lt; 32; u += 4)</span><br><span class="line">                        c = i[1] ^ i[2] ^ i[3] ^ n[u + 0],</span><br><span class="line">                        i[0] ^= s(a(c)),</span><br><span class="line">                        c = i[2] ^ i[3] ^ i[0] ^ n[u + 1],</span><br><span class="line">                        i[1] ^= s(a(c)),</span><br><span class="line">                        c = i[3] ^ i[0] ^ i[1] ^ n[u + 2],</span><br><span class="line">                        i[2] ^= s(a(c)),</span><br><span class="line">                        c = i[0] ^ i[1] ^ i[2] ^ n[u + 3],</span><br><span class="line">                        i[3] ^= s(a(c));</span><br><span class="line">                        for (var l = 0; l &lt; 16; l += 4)</span><br><span class="line">                        t[l] = i[3 - l / 4] &gt;&gt;&gt; 24 &amp; 255,</span><br><span class="line">                        t[l + 1] = i[3 - l / 4] &gt;&gt;&gt; 16 &amp; 255,</span><br><span class="line">                        t[l + 2] = i[3 - l / 4] &gt;&gt;&gt; 8 &amp; 255,</span><br><span class="line">                        t[l + 3] = 255 &amp; i[3 - l / 4]</span><br><span class="line">                    &#125;(C, x, b);</span><br><span class="line">                    for (var k = 0; k &lt; d; k++) &quot;cbc&quot; === p &amp;&amp; n === l &amp;&amp; (x[k] ^= y[k]),</span><br><span class="line">                    v[w + k] = x[k];</span><br><span class="line">                    &quot;cbc&quot; === p &amp;&amp; (y = n !== l ? x : C),</span><br><span class="line">                    $ -= d,</span><br><span class="line">                    w += d</span><br><span class="line">                &#125;</span><br><span class="line">                return &quot;pkcs#5&quot; === h &amp;&amp; n === l &amp;&amp; (h = v[v.length - 1],</span><br><span class="line">                v.splice(v.length - h, h)),</span><br><span class="line">                    &quot;array&quot; !== c ? n !== l ? v.map(function(e) &#123;</span><br><span class="line">                    return 1 === (e = e.toString(16)).length ? &quot;0&quot; + e : e</span><br><span class="line">                &#125;).join(&quot;&quot;) : function(e) &#123;</span><br><span class="line">                    for (var t = [], n = 0, i = e.length; n &lt; i; n++)</span><br><span class="line">                    240 &lt;= e[n] &amp;&amp; e[n] &lt;= 247 ? (t.push(String.fromCodePoint(((7 &amp; e[n]) &lt;&lt; 18) + ((63 &amp; e[n + 1]) &lt;&lt; 12) + ((63 &amp; e[n + 2]) &lt;&lt; 6) + (63 &amp; e[n + 3]))),</span><br><span class="line">                    n += 3) : 224 &lt;= e[n] &amp;&amp; e[n] &lt;= 239 ? (t.push(String.fromCodePoint(((15 &amp; e[n]) &lt;&lt; 12) + ((63 &amp; e[n + 1]) &lt;&lt; 6) + (63 &amp; e[n + 2]))),</span><br><span class="line">                    n += 2) : 192 &lt;= e[n] &amp;&amp; e[n] &lt;= 223 ? (t.push(String.fromCodePoint(((31 &amp; e[n]) &lt;&lt; 6) + (63 &amp; e[n + 1]))),</span><br><span class="line">                    n++) : t.push(String.fromCodePoint(e[n]));</span><br><span class="line">                    return t.join(&quot;&quot;)</span><br><span class="line">                &#125;(v) : v</span><br><span class="line">            &#125;</span><br><span class="line">            var u = n(319);</span><br><span class="line">            n(1058),</span><br><span class="line">            n(9600),</span><br><span class="line">            n(1249),</span><br><span class="line">            n(3710),</span><br><span class="line">            n(1539),</span><br><span class="line">            n(9714),</span><br><span class="line">            n(9841),</span><br><span class="line">            n(4953),</span><br><span class="line">            n(7042),</span><br><span class="line">            n(561);</span><br><span class="line">            var l = 0,</span><br><span class="line">                d = 16,</span><br><span class="line">                _ = [214, 144, 233, 254, 204, 225, 61, 183, 22, 182, 20, 194, 40, 251, 44, 5, 43, 103, 154, 118, 42, 190, 4, 195, 170, 68, 19, 38, 73, 134, 6, 153, 156, 66, 80, 244, 145, 239, 152, 122, 51, 84, 11, 67, 237, 207, 172, 98, 228, 179, 28, 169, 201, 8, 232, 149, 128, 223, 148, 250, 117, 143, 63, 166, 71, 7, 167, 252, 243, 115, 23, 186, 131, 89, 60, 25, 230, 133, 79, 168, 104, 107, 129, 178, 113, 100, 218, 139, 248, 235, 15, 75, 112, 86, 157, 53, 30, 36, 14, 94, 99, 88, 209, 162, 37, 34, 124, 59, 1, 33, 120, 135, 212, 0, 70, 87, 159, 211, 39, 82, 76, 54, 2, 231, 160, 196, 200, 158, 234, 191, 138, 210, 64, 199, 56, 181, 163, 247, 242, 206, 249, 97, 21, 161, 224, 174, 93, 164, 155, 52, 26, 85, 173, 147, 50, 48, 245, 140, 177, 227, 29, 246, 226, 46, 130, 102, 202, 96, 192, 41, 35, 171, 13, 83, 78, 111, 213, 219, 55, 69, 222, 253, 142, 47, 3, 255, 106, 114, 109, 108, 91, 81, 141, 27, 175, 146, 187, 221, 188, 127, 17, 217, 92, 65, 31, 16, 90, 216, 10, 193, 49, 136, 165, 205, 123, 189, 45, 116, 208, 18, 184, 229, 180, 176, 137, 105, 151, 74, 12, 150, 119, 126, 101, 185, 241, 9, 197, 110, 198, 132, 24, 240, 125, 236, 58, 220, 77, 32, 121, 238, 95, 62, 215, 203, 57, 72],</span><br><span class="line">                f = [462357, 472066609, 943670861, 1415275113, 1886879365, 2358483617, 2830087869, 3301692121, 3773296373, 4228057617, 404694573, 876298825, 1347903077, 1819507329, 2291111581, 2762715833, 3234320085, 3705924337, 4177462797, 337322537, 808926789, 1280531041, 1752135293, 2223739545, 2695343797, 3166948049, 3638552301, 4110090761, 269950501, 741554753, 1213159005, 1684763257];</span><br><span class="line">            e.exports = &#123;</span><br><span class="line">                encrypt: function(e, t, n) &#123;</span><br><span class="line">                    return c(e, t, 1, n)</span><br><span class="line">                &#125;,</span><br><span class="line">                decrypt: function(e, t, n) &#123;</span><br><span class="line">                    return c(e, t, 0, n)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        9662: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = n(614),</span><br><span class="line">                a = n(6330),</span><br><span class="line">                s = i.TypeError;</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                if (r(e)) return e;</span><br><span class="line">                throw s(a(e) + &quot; is not a function&quot;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        9670: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = n(111),</span><br><span class="line">                a = i.String,</span><br><span class="line">                s = i.TypeError;</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                if (r(e)) return e;</span><br><span class="line">                throw s(a(e) + &quot; is not an object&quot;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        1318: function(e, t, n) &#123;</span><br><span class="line">            var i = n(5656),</span><br><span class="line">                r = n(1400),</span><br><span class="line">                a = n(6244),</span><br><span class="line">                n = function(e) &#123;</span><br><span class="line">                    return function(t, n, s) &#123;</span><br><span class="line">                        var o, c = i(t),</span><br><span class="line">                            u = a(c),</span><br><span class="line">                            l = r(s, u);</span><br><span class="line">                        if (e &amp;&amp; n != n) &#123;</span><br><span class="line">                            for (; l &lt; u;)</span><br><span class="line">                            if ((o = c[l++]) != o) return !0</span><br><span class="line">                        &#125; else for (; l &lt; u; l++)</span><br><span class="line">                        if ((e || l in c) &amp;&amp; c[l] === n) return e || l || 0;</span><br><span class="line">                        return !e &amp;&amp; -1</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;;</span><br><span class="line">            e.exports = &#123;</span><br><span class="line">                includes: n(!0),</span><br><span class="line">                indexOf: n(!1)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        2092: function(e, t, n) &#123;</span><br><span class="line">            var i = n(9974),</span><br><span class="line">                r = n(1702),</span><br><span class="line">                a = n(8361),</span><br><span class="line">                s = n(7908),</span><br><span class="line">                o = n(6244),</span><br><span class="line">                c = n(5417),</span><br><span class="line">                u = r([].push),</span><br><span class="line">                r = function(e) &#123;</span><br><span class="line">                    var t = 1 == e,</span><br><span class="line">                        n = 2 == e,</span><br><span class="line">                        r = 3 == e,</span><br><span class="line">                        l = 4 == e,</span><br><span class="line">                        d = 6 == e,</span><br><span class="line">                        _ = 7 == e,</span><br><span class="line">                        f = 5 == e || d;</span><br><span class="line">                    return function(h, p, m, g) &#123;</span><br><span class="line">                        for (var b, v, y = s(h), $ = a(y), w = i(p, m), C = o($), x = 0, g = g || c, T = t ? g(h, C) : n || _ ? g(h, 0) : void 0; x &lt; C; x++)</span><br><span class="line">                        if ((f || x in $) &amp;&amp; (v = w(b = $[x], x, y),</span><br><span class="line">                        e)) if (t) T[x] = v;</span><br><span class="line">                        else if (v) switch (e) &#123;</span><br><span class="line">                            case 3:</span><br><span class="line">                                return !0;</span><br><span class="line">                            case 5:</span><br><span class="line">                                return b;</span><br><span class="line">                            case 6:</span><br><span class="line">                                return x;</span><br><span class="line">                            case 2:</span><br><span class="line">                                u(T, b)</span><br><span class="line">                        &#125; else switch (e) &#123;</span><br><span class="line">                            case 4:</span><br><span class="line">                                return !1;</span><br><span class="line">                            case 7:</span><br><span class="line">                                u(T, b)</span><br><span class="line">                        &#125;</span><br><span class="line">                        return d ? -1 : r || l ? l : T</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;;</span><br><span class="line">            e.exports = &#123;</span><br><span class="line">                forEach: r(0),</span><br><span class="line">                map: r(1),</span><br><span class="line">                filter: r(2),</span><br><span class="line">                some: r(3),</span><br><span class="line">                every: r(4),</span><br><span class="line">                find: r(5),</span><br><span class="line">                findIndex: r(6),</span><br><span class="line">                filterReject: r(7)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        1194: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7293),</span><br><span class="line">                r = n(5112),</span><br><span class="line">                a = n(7392),</span><br><span class="line">                s = r(&quot;species&quot;);</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                return 51 &lt;= a || !i(function() &#123;</span><br><span class="line">                    var t = [];</span><br><span class="line">                    return (t.constructor = &#123;&#125;)[s] = function() &#123;</span><br><span class="line">                        return &#123;</span><br><span class="line">                            foo: 1</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    1 !== t[e](Boolean).foo</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        9341: function(e, t, n) &#123;</span><br><span class="line">            &quot;use strict&quot;;</span><br><span class="line">            var i = n(7293);</span><br><span class="line">            e.exports = function(e, t) &#123;</span><br><span class="line">                var n = [][e];</span><br><span class="line">                return !!n &amp;&amp; i(function() &#123;</span><br><span class="line">                    n.call(null, t || function() &#123;</span><br><span class="line">                        throw 1</span><br><span class="line">                    &#125;, 1)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        206: function(e, t, n) &#123;</span><br><span class="line">            n = n(1702);</span><br><span class="line">            e.exports = n([].slice)</span><br><span class="line">        &#125;,</span><br><span class="line">        7475: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = n(3157),</span><br><span class="line">                a = n(4411),</span><br><span class="line">                s = n(111),</span><br><span class="line">                o = n(5112)(&quot;species&quot;),</span><br><span class="line">                c = i.Array;</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                var t;</span><br><span class="line">                return r(e) &amp;&amp; (t = e.constructor, (a(t) &amp;&amp; (t === c || r(t.prototype)) || s(t) &amp;&amp; null === (t = t[o])) &amp;&amp; (t = void 0)),</span><br><span class="line">                void 0 === t ? c : t</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        5417: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7475);</span><br><span class="line">            e.exports = function(e, t) &#123;</span><br><span class="line">                return new(i(e))(0 === t ? 0 : t)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        4326: function(e, t, n) &#123;</span><br><span class="line">            var n = n(1702),</span><br><span class="line">                i = n(&#123;&#125;.toString),</span><br><span class="line">                r = n(&quot;&quot;.slice);</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                return r(i(e), 8, -1)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        648: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = n(1694),</span><br><span class="line">                a = n(614),</span><br><span class="line">                s = n(4326),</span><br><span class="line">                o = n(5112)(&quot;toStringTag&quot;),</span><br><span class="line">                c = i.Object,</span><br><span class="line">                u = &quot;Arguments&quot; == s(function() &#123;</span><br><span class="line">                    return arguments</span><br><span class="line">                &#125;());</span><br><span class="line">            e.exports = r ? s : function(e) &#123;</span><br><span class="line">                var t;</span><br><span class="line">                return void 0 === e ? &quot;Undefined&quot; : null === e ? &quot;Null&quot; : &quot;string&quot; == typeof(e = function(e, t) &#123;</span><br><span class="line">                    try &#123;</span><br><span class="line">                        return e[t]</span><br><span class="line">                    &#125; catch (n) &#123;&#125;</span><br><span class="line">                &#125;(t = c(e), o)) ? e : u ? s(t) : &quot;Object&quot; == (e = s(t)) &amp;&amp; a(t.callee) ? &quot;Arguments&quot; : e</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        9920: function(e, t, n) &#123;</span><br><span class="line">            var i = n(2597),</span><br><span class="line">                r = n(3887),</span><br><span class="line">                a = n(1236),</span><br><span class="line">                s = n(3070);</span><br><span class="line">            e.exports = function(e, t) &#123;</span><br><span class="line">                for (var n = r(t), o = s.f, c = a.f, u = 0; u &lt; n.length; u++) &#123;</span><br><span class="line">                    var l = n[u];</span><br><span class="line">                    i(e, l) || o(e, l, c(t, l))</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        8880: function(e, t, n) &#123;</span><br><span class="line">            var i = n(9781),</span><br><span class="line">                r = n(3070),</span><br><span class="line">                a = n(9114);</span><br><span class="line">            e.exports = i ? function(e, t, n) &#123;</span><br><span class="line">                return r.f(e, t, a(1, n))</span><br><span class="line">            &#125; : function(e, t, n) &#123;</span><br><span class="line">                return e[t] = n,</span><br><span class="line">                e</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        9114: function(e) &#123;</span><br><span class="line">            e.exports = function(e, t) &#123;</span><br><span class="line">                return &#123;</span><br><span class="line">                    enumerable: !(1 &amp; e),</span><br><span class="line">                    configurable: !(2 &amp; e),</span><br><span class="line">                    writable: !(4 &amp; e),</span><br><span class="line">                    value: t</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        6135: function(e, t, n) &#123;</span><br><span class="line">            &quot;use strict&quot;;</span><br><span class="line">            var i = n(4948),</span><br><span class="line">                r = n(3070),</span><br><span class="line">                a = n(9114);</span><br><span class="line">            e.exports = function(e, t, n) &#123;</span><br><span class="line">                t = i(t);</span><br><span class="line">                t in e ? r.f(e, t, a(0, n)) : e[t] = n</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        9781: function(e, t, n) &#123;</span><br><span class="line">            n = n(7293);</span><br><span class="line">            e.exports = !n(function() &#123;</span><br><span class="line">                return 7 != Object.defineProperty(&#123;&#125;, 1, &#123;</span><br><span class="line">                    get: function() &#123;</span><br><span class="line">                        return 7</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)[1]</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        317: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                n = n(111),</span><br><span class="line">                r = i.document,</span><br><span class="line">                a = n(r) &amp;&amp; n(r.createElement);</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                return a ? r.createElement(e) : &#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        8113: function(e, t, n) &#123;</span><br><span class="line">            n = n(5005);</span><br><span class="line">            e.exports = n(&quot;navigator&quot;, &quot;userAgent&quot;) || &quot;&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        7392: function(e, t, n) &#123;</span><br><span class="line">            var i, r, a = n(7854),</span><br><span class="line">                s = n(8113),</span><br><span class="line">                n = a.process,</span><br><span class="line">                a = a.Deno,</span><br><span class="line">                a = n &amp;&amp; n.versions || a &amp;&amp; a.version,</span><br><span class="line">                a = a &amp;&amp; a.v8;</span><br><span class="line">            !(r = a ? 0 &lt; (i = a.split(&quot;.&quot;))[0] &amp;&amp; i[0] &lt; 4 ? 1 : +(i[0] + i[1]) : r) &amp;&amp; s &amp;&amp; (!(i = s.match(/Edge\/(\d+)/)) || 74 &lt;= i[1]) &amp;&amp; (i = s.match(/Chrome\/(\d+)/)) &amp;&amp; (r = +i[1]),</span><br><span class="line">            e.exports = r</span><br><span class="line">        &#125;,</span><br><span class="line">        748: function(e) &#123;</span><br><span class="line">            e.exports = [&quot;constructor&quot;, &quot;hasOwnProperty&quot;, &quot;isPrototypeOf&quot;, &quot;propertyIsEnumerable&quot;, &quot;toLocaleString&quot;, &quot;toString&quot;, &quot;valueOf&quot;]</span><br><span class="line">        &#125;,</span><br><span class="line">        2109: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = n(1236).f,</span><br><span class="line">                a = n(8880),</span><br><span class="line">                s = n(1320),</span><br><span class="line">                o = n(3505),</span><br><span class="line">                c = n(9920),</span><br><span class="line">                u = n(4705);</span><br><span class="line">            e.exports = function(e, t) &#123;</span><br><span class="line">                var n, l, d, _ = e.target,</span><br><span class="line">                    f = e.global,</span><br><span class="line">                    h = e.stat,</span><br><span class="line">                    p = f ? i : h ? i[_] || o(_, &#123;&#125;) : (i[_] || &#123;&#125;).prototype;</span><br><span class="line">                if (p) for (n in t) &#123;</span><br><span class="line">                    if (l = t[n],</span><br><span class="line">                    d = e.noTargetGet ? (d = r(p, n)) &amp;&amp; d.value : p[n], !u(f ? n : _ + (h ? &quot;.&quot; : &quot;#&quot;) + n, e.forced) &amp;&amp; void 0 !== d) &#123;</span><br><span class="line">                        if (typeof l == typeof d) continue;</span><br><span class="line">                        c(l, d)</span><br><span class="line">                    &#125;</span><br><span class="line">                    (e.sham || d &amp;&amp; d.sham) &amp;&amp; a(l, &quot;sham&quot;, !0),</span><br><span class="line">                    s(p, n, l, e)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        7293: function(e) &#123;</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    return !!e()</span><br><span class="line">                &#125; catch (t) &#123;</span><br><span class="line">                    return !0</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        9974: function(e, t, n) &#123;</span><br><span class="line">            var i = n(1702),</span><br><span class="line">                r = n(9662),</span><br><span class="line">                a = i(i.bind);</span><br><span class="line">            e.exports = function(e, t) &#123;</span><br><span class="line">                return r(e),</span><br><span class="line">                void 0 === t ? e : a ? a(e, t) : function() &#123;</span><br><span class="line">                    return e.apply(t, arguments)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        6916: function(e) &#123;</span><br><span class="line">            var t = Function.prototype.call;</span><br><span class="line">            e.exports = t.bind ? t.bind(t) : function() &#123;</span><br><span class="line">                return t.apply(t, arguments)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        6530: function(e, t, n) &#123;</span><br><span class="line">            var i = n(9781),</span><br><span class="line">                r = n(2597),</span><br><span class="line">                a = Function.prototype,</span><br><span class="line">                s = i &amp;&amp; Object.getOwnPropertyDescriptor,</span><br><span class="line">                n = r(a, &quot;name&quot;),</span><br><span class="line">                r = n &amp;&amp; &quot;something&quot; === function() &#123;&#125;.name,</span><br><span class="line">                s = n &amp;&amp; (!i || s(a, &quot;name&quot;).configurable);</span><br><span class="line">            e.exports = &#123;</span><br><span class="line">                EXISTS: n,</span><br><span class="line">                PROPER: r,</span><br><span class="line">                CONFIGURABLE: s</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        1702: function(e) &#123;</span><br><span class="line">            var t = Function.prototype,</span><br><span class="line">                n = t.bind,</span><br><span class="line">                i = t.call,</span><br><span class="line">                r = n &amp;&amp; n.bind(i);</span><br><span class="line">            e.exports = n ? function(e) &#123;</span><br><span class="line">                return e &amp;&amp; r(i, e)</span><br><span class="line">            &#125; : function(e) &#123;</span><br><span class="line">                return e &amp;&amp; function() &#123;</span><br><span class="line">                    return i.apply(e, arguments)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        5005: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = n(614);</span><br><span class="line">            e.exports = function(e, t) &#123;</span><br><span class="line">                return arguments.length &lt; 2 ? (n = i[e],</span><br><span class="line">                r(n) ? n : void 0) : i[e] &amp;&amp; i[e][t];</span><br><span class="line">                var n</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        8173: function(e, t, n) &#123;</span><br><span class="line">            var i = n(9662);</span><br><span class="line">            e.exports = function(e, t) &#123;</span><br><span class="line">                e = e[t];</span><br><span class="line">                return null == e ? void 0 : i(e)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        7854: function(e, t, n) &#123;</span><br><span class="line">            var i = function(e) &#123;</span><br><span class="line">                return e &amp;&amp; e.Math == Math &amp;&amp; e</span><br><span class="line">            &#125;;</span><br><span class="line">            e.exports = i(&quot;object&quot; == typeof globalThis &amp;&amp; globalThis) || i(&quot;object&quot; == typeof window &amp;&amp; window) || i(&quot;object&quot; == typeof self &amp;&amp; self) || i(&quot;object&quot; == typeof n.g &amp;&amp; n.g) || function() &#123;</span><br><span class="line">                return this</span><br><span class="line">            &#125;() || Function(&quot;return this&quot;)()</span><br><span class="line">        &#125;,</span><br><span class="line">        2597: function(e, t, n) &#123;</span><br><span class="line">            var i = n(1702),</span><br><span class="line">                r = n(7908),</span><br><span class="line">                a = i(&#123;&#125;.hasOwnProperty);</span><br><span class="line">            e.exports = Object.hasOwn || function(e, t) &#123;</span><br><span class="line">                return a(r(e), t)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        3501: function(e) &#123;</span><br><span class="line">            e.exports = &#123;&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        4664: function(e, t, n) &#123;</span><br><span class="line">            var i = n(9781),</span><br><span class="line">                r = n(7293),</span><br><span class="line">                a = n(317);</span><br><span class="line">            e.exports = !i &amp;&amp; !r(function() &#123;</span><br><span class="line">                return 7 != Object.defineProperty(a(&quot;div&quot;), &quot;a&quot;, &#123;</span><br><span class="line">                    get: function() &#123;</span><br><span class="line">                        return 7</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;).a</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        8361: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = n(1702),</span><br><span class="line">                a = n(7293),</span><br><span class="line">                s = n(4326),</span><br><span class="line">                o = i.Object,</span><br><span class="line">                c = r(&quot;&quot;.split);</span><br><span class="line">            e.exports = a(function() &#123;</span><br><span class="line">                return !o(&quot;z&quot;).propertyIsEnumerable(0)</span><br><span class="line">            &#125;) ? function(e) &#123;</span><br><span class="line">                return &quot;String&quot; == s(e) ? c(e, &quot;&quot;) : o(e)</span><br><span class="line">            &#125; : o</span><br><span class="line">        &#125;,</span><br><span class="line">        2788: function(e, t, n) &#123;</span><br><span class="line">            var i = n(1702),</span><br><span class="line">                r = n(614),</span><br><span class="line">                n = n(5465),</span><br><span class="line">                a = i(Function.toString);</span><br><span class="line">            r(n.inspectSource) || (n.inspectSource = function(e) &#123;</span><br><span class="line">                return a(e)</span><br><span class="line">            &#125;),</span><br><span class="line">            e.exports = n.inspectSource</span><br><span class="line">        &#125;,</span><br><span class="line">        9909: function(e, t, n) &#123;</span><br><span class="line">            var i, r, a, s, o, c, u, l, d = n(8536),</span><br><span class="line">                _ = n(7854),</span><br><span class="line">                f = n(1702),</span><br><span class="line">                h = n(111),</span><br><span class="line">                p = n(8880),</span><br><span class="line">                m = n(2597),</span><br><span class="line">                g = n(5465),</span><br><span class="line">                b = n(6200),</span><br><span class="line">                n = n(3501),</span><br><span class="line">                v = &quot;Object already initialized&quot;,</span><br><span class="line">                y = _.TypeError,</span><br><span class="line">                _ = _.WeakMap;</span><br><span class="line">            u = d || g.state ? (i = g.state || (g.state = new _),</span><br><span class="line">            r = f(i.get),</span><br><span class="line">            a = f(i.has),</span><br><span class="line">            s = f(i.set),</span><br><span class="line">            o = function(e, t) &#123;</span><br><span class="line">                if (a(i, e)) throw new y(v);</span><br><span class="line">                return t.facade = e,</span><br><span class="line">                s(i, e, t),</span><br><span class="line">                t</span><br><span class="line">            &#125;,</span><br><span class="line">            c = function(e) &#123;</span><br><span class="line">                return r(i, e) || &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line"></span><br><span class="line">            function(e) &#123;</span><br><span class="line">                return a(i, e)</span><br><span class="line">            &#125;) : (n[l = b(&quot;state&quot;)] = !0,</span><br><span class="line">            o = function(e, t) &#123;</span><br><span class="line">                if (m(e, l)) throw new y(v);</span><br><span class="line">                return t.facade = e,</span><br><span class="line">                p(e, l, t),</span><br><span class="line">                t</span><br><span class="line">            &#125;,</span><br><span class="line">            c = function(e) &#123;</span><br><span class="line">                return m(e, l) ? e[l] : &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line"></span><br><span class="line">            function(e) &#123;</span><br><span class="line">                return m(e, l)</span><br><span class="line">            &#125;),</span><br><span class="line">            e.exports = &#123;</span><br><span class="line">                set: o,</span><br><span class="line">                get: c,</span><br><span class="line">                has: u,</span><br><span class="line">                enforce: function(e) &#123;</span><br><span class="line">                    return u(e) ? c(e) : o(e, &#123;&#125;)</span><br><span class="line">                &#125;,</span><br><span class="line">                getterFor: function(e) &#123;</span><br><span class="line">                    return function(t) &#123;</span><br><span class="line">                        var n;</span><br><span class="line">                        if (!h(t) || (n = c(t)).type !== e) throw y(&quot;Incompatible receiver, &quot; + e + &quot; required&quot;);</span><br><span class="line">                        return n</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        3157: function(e, t, n) &#123;</span><br><span class="line">            var i = n(4326);</span><br><span class="line">            e.exports = Array.isArray || function(e) &#123;</span><br><span class="line">                return &quot;Array&quot; == i(e)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        614: function(e) &#123;</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                return &quot;function&quot; == typeof e</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        4411: function(e, t, n) &#123;</span><br><span class="line">            var i = n(1702),</span><br><span class="line">                r = n(7293),</span><br><span class="line">                a = n(614),</span><br><span class="line">                s = n(648),</span><br><span class="line">                o = n(5005),</span><br><span class="line">                c = n(2788),</span><br><span class="line">                u = function() &#123;&#125;, l = [],</span><br><span class="line">                d = o(&quot;Reflect&quot;, &quot;construct&quot;),</span><br><span class="line">                _ = /^\s*(?:class|function)\b/,</span><br><span class="line">                f = i(_.exec),</span><br><span class="line">                h = !_.exec(u),</span><br><span class="line">                p = function(e) &#123;</span><br><span class="line">                    if (!a(e)) return !1;</span><br><span class="line">                    try &#123;</span><br><span class="line">                        return d(u, l, e), !0</span><br><span class="line">                    &#125; catch (t) &#123;</span><br><span class="line">                        return !1</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;;</span><br><span class="line">            e.exports = !d || r(function() &#123;</span><br><span class="line">                var e;</span><br><span class="line">                return p(p.call) || !p(Object) || !p(function() &#123;</span><br><span class="line">                    e = !0</span><br><span class="line">                &#125;) || e</span><br><span class="line">            &#125;) ? function(e) &#123;</span><br><span class="line">                if (!a(e)) return !1;</span><br><span class="line">                switch (s(e)) &#123;</span><br><span class="line">                    case &quot;AsyncFunction&quot;:</span><br><span class="line">                    case &quot;GeneratorFunction&quot;:</span><br><span class="line">                    case &quot;AsyncGeneratorFunction&quot;:</span><br><span class="line">                        return !1</span><br><span class="line">                &#125;</span><br><span class="line">                return h || !! f(_, c(e))</span><br><span class="line">            &#125; : p</span><br><span class="line">        &#125;,</span><br><span class="line">        4705: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7293),</span><br><span class="line">                r = n(614),</span><br><span class="line">                a = /#|\.prototype\./,</span><br><span class="line">                n = function(e, t) &#123;</span><br><span class="line">                    e = o[s(e)];</span><br><span class="line">                    return e == u || e != c &amp;&amp; (r(t) ? i(t) : !! t)</span><br><span class="line">                &#125;, s = n.normalize = function(e) &#123;</span><br><span class="line">                    return String(e).replace(a, &quot;.&quot;).toLowerCase()</span><br><span class="line">                &#125;, o = n.data = &#123;&#125;, c = n.NATIVE = &quot;N&quot;,</span><br><span class="line">                u = n.POLYFILL = &quot;P&quot;;</span><br><span class="line">            e.exports = n</span><br><span class="line">        &#125;,</span><br><span class="line">        111: function(e, t, n) &#123;</span><br><span class="line">            var i = n(614);</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                return &quot;object&quot; == typeof e ? null !== e : i(e)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        1913: function(e) &#123;</span><br><span class="line">            e.exports = !1</span><br><span class="line">        &#125;,</span><br><span class="line">        2190: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = n(5005),</span><br><span class="line">                a = n(614),</span><br><span class="line">                s = n(7976),</span><br><span class="line">                n = n(3307),</span><br><span class="line">                o = i.Object;</span><br><span class="line">            e.exports = n ? function(e) &#123;</span><br><span class="line">                return &quot;symbol&quot; == typeof e</span><br><span class="line">            &#125; : function(e) &#123;</span><br><span class="line">                var t = r(&quot;Symbol&quot;);</span><br><span class="line">                return a(t) &amp;&amp; s(t.prototype, o(e))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        6244: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7466);</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                return i(e.length)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        133: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7392),</span><br><span class="line">                n = n(7293);</span><br><span class="line">            e.exports = !! Object.getOwnPropertySymbols &amp;&amp; !n(function() &#123;</span><br><span class="line">                var e = Symbol();</span><br><span class="line">                return !String(e) || !(Object(e) instanceof Symbol) || !Symbol.sham &amp;&amp; i &amp;&amp; i &lt; 41</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        8536: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = n(614),</span><br><span class="line">                n = n(2788),</span><br><span class="line">                i = i.WeakMap;</span><br><span class="line">            e.exports = r(i) &amp;&amp; /native code/.test(n(i))</span><br><span class="line">        &#125;,</span><br><span class="line">        3009: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = n(7293),</span><br><span class="line">                a = n(1702),</span><br><span class="line">                s = n(1340),</span><br><span class="line">                o = n(3111).trim,</span><br><span class="line">                n = n(1361),</span><br><span class="line">                c = i.parseInt,</span><br><span class="line">                i = i.Symbol,</span><br><span class="line">                u = i &amp;&amp; i.iterator,</span><br><span class="line">                l = /^[+-]?0x/i,</span><br><span class="line">                d = a(l.exec),</span><br><span class="line">                r = 8 !== c(n + &quot;08&quot;) || 22 !== c(n + &quot;0x16&quot;) || u &amp;&amp; !r(function() &#123;</span><br><span class="line">                    c(Object(u))</span><br><span class="line">                &#125;);</span><br><span class="line">            e.exports = r ? function _(e, t) &#123;</span><br><span class="line">                e = o(s(e));</span><br><span class="line">                return c(e, t &gt;&gt;&gt; 0 || (d(l, e) ? 16 : 10))</span><br><span class="line">            &#125; : c</span><br><span class="line">        &#125;,</span><br><span class="line">        3070: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = n(9781),</span><br><span class="line">                a = n(4664),</span><br><span class="line">                s = n(9670),</span><br><span class="line">                o = n(4948),</span><br><span class="line">                c = i.TypeError,</span><br><span class="line">                u = Object.defineProperty;</span><br><span class="line">            t.f = r ? u : function(e, t, n) &#123;</span><br><span class="line">                if (s(e),</span><br><span class="line">                t = o(t),</span><br><span class="line">                s(n),</span><br><span class="line">                a) try &#123;</span><br><span class="line">                    return u(e, t, n)</span><br><span class="line">                &#125; catch (i) &#123;&#125;</span><br><span class="line">                if (&quot;get&quot; in n || &quot;set&quot; in n) throw c(&quot;Accessors not supported&quot;);</span><br><span class="line">                return &quot;value&quot; in n &amp;&amp; (e[t] = n.value),</span><br><span class="line">                e</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        1236: function(e, t, n) &#123;</span><br><span class="line">            var i = n(9781),</span><br><span class="line">                r = n(6916),</span><br><span class="line">                a = n(5296),</span><br><span class="line">                s = n(9114),</span><br><span class="line">                o = n(5656),</span><br><span class="line">                c = n(4948),</span><br><span class="line">                u = n(2597),</span><br><span class="line">                l = n(4664),</span><br><span class="line">                d = Object.getOwnPropertyDescriptor;</span><br><span class="line">            t.f = i ? d : function(e, t) &#123;</span><br><span class="line">                if (e = o(e),</span><br><span class="line">                t = c(t),</span><br><span class="line">                l) try &#123;</span><br><span class="line">                    return d(e, t)</span><br><span class="line">                &#125; catch (n) &#123;&#125;</span><br><span class="line">                if (u(e, t)) return s(!r(a.f, e, t), e[t])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        8006: function(e, t, n) &#123;</span><br><span class="line">            var i = n(6324),</span><br><span class="line">                r = n(748).concat(&quot;length&quot;, &quot;prototype&quot;);</span><br><span class="line">            t.f = Object.getOwnPropertyNames || function(e) &#123;</span><br><span class="line">                return i(e, r)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        5181: function(e, t) &#123;</span><br><span class="line">            t.f = Object.getOwnPropertySymbols</span><br><span class="line">        &#125;,</span><br><span class="line">        7976: function(e, t, n) &#123;</span><br><span class="line">            n = n(1702);</span><br><span class="line">            e.exports = n(&#123;&#125;.isPrototypeOf)</span><br><span class="line">        &#125;,</span><br><span class="line">        6324: function(e, t, n) &#123;</span><br><span class="line">            var i = n(1702),</span><br><span class="line">                r = n(2597),</span><br><span class="line">                a = n(5656),</span><br><span class="line">                s = n(1318).indexOf,</span><br><span class="line">                o = n(3501),</span><br><span class="line">                c = i([].push);</span><br><span class="line">            e.exports = function(e, t) &#123;</span><br><span class="line">                var n, i = a(e),</span><br><span class="line">                    u = 0,</span><br><span class="line">                    l = [];</span><br><span class="line">                for (n in i)!r(o, n) &amp;&amp; r(i, n) &amp;&amp; c(l, n);</span><br><span class="line">                for (; t.length &gt; u;)</span><br><span class="line">                r(i, n = t[u++]) &amp;&amp; (~s(l, n) || c(l, n));</span><br><span class="line">                return l</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        5296: function(e, t) &#123;</span><br><span class="line">            &quot;use strict&quot;;</span><br><span class="line">            var n = &#123;&#125;.propertyIsEnumerable,</span><br><span class="line">                i = Object.getOwnPropertyDescriptor,</span><br><span class="line">                r = i &amp;&amp; !n.call(&#123;</span><br><span class="line">                    1: 2</span><br><span class="line">                &#125;, 1);</span><br><span class="line">            t.f = r ? function(e) &#123;</span><br><span class="line">                e = i(this, e);</span><br><span class="line">                return !!e &amp;&amp; e.enumerable</span><br><span class="line">            &#125; : n</span><br><span class="line">        &#125;,</span><br><span class="line">        288: function(e, t, n) &#123;</span><br><span class="line">            &quot;use strict&quot;;</span><br><span class="line">            var i = n(1694),</span><br><span class="line">                r = n(648);</span><br><span class="line">            e.exports = i ? &#123;&#125;.toString : function() &#123;</span><br><span class="line">                return &quot;[object &quot; + r(this) + &quot;]&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        2140: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = n(6916),</span><br><span class="line">                a = n(614),</span><br><span class="line">                s = n(111),</span><br><span class="line">                o = i.TypeError;</span><br><span class="line">            e.exports = function(e, t) &#123;</span><br><span class="line">                var n, i;</span><br><span class="line">                if (&quot;string&quot; === t &amp;&amp; a(n = e.toString) &amp;&amp; !s(i = r(n, e))) return i;</span><br><span class="line">                if (a(n = e.valueOf) &amp;&amp; !s(i = r(n, e))) return i;</span><br><span class="line">                if (&quot;string&quot; !== t &amp;&amp; a(n = e.toString) &amp;&amp; !s(i = r(n, e))) return i;</span><br><span class="line">                throw o(&quot;Can&#x27;t convert object to primitive value&quot;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        3887: function(e, t, n) &#123;</span><br><span class="line">            var i = n(5005),</span><br><span class="line">                r = n(1702),</span><br><span class="line">                a = n(8006),</span><br><span class="line">                s = n(5181),</span><br><span class="line">                o = n(9670),</span><br><span class="line">                c = r([].concat);</span><br><span class="line">            e.exports = i(&quot;Reflect&quot;, &quot;ownKeys&quot;) || function(e) &#123;</span><br><span class="line">                var t = a.f(o(e)),</span><br><span class="line">                    n = s.f;</span><br><span class="line">                return n ? c(t, n(e)) : t</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        1320: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = n(614),</span><br><span class="line">                a = n(2597),</span><br><span class="line">                s = n(8880),</span><br><span class="line">                o = n(3505),</span><br><span class="line">                c = n(2788),</span><br><span class="line">                u = n(9909),</span><br><span class="line">                l = n(6530).CONFIGURABLE,</span><br><span class="line">                d = u.get,</span><br><span class="line">                _ = u.enforce,</span><br><span class="line">                f = String(String).split(&quot;String&quot;);</span><br><span class="line">            (e.exports = function(e, t, n, c) &#123;</span><br><span class="line">                var u = !! c &amp;&amp; !! c.unsafe,</span><br><span class="line">                    d = !! c &amp;&amp; !! c.enumerable,</span><br><span class="line">                    h = !! c &amp;&amp; !! c.noTargetGet,</span><br><span class="line">                    p = c &amp;&amp; void 0 !== c.name ? c.name : t;</span><br><span class="line">                r(n) &amp;&amp; (&quot;Symbol(&quot; === String(p).slice(0, 7) &amp;&amp; (p = &quot;[&quot; + String(p).replace(/^Symbol\(([^)]*)\)/, &quot;$1&quot;) + &quot;]&quot;), (!a(n, &quot;name&quot;) || l &amp;&amp; n.name !== p) &amp;&amp; s(n, &quot;name&quot;, p), (c = _(n)).source || (c.source = f.join(&quot;string&quot; == typeof p ? p : &quot;&quot;))),</span><br><span class="line">                e !== i ? (u ? !h &amp;&amp; e[t] &amp;&amp; (d = !0) : delete e[t],</span><br><span class="line">                d ? e[t] = n : s(e, t, n)) : d ? e[t] = n : o(t, n)</span><br><span class="line">            &#125;)(Function.prototype, &quot;toString&quot;, function() &#123;</span><br><span class="line">                return r(this) &amp;&amp; d(this).source || c(this)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        7066: function(e, t, n) &#123;</span><br><span class="line">            &quot;use strict&quot;;</span><br><span class="line">            var i = n(9670);</span><br><span class="line">            e.exports = function() &#123;</span><br><span class="line">                var e = i(this),</span><br><span class="line">                    t = &quot;&quot;;</span><br><span class="line">                return e.global &amp;&amp; (t += &quot;g&quot;),</span><br><span class="line">                e.ignoreCase &amp;&amp; (t += &quot;i&quot;),</span><br><span class="line">                e.multiline &amp;&amp; (t += &quot;m&quot;),</span><br><span class="line">                e.dotAll &amp;&amp; (t += &quot;s&quot;),</span><br><span class="line">                e.unicode &amp;&amp; (t += &quot;u&quot;),</span><br><span class="line">                e.sticky &amp;&amp; (t += &quot;y&quot;),</span><br><span class="line">                t</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        4488: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854).TypeError;</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                if (void 0 == e) throw i(&quot;Can&#x27;t call method on &quot; + e);</span><br><span class="line">                return e</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        3505: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = Object.defineProperty;</span><br><span class="line">            e.exports = function(e, t) &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    r(i, e, &#123;</span><br><span class="line">                        value: t,</span><br><span class="line">                        configurable: !0,</span><br><span class="line">                        writable: !0</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; catch (n) &#123;</span><br><span class="line">                    i[e] = t</span><br><span class="line">                &#125;</span><br><span class="line">                return t</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        6200: function(e, t, n) &#123;</span><br><span class="line">            var i = n(2309),</span><br><span class="line">                r = n(9711),</span><br><span class="line">                a = i(&quot;keys&quot;);</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                return a[e] || (a[e] = r(e))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        5465: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = n(3505),</span><br><span class="line">                n = &quot;__core-js_shared__&quot;,</span><br><span class="line">                r = i[n] || r(n, &#123;&#125;);</span><br><span class="line">            e.exports = r</span><br><span class="line">        &#125;,</span><br><span class="line">        2309: function(e, t, n) &#123;</span><br><span class="line">            var i = n(1913),</span><br><span class="line">                r = n(5465);</span><br><span class="line">            (e.exports = function(e, t) &#123;</span><br><span class="line">                return r[e] || (r[e] = void 0 !== t ? t : &#123;&#125;)</span><br><span class="line">            &#125;)(&quot;versions&quot;, []).push(&#123;</span><br><span class="line">                version: &quot;3.19.0&quot;,</span><br><span class="line">                mode: i ? &quot;pure&quot; : &quot;global&quot;,</span><br><span class="line">                copyright: &quot;? 2021 Denis Pushkarev (zloirock.ru)&quot;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        8710: function(e, t, n) &#123;</span><br><span class="line">            var i = n(1702),</span><br><span class="line">                r = n(9303),</span><br><span class="line">                a = n(1340),</span><br><span class="line">                s = n(4488),</span><br><span class="line">                o = i(&quot;&quot;.charAt),</span><br><span class="line">                c = i(&quot;&quot;.charCodeAt),</span><br><span class="line">                u = i(&quot;&quot;.slice),</span><br><span class="line">                i = function(e) &#123;</span><br><span class="line">                    return function(t, n) &#123;</span><br><span class="line">                        var i, l = a(s(t)),</span><br><span class="line">                            d = r(n),</span><br><span class="line">                            t = l.length;</span><br><span class="line">                        return d &lt; 0 || t &lt;= d ? e ? &quot;&quot; : void 0 : (n = c(l, d)) &lt; 55296 || 56319 &lt; n || d + 1 === t || (i = c(l, d + 1)) &lt; 56320 || 57343 &lt; i ? e ? o(l, d) : n : e ? u(l, d, d + 2) : i - 56320 + (n - 55296 &lt;&lt; 10) + 65536</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;;</span><br><span class="line">            e.exports = &#123;</span><br><span class="line">                codeAt: i(!1),</span><br><span class="line">                charAt: i(!0)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        3111: function(e, t, n) &#123;</span><br><span class="line">            var i = n(1702),</span><br><span class="line">                r = n(4488),</span><br><span class="line">                a = n(1340),</span><br><span class="line">                n = n(1361),</span><br><span class="line">                s = i(&quot;&quot;.replace),</span><br><span class="line">                n = &quot;[&quot; + n + &quot;]&quot;,</span><br><span class="line">                o = RegExp(&quot;^&quot; + n + n + &quot;*&quot;),</span><br><span class="line">                c = RegExp(n + n + &quot;*$&quot;),</span><br><span class="line">                n = function(e) &#123;</span><br><span class="line">                    return function(t) &#123;</span><br><span class="line">                        t = a(r(t));</span><br><span class="line">                        return 1 &amp; e &amp;&amp; (t = s(t, o, &quot;&quot;)),</span><br><span class="line">                        t = 2 &amp; e ? s(t, c, &quot;&quot;) : t</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;;</span><br><span class="line">            e.exports = &#123;</span><br><span class="line">                start: n(1),</span><br><span class="line">                end: n(2),</span><br><span class="line">                trim: n(3)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        1400: function(e, t, n) &#123;</span><br><span class="line">            var i = n(9303),</span><br><span class="line">                r = Math.max,</span><br><span class="line">                a = Math.min;</span><br><span class="line">            e.exports = function(e, t) &#123;</span><br><span class="line">                e = i(e);</span><br><span class="line">                return e &lt; 0 ? r(e + t, 0) : a(e, t)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        5656: function(e, t, n) &#123;</span><br><span class="line">            var i = n(8361),</span><br><span class="line">                r = n(4488);</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                return i(r(e))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        9303: function(e) &#123;</span><br><span class="line">            var t = Math.ceil,</span><br><span class="line">                n = Math.floor;</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                e = +e;</span><br><span class="line">                return e != e || 0 == e ? 0 : (0 &lt; e ? n : t)(e)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        7466: function(e, t, n) &#123;</span><br><span class="line">            var i = n(9303),</span><br><span class="line">                r = Math.min;</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                return 0 &lt; e ? r(i(e), 9007199254740991) : 0</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        7908: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = n(4488),</span><br><span class="line">                a = i.Object;</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                return a(r(e))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        7593: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = n(6916),</span><br><span class="line">                a = n(111),</span><br><span class="line">                s = n(2190),</span><br><span class="line">                o = n(8173),</span><br><span class="line">                c = n(2140),</span><br><span class="line">                n = n(5112),</span><br><span class="line">                u = i.TypeError,</span><br><span class="line">                l = n(&quot;toPrimitive&quot;);</span><br><span class="line">            e.exports = function(e, t) &#123;</span><br><span class="line">                if (!a(e) || s(e)) return e;</span><br><span class="line">                var n = o(e, l);</span><br><span class="line">                if (n) &#123;</span><br><span class="line">                    if (void 0 === t &amp;&amp; (t = &quot;default&quot;),</span><br><span class="line">                    n = r(n, e, t), !a(n) || s(n)) return n;</span><br><span class="line">                    throw u(&quot;Can&#x27;t convert object to primitive value&quot;)</span><br><span class="line">                &#125;</span><br><span class="line">                return void 0 === t &amp;&amp; (t = &quot;number&quot;),</span><br><span class="line">                c(e, t)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        4948: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7593),</span><br><span class="line">                r = n(2190);</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                e = i(e, &quot;string&quot;);</span><br><span class="line">                return r(e) ? e : e + &quot;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        1694: function(e, t, n) &#123;</span><br><span class="line">            var i = &#123;&#125;;</span><br><span class="line">            i[n(5112)(&quot;toStringTag&quot;)] = &quot;z&quot;,</span><br><span class="line">            e.exports = &quot;[object z]&quot; === String(i)</span><br><span class="line">        &#125;,</span><br><span class="line">        1340: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = n(648),</span><br><span class="line">                a = i.String;</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                if (&quot;Symbol&quot; === r(e)) throw TypeError(&quot;Cannot convert a Symbol value to a string&quot;);</span><br><span class="line">                return a(e)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        6330: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854).String;</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    return i(e)</span><br><span class="line">                &#125; catch (t) &#123;</span><br><span class="line">                    return &quot;Object&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        9711: function(e, t, n) &#123;</span><br><span class="line">            var n = n(1702),</span><br><span class="line">                i = 0,</span><br><span class="line">                r = Math.random(),</span><br><span class="line">                a = n(1..toString);</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                return &quot;Symbol(&quot; + (void 0 === e ? &quot;&quot; : e) + &quot;)_&quot; + a(++i + r, 36)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        3307: function(e, t, n) &#123;</span><br><span class="line">            n = n(133);</span><br><span class="line">            e.exports = n &amp;&amp; !Symbol.sham &amp;&amp; &quot;symbol&quot; == typeof Symbol.iterator</span><br><span class="line">        &#125;,</span><br><span class="line">        5112: function(e, t, n) &#123;</span><br><span class="line">            var i = n(7854),</span><br><span class="line">                r = n(2309),</span><br><span class="line">                a = n(2597),</span><br><span class="line">                s = n(9711),</span><br><span class="line">                o = n(133),</span><br><span class="line">                c = n(3307),</span><br><span class="line">                u = r(&quot;wks&quot;),</span><br><span class="line">                l = i.Symbol,</span><br><span class="line">                d = l &amp;&amp; l[&quot;for&quot;],</span><br><span class="line">                _ = c ? l : l &amp;&amp; l.withoutSetter || s;</span><br><span class="line">            e.exports = function(e) &#123;</span><br><span class="line">                var t;</span><br><span class="line">                return a(u, e) &amp;&amp; (o || &quot;string&quot; == typeof u[e]) || (t = &quot;Symbol.&quot; + e,</span><br><span class="line">                o &amp;&amp; a(l, e) ? u[e] = l[e] : u[e] = (c &amp;&amp; d ? d : _)(t)),</span><br><span class="line">                u[e]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        1361: function(e) &#123;</span><br><span class="line">            e.exports = &quot;\t\n\x0B\f\r ???????????????　\u2028\u2029\ufeff&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        9600: function(e, t, n) &#123;</span><br><span class="line">            &quot;use strict&quot;;</span><br><span class="line">            var i = n(2109),</span><br><span class="line">                r = n(1702),</span><br><span class="line">                a = n(8361),</span><br><span class="line">                s = n(5656),</span><br><span class="line">                n = n(9341),</span><br><span class="line">                o = r([].join),</span><br><span class="line">                a = a != Object,</span><br><span class="line">                n = n(&quot;join&quot;, &quot;,&quot;);</span><br><span class="line">            i(&#123;</span><br><span class="line">                target: &quot;Array&quot;,</span><br><span class="line">                proto: !0,</span><br><span class="line">                forced: a || !n</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                join: function(e) &#123;</span><br><span class="line">                    return o(s(this), void 0 === e ? &quot;,&quot; : e)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        1249: function(e, t, n) &#123;</span><br><span class="line">            &quot;use strict&quot;;</span><br><span class="line">            var i = n(2109),</span><br><span class="line">                r = n(2092).map;</span><br><span class="line">            i(&#123;</span><br><span class="line">                target: &quot;Array&quot;,</span><br><span class="line">                proto: !0,</span><br><span class="line">                forced: !n(1194)(&quot;map&quot;)</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                map: function(e) &#123;</span><br><span class="line">                    return r(this, e, 1 &lt; arguments.length ? arguments[1] : void 0)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        7042: function(e, t, n) &#123;</span><br><span class="line">            &quot;use strict&quot;;</span><br><span class="line">            var i = n(2109),</span><br><span class="line">                r = n(7854),</span><br><span class="line">                a = n(3157),</span><br><span class="line">                s = n(4411),</span><br><span class="line">                o = n(111),</span><br><span class="line">                c = n(1400),</span><br><span class="line">                u = n(6244),</span><br><span class="line">                l = n(5656),</span><br><span class="line">                d = n(6135),</span><br><span class="line">                _ = n(5112),</span><br><span class="line">                f = n(1194),</span><br><span class="line">                h = n(206),</span><br><span class="line">                f = f(&quot;slice&quot;),</span><br><span class="line">                p = _(&quot;species&quot;),</span><br><span class="line">                m = r.Array,</span><br><span class="line">                g = Math.max;</span><br><span class="line">            i(&#123;</span><br><span class="line">                target: &quot;Array&quot;,</span><br><span class="line">                proto: !0,</span><br><span class="line">                forced: !f</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                slice: function(e, t) &#123;</span><br><span class="line">                    var n, i, r, _ = l(this),</span><br><span class="line">                        f = u(_),</span><br><span class="line">                        b = c(e, f),</span><br><span class="line">                        v = c(void 0 === t ? f : t, f);</span><br><span class="line">                    if (a(_) &amp;&amp; (n = _.constructor, (n = s(n) &amp;&amp; (n === m || a(n.prototype)) || o(n) &amp;&amp; null === (n = n[p]) ? void 0 : n) === m || void 0 === n)) return h(_, b, v);</span><br><span class="line">                    for (i = new(void 0 === n ? m : n)(g(v - b, 0)),</span><br><span class="line">                    r = 0; b &lt; v; b++,</span><br><span class="line">                    r++)</span><br><span class="line">                    b in _ &amp;&amp; d(i, r, _[b]);</span><br><span class="line">                    return i.length = r,</span><br><span class="line">                    i</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        561: function(e, t, n) &#123;</span><br><span class="line">            &quot;use strict&quot;;</span><br><span class="line">            var i = n(2109),</span><br><span class="line">                r = n(7854),</span><br><span class="line">                a = n(1400),</span><br><span class="line">                s = n(9303),</span><br><span class="line">                o = n(6244),</span><br><span class="line">                c = n(7908),</span><br><span class="line">                u = n(5417),</span><br><span class="line">                l = n(6135),</span><br><span class="line">                n = n(1194)(&quot;splice&quot;),</span><br><span class="line">                d = r.TypeError,</span><br><span class="line">                _ = Math.max,</span><br><span class="line">                f = Math.min;</span><br><span class="line">            i(&#123;</span><br><span class="line">                target: &quot;Array&quot;,</span><br><span class="line">                proto: !0,</span><br><span class="line">                forced: !n</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                splice: function(e, t) &#123;</span><br><span class="line">                    var n, i, r, h, p, m, g = c(this),</span><br><span class="line">                        b = o(g),</span><br><span class="line">                        v = a(e, b),</span><br><span class="line">                        e = arguments.length;</span><br><span class="line">                    if (0 === e ? n = i = 0 : i = 1 === e ? (n = 0,</span><br><span class="line">                    b - v) : (n = e - 2,</span><br><span class="line">                    f(_(s(t), 0), b - v)),</span><br><span class="line">                    9007199254740991 &lt; b + n - i) throw d(&quot;Maximum allowed length exceeded&quot;);</span><br><span class="line">                    for (r = u(g, i),</span><br><span class="line">                    h = 0; h &lt; i; h++)</span><br><span class="line">                    (p = v + h) in g &amp;&amp; l(r, h, g[p]);</span><br><span class="line">                    if (n &lt; (r.length = i)) &#123;</span><br><span class="line">                        for (h = v; h &lt; b - i; h++)</span><br><span class="line">                        m = h + n, (p = h + i) in g ? g[m] = g[p] : delete g[m];</span><br><span class="line">                        for (h = b; b - i + n &lt; h; h--)</span><br><span class="line">                        delete g[h - 1]</span><br><span class="line">                    &#125; else if (i &lt; n) for (h = b - i; v &lt; h; h--)</span><br><span class="line">                    m = h + n - 1, (p = h + i - 1) in g ? g[m] = g[p] : delete g[m];</span><br><span class="line">                    for (h = 0; h &lt; n; h++)</span><br><span class="line">                    g[h + v] = arguments[h + 2];</span><br><span class="line">                    return g.length = b - i + n,</span><br><span class="line">                    r</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        3710: function(e, t, n) &#123;</span><br><span class="line">            var i = n(1702),</span><br><span class="line">                r = n(1320),</span><br><span class="line">                a = Date.prototype,</span><br><span class="line">                s = &quot;Invalid Date&quot;,</span><br><span class="line">                n = &quot;toString&quot;,</span><br><span class="line">                o = i(a[n]),</span><br><span class="line">                c = i(a.getTime);</span><br><span class="line">            String(new Date(NaN)) != s &amp;&amp; r(a, n, function() &#123;</span><br><span class="line">                var e = c(this);</span><br><span class="line">                return e == e ? o(this) : s</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        1539: function(e, t, n) &#123;</span><br><span class="line">            var i = n(1694),</span><br><span class="line">                r = n(1320),</span><br><span class="line">                n = n(288);</span><br><span class="line">            i || r(Object.prototype, &quot;toString&quot;, n, &#123;</span><br><span class="line">                unsafe: !0</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        1058: function(e, t, n) &#123;</span><br><span class="line">            var i = n(2109),</span><br><span class="line">                n = n(3009);</span><br><span class="line">            i(&#123;</span><br><span class="line">                global: !0,</span><br><span class="line">                forced: parseInt != n</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                parseInt: n</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        9714: function(e, t, n) &#123;</span><br><span class="line">            &quot;use strict&quot;;</span><br><span class="line">            var i = n(1702),</span><br><span class="line">                r = n(6530).PROPER,</span><br><span class="line">                a = n(1320),</span><br><span class="line">                s = n(9670),</span><br><span class="line">                o = n(7976),</span><br><span class="line">                c = n(1340),</span><br><span class="line">                u = n(7293),</span><br><span class="line">                l = n(7066),</span><br><span class="line">                n = &quot;toString&quot;,</span><br><span class="line">                d = RegExp.prototype,</span><br><span class="line">                _ = d[n],</span><br><span class="line">                f = i(l),</span><br><span class="line">                u = u(function() &#123;</span><br><span class="line">                    return &quot;/a/b&quot; != _.call(&#123;</span><br><span class="line">                        source: &quot;a&quot;,</span><br><span class="line">                        flags: &quot;b&quot;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;),</span><br><span class="line">                r = r &amp;&amp; _.name != n;</span><br><span class="line">            (u || r) &amp;&amp; a(RegExp.prototype, n, function() &#123;</span><br><span class="line">                var e = s(this),</span><br><span class="line">                    t = c(e.source),</span><br><span class="line">                    n = e.flags;</span><br><span class="line">                return &quot;/&quot; + t + &quot;/&quot; + c(void 0 !== n || !o(d, e) || &quot;flags&quot; in d ? n : f(e))</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                unsafe: !0</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        9841: function(e, t, n) &#123;</span><br><span class="line">            &quot;use strict&quot;;</span><br><span class="line">            var i = n(2109),</span><br><span class="line">                r = n(8710).codeAt;</span><br><span class="line">            i(&#123;</span><br><span class="line">                target: &quot;String&quot;,</span><br><span class="line">                proto: !0</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                codePointAt: function(e) &#123;</span><br><span class="line">                    return r(this, e)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        4953: function(e, t, n) &#123;</span><br><span class="line">            var i = n(2109),</span><br><span class="line">                r = n(7854),</span><br><span class="line">                a = n(1702),</span><br><span class="line">                s = n(1400),</span><br><span class="line">                o = r.RangeError,</span><br><span class="line">                c = String.fromCharCode,</span><br><span class="line">                r = String.fromCodePoint,</span><br><span class="line">                u = a([].join);</span><br><span class="line">            i(&#123;</span><br><span class="line">                target: &quot;String&quot;,</span><br><span class="line">                stat: !0,</span><br><span class="line">                forced: !! r &amp;&amp; 1 != r.length</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                fromCodePoint: function(e) &#123;</span><br><span class="line">                    for (var t, n = [], i = arguments.length, r = 0; r &lt; i;) &#123;</span><br><span class="line">                        if (t = +arguments[r++],</span><br><span class="line">                        s(t, 1114111) !== t) throw o(t + &quot; is not a valid code point&quot;);</span><br><span class="line">                        n[r] = t &lt; 65536 ? c(t) : c(55296 + ((t -= 65536) &gt;&gt; 10), t % 1024 + 56320)</span><br><span class="line">                    &#125;</span><br><span class="line">                    return u(n, &quot;&quot;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var pwd = &#x27;&#123;&quot;un&quot;:&quot;admin123@163.com&quot;,&quot;pw&quot;:&quot;ffhnKr8vA0EIEEclcRR6Ik8sDkEkjcvalofxRMQcS+ADdxyWoPpZFE6pehucjf/+0F5MliRjC51VMPUkGK/ceLj5fTlhNj34pHSfnU7zMd35XwSaPax/ucpNWpStm4tb0gyl+rb0ulEzQn7Tk4FR1hCUcE5kyAjo52567M+Eb8Q=&quot;,&quot;pd&quot;:&quot;mail163&quot;,&quot;l&quot;:0,&quot;d&quot;:30,&quot;t&quot;:1695908789441,&quot;pkid&quot;:&quot;CvViHzl&quot;,&quot;domains&quot;:&quot;163.com&quot;,&quot;tk&quot;:&quot;8753c188d3bbad4996c4cf699e3beef5&quot;,&quot;pwdKeyUp&quot;:1,&quot;channel&quot;:0,&quot;topURL&quot;:&quot;https://smart.mail.163.com/login.htm&quot;,&quot;rtid&quot;:&quot;RXuDHOFWWNPiiotxQy3UqrnZvRh7yrSM&quot;&#125;&#x27;</span><br><span class="line"></span><br><span class="line">var _sm4pubkey = &#x27;BC60B8B9E4FFEFFA219E5AD77F11F9E2&#x27;</span><br><span class="line"></span><br><span class="line">var p = _e(&#x27;9579&#x27;); //定义导出函数，将加密模块导出为全局变量p</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function enc(pwd) &#123;</span><br><span class="line">    return p.encrypt(pwd, _sm4pubkey)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(enc(pwd))</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081115683.png" alt="image.png"> </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405081115482.png" alt="image.png"> </p>]]></content>
      
      
      <categories>
          
          <category> 渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS逆向 </tag>
            
            <tag> webpack </tag>
            
            <tag> RSA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>T翼云扣webpack原生代码</title>
      <link href="/2024/05/07/T%E7%BF%BC%E4%BA%91%E6%89%A3webpack%E5%8E%9F%E7%94%9F%E4%BB%A3%E7%A0%81/"/>
      <url>/2024/05/07/T%E7%BF%BC%E4%BA%91%E6%89%A3webpack%E5%8E%9F%E7%94%9F%E4%BB%A3%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h1 id="逆向目标"><a href="#逆向目标" class="headerlink" title="逆向目标"></a>逆向目标</h1><ul><li>目标：天翼云登录框</li><li>链接：<a href="https://m.ctyun.cn/wap/main/auth/login">https://m.ctyun.cn/wap/main/auth/login</a></li><li>简介：主要对加密的函数的提取，找打加密的地方，分析加密函数，提取重要的JS代码进行加密算法还原</li></ul><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071539849.png" alt="image.png"> </p><ul><li>发现这块的JS是webpack打包过的</li></ul><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071539902.png" alt="image.png"> </p><p>webpack的特点：将所有的函数封装好，集成到一个个模块中，然后使用加载器或方法体来调用这些模块，变成一个对象，这样子就可以使用这个模块里面的函数和属性。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071541946.png" alt="image-20240507154149907"> </p><h1 id="webpack讲解"><a href="#webpack讲解" class="headerlink" title="webpack讲解"></a>webpack讲解</h1><p><a href="https://blog.csdn.net/sin_0119/article/details/129658679">js逆向——webpack扣法_webpack 逆向-CSDN博客</a></p><h2 id="01-webpack简介"><a href="#01-webpack简介" class="headerlink" title="01 webpack简介"></a>01 webpack简介</h2><p>webpack是个静态模块打包工具，目的是为了让前端工程师写的前端代码变成浏览器可以识别的代码，并且可以达到前端项目的模块化，也就是如何更高效地管理和维护项目中的每一个资源。</p><p>但无疑是对js逆向造成了妨碍。但如果掌握了扣取webpack的一些技巧也是不难的。接下来，说一下对扣取webpack代码的一些理解。</p><h2 id="02-webpack的组成"><a href="#02-webpack的组成" class="headerlink" title="02 webpack的组成"></a>02 webpack的组成</h2><p>一个最基本的webpack组成有两个部分:</p><ul><li>自执行函数</li><li>模块加载器(实际上也就是一个函数而已)</li></ul><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071543472.png" alt="img"> </p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1.传入的参数是一个数组</span></span><br><span class="line"><span class="keyword">var</span> _xxx;</span><br><span class="line">！<span class="keyword">function</span>(<span class="params">x</span>)&#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">xxx</span>(<span class="params">y</span>)&#123;    #这个是模块加载器，这个y传入的可以是索引和对象的key，参数表示的是列表或对象的形参</span><br><span class="line">        x[y].<span class="title function_">call</span>(参数) </span><br><span class="line">    &#125;</span><br><span class="line">    _xxx = xxx;</span><br><span class="line">&#125;( [<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;第一个&quot;</span>)&#125;,</span><br><span class="line">    <span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="title function_">consolelog</span>(<span class="string">&quot;第二个&quot;</span>)&#125;,</span><br><span class="line">    <span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;第三个&quot;</span>)&#125;</span><br><span class="line">   ] );</span><br><span class="line"></span><br><span class="line"><span class="comment">//比如</span></span><br><span class="line"><span class="title function_">_xxx</span>(<span class="number">0</span>); <span class="comment">//执行得到的就是输出——第一个</span></span><br><span class="line"><span class="title function_">_xxx</span>(<span class="number">1</span>);<span class="comment">//执行得到的就是输出——第二个</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.传入的参数是一个对象</span></span><br><span class="line"><span class="keyword">var</span> _xxx;</span><br><span class="line">！<span class="keyword">function</span>(<span class="params">x</span>)&#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">xxx</span>(<span class="params">y</span>)&#123;    #这个是模块加载器，这个y传入的可以是索引和对象的key，参数表示的是列表或对象的形参</span><br><span class="line">        x[y].<span class="title function_">call</span>(参数) </span><br><span class="line">    &#125;</span><br><span class="line">    _xxx = xxx;</span><br><span class="line">&#125;( &#123;</span><br><span class="line">    <span class="attr">obj1</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;第一个&quot;</span>)&#125;,</span><br><span class="line">    <span class="attr">obj2</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="title function_">consolelog</span>(<span class="string">&quot;第二个&quot;</span>)&#125;,</span><br><span class="line">    <span class="attr">obj3</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;第三个&quot;</span>)&#125;</span><br><span class="line">   &#125; );</span><br><span class="line"><span class="comment">//因为传入的是一个对象，那想要调用对象就要指明key</span></span><br><span class="line"><span class="title function_">_xxx</span>(<span class="string">&quot;obj1&quot;</span>)</span><br><span class="line"><span class="title function_">_xxx</span>(<span class="string">&quot;obj2&quot;</span>)<span class="comment">//和数组相比只是调用方式不同而已，原理基本一致</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="03-实战看webpack组成"><a href="#03-实战看webpack组成" class="headerlink" title="03 实战看webpack组成"></a>03 实战看webpack组成</h2><p>光说不练假把式，接下来我们从真实的网站中看一看关于webpack组成:</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071602810.png" alt="img"> </p><p>通过观察真实网站的webpack可以发现,这种情况与我们自己写的那个大差不差，无非就是加载器函数中功能更完善了些。</p><p>这种加载器函数与执行对象在一个文件中的webpack很好扣js,至于如何扣我们以后再说，今天要解决的是下面的这种要怎么扣取代码呢?</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071603051.png" alt="img"> </p><p>就像图中所展示的那样，要怎么才能把目标给扣出来呢?</p><p>首先，想要扣取webpack代码就要先找到其基本要素，注意:自执行函数不是关键，关键的是传入的实参，也就是那个对象(数组)</p><ul><li>传入的实参<ul><li>传入的实参也就是我们的目标，把目标函数放到自己构建的对象里面就行了</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//构建自己的对象,把上面的目标给填到这个里面就行</span></span><br><span class="line">&#123;</span><br><span class="line">     <span class="string">&quot;wk8/&quot;</span>: <span class="keyword">function</span>(<span class="params">e, t, n</span>) &#123;</span><br><span class="line">        <span class="string">&quot;use strict&quot;</span>;</span><br><span class="line">        n.<span class="title function_">d</span>(t, <span class="string">&quot;g&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        n.<span class="title function_">d</span>(t, <span class="string">&quot;q&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        n.<span class="title function_">d</span>(t, <span class="string">&quot;m&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        n.<span class="title function_">d</span>(t, <span class="string">&quot;I&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        n.<span class="title function_">d</span>(t, <span class="string">&quot;o&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        n.<span class="title function_">d</span>(t, <span class="string">&quot;r&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        n.<span class="title function_">d</span>(t, <span class="string">&quot;v&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        n.<span class="title function_">d</span>(t, <span class="string">&quot;n&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> o = <span class="title function_">n</span>(<span class="string">&quot;zvER&quot;</span>)</span><br><span class="line">          , a = <span class="title function_">n</span>(<span class="string">&quot;MuMZ&quot;</span>);</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">r</span>(<span class="params">e, t, n</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> r = &#123;</span><br><span class="line">                <span class="attr">username</span>: e,</span><br><span class="line">                <span class="attr">password</span>: <span class="title class_">Object</span>(a.<span class="property">a</span>)(t),</span><br><span class="line">                <span class="attr">captcha</span>: n</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">return</span> o.<span class="property">a</span>.<span class="title function_">formPost</span>(<span class="string">&quot;/user/login&quot;</span>, r)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">i</span>(<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">m</span>(<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">g</span>(<span class="params">e, t</span>) &#123;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">y</span>(<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">L</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;test&quot;</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;test success!!&quot;</span>)&#125; <span class="comment">//这个仅用于测试使用</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><ul><li>当目标函数中有依赖的模块时，把依赖的模块也通通放到自己写的对象里面即可</li></ul></li></ul><ul><li>加载器函数</li></ul><ul><li><ul><li>当看到如上图的代码时可能会有人会不明白这哪里有加载器，就连自执行函数都没有</li><li>但实际上肯定是有加载器的，如图</li></ul></li></ul><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071606459.png" alt="img"> </p><ul><li><ul><li>所以在定位到目标时，目标的大函数一般会加载其他模块，若要加载其他模块就会使用到加载器，以此就可以找到加载器了</li></ul></li><li><p>但是，当断到我们想要的[目标函数]时再去定位n(“”)函数哪里是显示不出来的，如图</p></li></ul><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071608705.png" alt="image-20240507160832661"> </p><p>这是因为加载器函数实际上是在你打开网页的时候就已经加载到内存中了，而只有当我们进行登录这一具体操作时才会执行调用这个函数，所以这时是找不到加载器的。</p><p>解决方法也很简单: 只需在加载模块的前面加上断点，然后刷新页面就可以找到加载器的位置了</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071609396.png" alt="img"> </p><ul><li>到此，目标函数以及加载器都已经找齐了</li></ul><h2 id="04-webpack调用原理分析"><a href="#04-webpack调用原理分析" class="headerlink" title="04 webpack调用原理分析"></a>04 webpack调用原理分析</h2><p>在上面的环节中我们确定了目标函数并找到了加载器，但正如我们看到的那样，它并不像我们自己写的那个webpack直接把大对象给传进去了，而是在另一个独立的文件里面，那么加载器又是如何对另一份独立的文件中的模块进行加载的呢?</p><p>首先来看我们找的的那个加载器,如图：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071615605.png" alt="img"> </p><p>接下来我们要解决的是自执行函数的形参c是如何变成独立文件中的那个存有模块的对象的:</p><ol><li>我们把得到的自执行函数拿出来放到node.js环境中执行一下</li></ol><ul><li><ul><li>其中将传入的空数组变成一个对象，对象里面放有一个测试函数</li><li>输出自执行函数的形参</li><li>并将加载器函数给导出来</li></ul></li></ul><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071619382.png" alt="img"> </p><ol start="2"><li>我们将目标函数所在的那个独立文件全部写入到另一个文件当中去</li></ol><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071620373.png" alt="img"> </p><ol start="3"><li>在自执行函数的上面对刚刚写入的文件进行引入，再次执行函数</li></ol><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071620775.png" alt="img"> </p><ol start="4"><li>通过实验，我们知道了通过引入外部文件可以将模块加载到形参里面，那么是如何实现的呢? 通过调试自执行代码可以明白</li></ol><ul><li>在与单个文件有相同部分下面可疑部分打上几个断点如下:</li></ul><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071620297.png" alt="img"> </p><ul><li>接着向下进行，通过读代码可以知道通过for循环执行了函数n(),通过下图可以知道是为了加载外部模块</li></ul><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071620315.png" alt="img"> </p><ul><li>再向下进行到第三个断点</li></ul><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071621596.png" alt="img"> </p><p>至于那个for循环是怎么将外部模块进行引入的我们并不需要深究，只需要知道当扣代码时一定不能将这个for循环给忘掉，如果忘掉的话外部文件是无法加载进来的。</p><h1 id="逆向参数"><a href="#逆向参数" class="headerlink" title="逆向参数"></a>逆向参数</h1><h2 id="1-定位到password加密函数"><a href="#1-定位到password加密函数" class="headerlink" title="1. 定位到password加密函数"></a>1. 定位到password加密函数</h2><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071624397.png" alt="img"> </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">encodeURI(Object(w[&quot;c&quot;])(a.value, Object(w[&quot;f&quot;])(Object(w[&quot;g&quot;])(r.value))))</span><br></pre></td></tr></table></figure><p>拆分一下后如下：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">r.value</span><br><span class="line">Object(w[&quot;g&quot;])(r.value)</span><br><span class="line">Object(w[&quot;f&quot;])(Object(w[&quot;g&quot;])(r.value)</span><br><span class="line"></span><br><span class="line">a.value</span><br><span class="line"></span><br><span class="line">Object(w[&quot;c&quot;])(a.value, Object(w[&quot;f&quot;])(Object(w[&quot;g&quot;])(r.value)))</span><br><span class="line"></span><br><span class="line">encodeURI(Object(w[&quot;c&quot;])(a.value, Object(w[&quot;f&quot;])(Object(w[&quot;g&quot;])(r.value))))</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071624714.png" alt="img"> </p><h2 id="2-第一个参数分析"><a href="#2-第一个参数分析" class="headerlink" title="2. 第一个参数分析"></a>2. 第一个参数分析</h2><p>a.value：直接就是输入的密码明文</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071625245.png" alt="img"> </p><h2 id="3-第二个参数分析"><a href="#3-第二个参数分析" class="headerlink" title="3. 第二个参数分析"></a>3. 第二个参数分析</h2><p>Object(w[“f”])(Object(w[“g”])(r.value)</p><h3 id="（1）w-“g”"><a href="#（1）w-“g”" class="headerlink" title="（1）w[“g”]"></a>（1）w[“g”]</h3><p>这个函数是js的[字符串替换]函数，这个函数有两个参数，第一个函数可以是字符串或正则表达式（用以进行匹配的子字符串），第二个函数是字符串（替换匹配的子字符串）。就是在原字符串上把和第一个参数相同的字符串替换成第二个参数的字符串。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071626148.png" alt="img"> </p><p>这个例子使用的是正则表达式匹配字符串，其中”&#x2F; &#x2F;“这个是固定写法，”\s”是转移符号用以匹配任何空白字符，包括空格、制表符、换页符等等，“g”表示全局匹配将替换所有匹配的子串，如果不加”g”当匹配到第一个后就结束了。</p><p>这个例子的意思就是将原字符串中的所有空白字符替换成””，比如”abc d efg “字样的字符串使用这个函数后将变成”abcdefg”。</p><h3 id="（2）w-“f”"><a href="#（2）w-“f”" class="headerlink" title="（2）w[“f”]"></a>（2）w[“f”]</h3><p>这个函数的作用就是用户名填充。</p><p>当输出的用户名不足24位的时候，在后面补充 “0”。比如输入用户名为 “<a href="mailto:&#x61;&#100;&#x6d;&#105;&#x6e;&#x40;&#x31;&#x32;&#x33;&#46;&#99;&#x6f;&#x6d;">&#x61;&#100;&#x6d;&#105;&#x6e;&#x40;&#x31;&#x32;&#x33;&#46;&#99;&#x6f;&#x6d;</a>“，则填充后为 “<a href="mailto:&#x61;&#x64;&#x6d;&#105;&#110;&#x40;&#x31;&#x32;&#x33;&#46;&#x63;&#111;&#109;&#48;&#48;&#x30;&#x30;&#48;&#x30;&#x30;&#x30;&#48;&#48;&#x30;">&#x61;&#x64;&#x6d;&#105;&#110;&#x40;&#x31;&#x32;&#x33;&#46;&#x63;&#111;&#109;&#48;&#48;&#x30;&#x30;&#48;&#x30;&#x30;&#x30;&#48;&#48;&#x30;</a>“</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071629181.png" alt="img"> </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071629502.png" alt="img"> </p><h2 id="4-加密函数分析"><a href="#4-加密函数分析" class="headerlink" title="4. 加密函数分析"></a>4. 加密函数分析</h2><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071630272.png" alt="img"> </p><h3 id="1）根据代码可以初步判断为DES加密："><a href="#1）根据代码可以初步判断为DES加密：" class="headerlink" title="1）根据代码可以初步判断为DES加密："></a>1）根据代码可以初步判断为DES加密：</h3><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071631831.png" alt="img"> </p><p>分析代码逻辑：</p><ul><li>只传入了一个参数：密码字段</li><li>前面都是var定义局部变量</li><li>关键加密代码：</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">l = p.a.TripleDES.encrypt(e, d, s);</span><br></pre></td></tr></table></figure><p>这块相当于对象一步步调用方法，所以，这块要先定位到对象 “p”</p><h3 id="2）向上找，定位到对象p"><a href="#2）向上找，定位到对象p" class="headerlink" title="2）向上找，定位到对象p"></a>2）向上找，定位到对象p</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">l = t(&quot;3452&quot;)</span><br><span class="line">p = t.n(l)</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071632338.png" alt="img"> </p><p>这块可以明显看到就是相当于webpack的方式，模块化调用</p><h3 id="3）将当前的整个代码复制下来放到notepad-中"><a href="#3）将当前的整个代码复制下来放到notepad-中" class="headerlink" title="3）将当前的整个代码复制下来放到notepad++中"></a>3）将当前的整个代码复制下来放到notepad++中</h3><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071632355.png" alt="img"> </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071632854.png" alt="img"> </p><h3 id="4）找到webpack代码的分发器（加载器）"><a href="#4）找到webpack代码的分发器（加载器）" class="headerlink" title="4）找到webpack代码的分发器（加载器）"></a>4）找到webpack代码的分发器（加载器）</h3><p>刷新页面，在刚刚打的断点p处停下<br>l &#x3D; t(“3452”) 中加载了用的加解密算法，我们，需要的就是DES的加密和解密算法</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071633160.png" alt="img"> </p><p>所以，接下来定位到 “<strong>t</strong>“ ，t就是我们要找的分发器：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071633295.png" alt="img"> </p><p>简单改写一下分发器：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fff</span><br><span class="line"></span><br><span class="line">!<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> r = &#123;&#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">u</span>(<span class="params">n</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (r[n])</span><br><span class="line">            <span class="keyword">return</span> r[n].<span class="property">exports</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;--&gt;&#x27;</span>,n)</span><br><span class="line">        <span class="keyword">var</span> t = r[n] = &#123;</span><br><span class="line">            <span class="attr">i</span>: n,</span><br><span class="line">            <span class="attr">l</span>: !<span class="number">1</span>,</span><br><span class="line">            <span class="attr">exports</span>: &#123;&#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> e[n].<span class="title function_">call</span>(t.<span class="property">exports</span>, t, t.<span class="property">exports</span>, u),</span><br><span class="line">        t.<span class="property">l</span> = !<span class="number">0</span>,</span><br><span class="line">        t.<span class="property">exports</span></span><br><span class="line">    &#125;</span><br><span class="line">    fff = u</span><br><span class="line">&#125;(&#123;</span><br><span class="line">   <span class="comment">//模块化代码填充</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="5）加密模块为”3452”，但是当前扣取到notepad-中的代码没有-3452-模块"><a href="#5）加密模块为”3452”，但是当前扣取到notepad-中的代码没有-3452-模块" class="headerlink" title="5）加密模块为”3452”，但是当前扣取到notepad++中的代码没有 3452 模块"></a>5）加密模块为”3452”，但是当前扣取到notepad++中的代码没有 3452 模块</h3><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071637070.png" alt="img"> </p><p>全局查找，定位到 “3452” 模块代码：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071637902.png" alt="img"> </p><h3 id="6）扣取加密模块代码"><a href="#6）扣取加密模块代码" class="headerlink" title="6）扣取加密模块代码"></a>6）扣取加密模块代码</h3><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071637205.png" alt="img"> </p><p>将模块代码扣取出来。放到刚刚其前一步做好的加载器中：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">从&quot;00bb&quot;开始，扣取全部模块代码</span><br><span class="line"></span><br><span class="line">省略。。。</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071637596.png" alt="img"> </p><h3 id="7）编写加密函数"><a href="#7）编写加密函数" class="headerlink" title="7）编写加密函数"></a>7）编写加密函数</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//构建加密函数</span></span><br><span class="line"><span class="keyword">var</span> p = <span class="title function_">fff</span>(<span class="string">&#x27;3452&#x27;</span>);   <span class="comment">//定义导出函数，将加密模块导出为全局变量p</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getUsername</span>(<span class="params">e</span>)&#123;</span><br><span class="line">  <span class="comment">//用户名长度不够末尾自动补零</span></span><br><span class="line">   <span class="keyword">var</span> n = <span class="variable language_">arguments</span>.<span class="property">length</span> &gt; <span class="number">1</span> &amp;&amp; <span class="keyword">void</span> <span class="number">0</span> !== <span class="variable language_">arguments</span>[<span class="number">1</span>] ? <span class="variable language_">arguments</span>[<span class="number">1</span>] : &#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span> (e &amp;&amp; <span class="string">&quot;string&quot;</span> === <span class="keyword">typeof</span> e) &#123;</span><br><span class="line">        <span class="keyword">var</span> t = n.<span class="property">text</span> || <span class="string">&quot;0&quot;</span>,</span><br><span class="line">            r = n.<span class="property">length</span> || <span class="number">24</span>;</span><br><span class="line">        <span class="keyword">if</span> (e.<span class="property">length</span> &lt; r) </span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">var</span> a = e.<span class="property">length</span>; a &lt; r; a++)</span><br><span class="line">            e += t;</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">          e = e.<span class="title function_">substring</span>(<span class="number">0</span>, r);</span><br><span class="line">      <span class="comment">//去除用户名中的空格</span></span><br><span class="line">        <span class="keyword">return</span> e.<span class="title function_">replace</span>(<span class="regexp">/\s+/g</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getPwd</span>(<span class="params">pwd,name</span>)&#123;</span><br><span class="line">  <span class="comment">//构建加密函数</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//导出加密p对象</span></span><br><span class="line">  <span class="keyword">var</span> n = <span class="title function_">getUsername</span>(name)</span><br><span class="line">  , c = pwd</span><br><span class="line">  , d = p.<span class="property">enc</span>[<span class="string">&#x27;utf-8&#x27;</span>].<span class="title function_">parse</span>(n)</span><br><span class="line">  , l = &#123;</span><br><span class="line">    <span class="attr">mode</span>: p.<span class="property">mode</span>[<span class="string">&#x27;ECB&#x27;</span>],</span><br><span class="line">    <span class="attr">padding</span>: p.<span class="property">pad</span>[<span class="string">&#x27;pkcs7&#x27;</span>]</span><br><span class="line">  &#125;</span><br><span class="line">  , s = p.<span class="property">DES</span>.<span class="title function_">encrypt</span>(c, d, l);</span><br><span class="line">  <span class="keyword">return</span> s.<span class="title function_">toString</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8）汇总一下代码"><a href="#8）汇总一下代码" class="headerlink" title="8）汇总一下代码"></a>8）<strong>汇总一下代码</strong></h3><p>参考后面第四部分，完整代码</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">分发器代码+加密模块代码+自写加密函数代码</span><br></pre></td></tr></table></figure><h3 id="9）测试"><a href="#9）测试" class="headerlink" title="9）测试"></a>9）测试</h3><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071639873.png" alt="img"> </p><h1 id="代码编写"><a href="#代码编写" class="headerlink" title="代码编写"></a>代码编写</h1><h2 id="1-第二个参数代码"><a href="#1-第二个参数代码" class="headerlink" title="1. 第二个参数代码"></a>1. 第二个参数代码</h2><p>作用：处理用户名（使用正则替换用户名中的任何空白字符【包括空格、制表符、换页符等等】为空，然后将用户名的长度使用 “0” 填充为 24位）</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Q = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> e = <span class="variable language_">arguments</span>.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; <span class="keyword">void</span> <span class="number">0</span> !== <span class="variable language_">arguments</span>[<span class="number">0</span>] ? <span class="variable language_">arguments</span>[<span class="number">0</span>] : <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> e.<span class="title function_">replace</span>(<span class="regexp">/\s+/g</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">F = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> n = <span class="variable language_">arguments</span>.<span class="property">length</span> &gt; <span class="number">1</span> &amp;&amp; <span class="keyword">void</span> <span class="number">0</span> !== <span class="variable language_">arguments</span>[<span class="number">1</span>] ? <span class="variable language_">arguments</span>[<span class="number">1</span>] : &#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span> (e &amp;&amp; <span class="string">&quot;string&quot;</span> === <span class="keyword">typeof</span> e) &#123;</span><br><span class="line">        <span class="keyword">var</span> t = n.<span class="property">text</span> || <span class="string">&quot;0&quot;</span>,</span><br><span class="line">            r = n.<span class="property">length</span> || <span class="number">24</span>;</span><br><span class="line">        <span class="keyword">if</span> (e.<span class="property">length</span> &lt; r) <span class="keyword">for</span> (<span class="keyword">var</span> a = e.<span class="property">length</span>; a &lt; r; a++)</span><br><span class="line">        e += t;</span><br><span class="line">        <span class="keyword">else</span> e = e.<span class="title function_">substring</span>(<span class="number">0</span>, r);</span><br><span class="line">        <span class="keyword">return</span> e</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071640006.png" alt="img"> </p><h2 id="2-完整JS代码"><a href="#2-完整JS代码" class="headerlink" title="2. 完整JS代码"></a>2. 完整JS代码</h2><p>代码太多了，插入附件参考</p><p><a href="https://gitee.com/jingweihang/img/blob/master/hexo/202405/m.ctyun.cn.js">hexo&#x2F;202405&#x2F;m.ctyun.cn.js · 要优秀&#x2F;img - Gitee.com</a></p>]]></content>
      
      
      <categories>
          
          <category> 渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS逆向 </tag>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>某music音乐评论解密</title>
      <link href="/2024/05/07/%E6%9F%90music%E9%9F%B3%E4%B9%90%E8%AF%84%E8%AE%BA%E8%A7%A3%E5%AF%86/"/>
      <url>/2024/05/07/%E6%9F%90music%E9%9F%B3%E4%B9%90%E8%AF%84%E8%AE%BA%E8%A7%A3%E5%AF%86/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="常规分析"><a href="#常规分析" class="headerlink" title="常规分析"></a>常规分析</h1><p>这块很多步骤参考原作者文章，地址如下：</p><p><a href="https://mp.weixin.qq.com/s/loXsmR8uhrtFA_3EuBQB8w">https://mp.weixin.qq.com/s/loXsmR8uhrtFA_3EuBQB8w</a></p><h2 id="目标地址"><a href="#目标地址" class="headerlink" title="目标地址"></a>目标地址</h2><p>aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvc29uZz9pZD0yMDYxOTc4OTYx</p><h2 id="分析数据包"><a href="#分析数据包" class="headerlink" title="分析数据包"></a>分析数据包</h2><p>1、获取评论接口为<a href="https://music.163.com/weapi/comment/resource/comments/get?csrf_token=">https://music.163.com/weapi/comment/resource/comments/get?csrf_token=</a></p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405070950955.png" alt="image.png"> </p><p>2、POST请求，里面有两个参数 “<strong>params</strong>“和”<strong>encSecKey</strong>“</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071105575.png" alt="image.png"> </p><p>尝试多次请求，发现这两个参数值是一直变化的。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071106618.png" alt="image.png"> </p><h2 id="分析参数"><a href="#分析参数" class="headerlink" title="分析参数"></a>分析参数</h2><p>按照以往的抓取经验来说，它们大概率是在一起的，因此可以通过全局搜索<strong>encSecKey</strong>这个词汇。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071106426.png" alt="image.png"> </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var bKL9C = window.asrsea(JSON.stringify(i6c), bvl1x([&quot;流泪&quot;, &quot;强&quot;]), bvl1x(Rj5o.md), bvl1x([&quot;爱心&quot;, &quot;女孩&quot;, &quot;惊恐&quot;, &quot;大笑&quot;]));</span><br><span class="line">e6c.data = j6d.cq6k(&#123;</span><br><span class="line">  params: bKL9C.encText,</span><br><span class="line">  encSecKey: bKL9C.encSecKey</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>打断点调试一下：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071107423.png" alt="fae1bc4fedfcd635849bfcf0d8c47326.png"> </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071107384.png" alt="d296bd02b2adf2c40ac2011ddc78fd5a.png"> </p><p>成功定位到参数的具体位置。。。</p><h2 id="寻找加密函数"><a href="#寻找加密函数" class="headerlink" title="寻找加密函数"></a>寻找加密函数</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var bKL9C = window.asrsea(JSON.stringify(i6c), bvl1x([&quot;流泪&quot;, &quot;强&quot;]), bvl1x(Rj5o.md), bvl1x([&quot;爱心&quot;, &quot;女孩&quot;, &quot;惊恐&quot;, &quot;大笑&quot;]));</span><br><span class="line">e6c.data = j6d.cq6k(&#123;</span><br><span class="line">  params: bKL9C.encText,</span><br><span class="line">  encSecKey: bKL9C.encSecKey</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>加密函数应该就是asrsea，在里面一共要传递四个参数。我们可以看看这四个参数分别是什么？</p><p>点击翻页，然后断点下来后查看参数值：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071108857.png" alt="img"> </p><p>由上图可以发现，这四个参数中，分别找了两个数据包来判断，它们会不会有什么变化，变化的值是<strong>pageNo。</strong></p><p>当然了，这里除了pageNo之外，还有cursor也是变化的，它代表的是时间戳。</p><p>意味着即使是相同的页面<strong>params</strong>和<strong>encSecKey</strong>的值也是时时刻刻都在发生变化的。</p><h2 id="进入加密函数"><a href="#进入加密函数" class="headerlink" title="进入加密函数"></a>进入加密函数</h2><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071109485.png" alt="img"> </p><p>进来之后，函数套函数，开始补全js代码</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function d(d, e, f, g) &#123;</span><br><span class="line">        var h = &#123;&#125;</span><br><span class="line">          , i = a(16);</span><br><span class="line">        return h.encText = b(d, g),</span><br><span class="line">        h.encText = b(h.encText, i),</span><br><span class="line">        h.encSecKey = c(i, e, f),</span><br><span class="line">        h</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071109254.png" alt="image.png"> </p><p>里面包含了</p><ul><li>函数a</li><li>函数b</li><li>函数c</li></ul><h3 id="函数a"><a href="#函数a" class="headerlink" title="函数a"></a>函数a</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function a(a) &#123;</span><br><span class="line">        var d, e, b = &quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&quot;, c = &quot;&quot;;</span><br><span class="line">        for (d = 0; a &gt; d; d += 1)</span><br><span class="line">            e = Math.random() * b.length,</span><br><span class="line">            e = Math.floor(e),</span><br><span class="line">            c += b.charAt(e);</span><br><span class="line">        return c</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>不难看出，<strong>它的主要作用是生成16位随机字符</strong></p><p>简单做个修改</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function a(length)&#123;</span><br><span class="line">    let d, e, b = &quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&quot;, c = &quot;&quot;;</span><br><span class="line">    for (d = 0; length &gt; d; d += 1)&#123;</span><br><span class="line">        e = Math.random() * b.length;</span><br><span class="line">        e = Math.floor(e);</span><br><span class="line">        c += b.charAt(e);</span><br><span class="line">    &#125;</span><br><span class="line">    return c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let result = a(16);</span><br></pre></td></tr></table></figure><h3 id="函数b"><a href="#函数b" class="headerlink" title="函数b"></a>函数b</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function b(a, b) &#123;</span><br><span class="line">        var c = CryptoJS.enc.Utf8.parse(b)</span><br><span class="line">          , d = CryptoJS.enc.Utf8.parse(&quot;0102030405060708&quot;)</span><br><span class="line">          , e = CryptoJS.enc.Utf8.parse(a)</span><br><span class="line">          , f = CryptoJS.AES.encrypt(e, c, &#123;</span><br><span class="line">            iv: d,</span><br><span class="line">            mode: CryptoJS.mode.CBC</span><br><span class="line">        &#125;);</span><br><span class="line">        return f.toString()</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>接下来，就来解释一下，这段代码的意思。</p><p>a代表的是你要加密的字符串，b代表密钥。它的基本作用是利用AES加密算法配合CBC模式的加密过程，最后以base64的形式输出</p><p>简单修改一下，上述代码</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function generateRandomString(length)&#123;</span><br><span class="line">    let d, e, b = &quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&quot;, c = &quot;&quot;;</span><br><span class="line">    for (d = 0; length &gt; d; d += 1)&#123;</span><br><span class="line">        e = Math.random() * b.length;</span><br><span class="line">        e = Math.floor(e);</span><br><span class="line">        c += b.charAt(e);</span><br><span class="line">    &#125;</span><br><span class="line">    return c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 获取AES加密数据</span><br><span class="line">const CryptoJS = require(&quot;crypto-js&quot;)</span><br><span class="line">function encryptMessage(message, key) &#123;</span><br><span class="line">    let keyUtf8 = CryptoJS.enc.Utf8.parse(key);</span><br><span class="line">    let iv = CryptoJS.enc.Utf8.parse(&quot;0102030405060708&quot;);</span><br><span class="line">    let messageUtf8 = CryptoJS.enc.Utf8.parse(message);</span><br><span class="line">    let encrypted = CryptoJS.AES.encrypt(messageUtf8, keyUtf8, &#123;</span><br><span class="line">        iv: iv,</span><br><span class="line">        mode: CryptoJS.mode.CBC&#125;);</span><br><span class="line">    return encrypted.toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let message = &#123;&quot;rid&quot;:&quot;R_SO_4_2061978961&quot;,&quot;threadId&quot;:&quot;R_SO_4_2061978961&quot;,&quot;pageNo&quot;:&quot;3&quot;,&quot;pageSize&quot;:&quot;20&quot;,&quot;cursor&quot;:&quot;1708238561030&quot;,&quot;offset&quot;:&quot;0&quot;,&quot;orderType&quot;:&quot;1&quot;,&quot;csrf_token&quot;:&quot;&quot;&#125;;</span><br><span class="line">let key = generateRandomString(16);</span><br><span class="line">let encrypyResult = encryptMessage(message, &quot;0CoJUm6Qyw8W8jud&quot;)</span><br><span class="line">// console.log(encrypyResult)</span><br><span class="line">let encText = encryptMessage(encrypyResult, key)</span><br><span class="line">console.log(encText)</span><br></pre></td></tr></table></figure><h3 id="函数c"><a href="#函数c" class="headerlink" title="函数c"></a>函数c</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function c(a, b, c) &#123;</span><br><span class="line">        var d, e;</span><br><span class="line">        return setMaxDigits(131),</span><br><span class="line">        d = new RSAKeyPair(b,&quot;&quot;,c),</span><br><span class="line">        e = encryptedString(d, a)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>这段代码里面分别有三个函数，得把这三个函数给补全了</p><p>首先来补全setMaxDigits函数</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function setMaxDigits(a) &#123;</span><br><span class="line">    maxDigits = a,</span><br><span class="line">    ZERO_ARRAY = new Array(maxDigits);</span><br><span class="line">    for (var b = 0; b &lt; ZERO_ARRAY.length; b++)</span><br><span class="line">        ZERO_ARRAY[b] = 0;</span><br><span class="line">    bigZero = new BigInt,</span><br><span class="line">    bigOne = new BigInt,</span><br><span class="line">    bigOne.digits[0] = 1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里有一点需要注意一下，BigInt并不是JavaScript内置的类型，而是自定义的，因此我们需要找到它。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function BigInt(a) &#123;</span><br><span class="line">    this.digits = &quot;boolean&quot; == typeof a &amp;&amp; 1 == a ? null : ZERO_ARRAY.slice(0),</span><br><span class="line">    this.isNeg = !1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述两段代码的作用应该是用于做一些运算相关的动作。具体的事情我们也不必深究，接下来要做的事情就是将两个函数合并起来。修改后如下：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function BigInt(value) &#123;</span><br><span class="line">    let ZERO_ARRAY = new Array(maxDigits);</span><br><span class="line">    this.digits = &quot;boolean&quot; == typeof a &amp;&amp; 1 == value ? null : ZERO_ARRAY.slice(0),</span><br><span class="line">    this.isNeg = !1</span><br><span class="line">&#125;</span><br><span class="line">function setMaxDigits(value) &#123;</span><br><span class="line">    let maxDigits = value;</span><br><span class="line">    let ZERO_ARRAY = new Array(maxDigits);</span><br><span class="line">    for (let i = 0; i &lt; ZERO_ARRAY.length; i++) &#123;</span><br><span class="line">            ZERO_ARRAY[i] = 0;</span><br><span class="line">        &#125;</span><br><span class="line">    let bigZero = new BigInt(131); // 传递false代表我们希望初始化为0的BigInt对象</span><br><span class="line">    let bigOne = new BigInt(131);</span><br><span class="line">    bigOne.digits[0] = 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>紧接着分析RSAKeyPair函数</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function RSAKeyPair(a, b, c) &#123;</span><br><span class="line">    this.e = biFromHex(a),</span><br><span class="line">    this.d = biFromHex(b),</span><br><span class="line">    this.m = biFromHex(c),</span><br><span class="line">    this.chunkSize = 2 * biHighIndex(this.m),</span><br><span class="line">    this.radix = 16,</span><br><span class="line">    this.barrett = new BarrettMu(this.m)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>剩下的就不细说了，继续往前补全就行。。。。</p><h2 id="最终代码"><a href="#最终代码" class="headerlink" title="最终代码"></a>最终代码</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function get_post_data(i3x) &#123;</span><br><span class="line">    e = &#x27;010001&#x27;</span><br><span class="line">    f = &#x27;00e0b509f6259df8642dbc35662901477df22677ec152b5ff68ace615bb7b725152b3ab17a876aea8a5aa76d2e417629ec4ee341f56135fccf695280104e0312ecbda92557c93870114af6c9d05c4f7f0c3685b7a46bee255932575cce10b424d813cfe4875d3e82047b97ddef52741d546b8e289dc6935b3ece0462db0a22b8e7&#x27;</span><br><span class="line">    g = &#x27;0CoJUm6Qyw8W8jud&#x27;</span><br><span class="line">    return  bVg1x = asrsea(JSON.stringify(i3x), e, f, g);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let i3x = &#x27;&#123;&quot;rid&quot;:&quot;R_SO_4_2061978961&quot;,&quot;threadId&quot;:&quot;R_SO_4_2061978961&quot;,&quot;pageNo&quot;:&quot;1&quot;,&quot;pageSize&quot;:&quot;20&quot;,&quot;cursor&quot;:&quot;-1&quot;,&quot;offset&quot;:&quot;0&quot;,&quot;orderType&quot;:&quot;1&quot;,&quot;csrf_token&quot;:&quot;&quot;&#125;&#x27;;</span><br><span class="line">let result1 = get_post_data(i3x)</span><br><span class="line">console.log(result1)</span><br></pre></td></tr></table></figure><p><strong>python</strong></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> execjs</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> pprint</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&quot;authority&quot;</span>: <span class="string">&quot;music.xxx.com&quot;</span>,</span><br><span class="line">    <span class="string">&quot;accept&quot;</span>: <span class="string">&quot;*/*&quot;</span>,</span><br><span class="line">    <span class="string">&quot;accept-language&quot;</span>: <span class="string">&quot;zh-CN,zh;q=0.9&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cache-control&quot;</span>: <span class="string">&quot;no-cache&quot;</span>,</span><br><span class="line">    <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>,</span><br><span class="line">    <span class="string">&quot;origin&quot;</span>: <span class="string">&quot;https://music.xxx.com&quot;</span>,</span><br><span class="line">    <span class="string">&quot;pragma&quot;</span>: <span class="string">&quot;no-cache&quot;</span>,</span><br><span class="line">    <span class="string">&quot;referer&quot;</span>: <span class="string">&quot;https://music.xxx.com/outchain/player?type=2&amp;id=2051548110&amp;auto=1&amp;height=66&amp;bg=e8e8e8&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sec-ch-ua&quot;</span>: <span class="string">&quot;\&quot;Google Chrome\&quot;;v=\&quot;119\&quot;, \&quot;Chromium\&quot;;v=\&quot;119\&quot;, \&quot;Not?A_Brand\&quot;;v=\&quot;24\&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sec-ch-ua-mobile&quot;</span>: <span class="string">&quot;?0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sec-ch-ua-platform&quot;</span>: <span class="string">&quot;\&quot;Windows\&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sec-fetch-dest&quot;</span>: <span class="string">&quot;empty&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sec-fetch-mode&quot;</span>: <span class="string">&quot;cors&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sec-fetch-site&quot;</span>: <span class="string">&quot;same-origin&quot;</span>,</span><br><span class="line">    <span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">params = &#123;</span><br><span class="line">    <span class="string">&#x27;csrf_token&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;xzwy.js&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    js = f.read()</span><br><span class="line">cursor = <span class="built_in">int</span>(time.time() * <span class="number">1000</span>)</span><br><span class="line">i3x = &#123;<span class="string">&quot;rid&quot;</span>:<span class="string">&quot;R_SO_4_2061978961&quot;</span>,<span class="string">&quot;threadId&quot;</span>:<span class="string">&quot;R_SO_4_2061978961&quot;</span>,<span class="string">&quot;pageNo&quot;</span>:<span class="string">&quot;1&quot;</span>,<span class="string">&quot;pageSize&quot;</span>:<span class="string">&quot;20&quot;</span>,<span class="string">&quot;cursor&quot;</span>:<span class="string">f&quot;<span class="subst">&#123;cursor&#125;</span>&quot;</span>,<span class="string">&quot;offset&quot;</span>:<span class="string">&quot;0&quot;</span>,<span class="string">&quot;orderType&quot;</span>:<span class="string">&quot;1&quot;</span>,<span class="string">&quot;csrf_token&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br><span class="line"><span class="comment"># print(i3x)</span></span><br><span class="line">result = execjs.<span class="built_in">compile</span>(js).call(<span class="string">&#x27;get_post_data&#x27;</span>, i3x)</span><br><span class="line">encText = result.get(<span class="string">&#x27;encText&#x27;</span>)</span><br><span class="line">encSecKey = result.get(<span class="string">&#x27;encSecKey&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(encText)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(encSecKey))</span><br><span class="line"></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;params&#x27;</span>: encText,</span><br><span class="line">    <span class="string">&#x27;encSecKey&#x27;</span>: encSecKey,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">response = requests.post(</span><br><span class="line">    url=<span class="string">&#x27;xxx&#x27;</span>,</span><br><span class="line">    params=params,</span><br><span class="line">    headers=headers,</span><br><span class="line">    data=data</span><br><span class="line">)</span><br><span class="line"><span class="built_in">print</span>(response.status_code)</span><br><span class="line">pprint.pprint(response.json())</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071113594.png" alt="img"> </p><h1 id="JsRpc调用"><a href="#JsRpc调用" class="headerlink" title="JsRpc调用"></a>JsRpc调用</h1><p>可以看到，在后续定位到函数后，各种扣取代码，函数嵌套函数，为整个分析的过程带来了很大的麻烦。</p><p>那可不可以不扣取代码就实现获取评论的功能呢？</p><p>JSRPC刚好就可以实现该功能。</p><h2 id="加密函数参数分析"><a href="#加密函数参数分析" class="headerlink" title="加密函数参数分析"></a>加密函数参数分析</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">window.asrsea(JSON.stringify(i6c), bvl1x([&quot;流泪&quot;, &quot;强&quot;]), bvl1x(Rj5o.md), bvl1x([&quot;爱心&quot;, &quot;女孩&quot;, &quot;惊恐&quot;, &quot;大笑&quot;]));</span><br></pre></td></tr></table></figure><p>有4个参数：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">JSON.stringify(i6c) </span><br><span class="line">bvl1x([&quot;流泪&quot;, &quot;强&quot;])</span><br><span class="line">bvl1x(Rj5o.md)</span><br><span class="line">bvl1x([&quot;爱心&quot;, &quot;女孩&quot;, &quot;惊恐&quot;, &quot;大笑&quot;])</span><br></pre></td></tr></table></figure><p>上面4个参数，对应某次的请求的值，分别如下</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#x27;&#123;&quot;rid&quot;:&quot;R_SO_4_2061978961&quot;,&quot;threadId&quot;:&quot;R_SO_4_2061978961&quot;,&quot;pageNo&quot;:&quot;4&quot;,&quot;pageSize&quot;:&quot;20&quot;,&quot;cursor&quot;:&quot;1713198658380&quot;,&quot;offset&quot;:&quot;0&quot;,&quot;orderType&quot;:&quot;1&quot;,&quot;csrf_token&quot;:&quot;&quot;&#125;&#x27;</span><br><span class="line">&#x27;010001&#x27;</span><br><span class="line">&#x27;00e0b509f6259df8642dbc35662901477df22677ec152b5ff68ace615bb7b725152b3ab17a876aea8a5aa76d2e417629ec4ee341f56135fccf695280104e0312ecbda92557c93870114af6c9d05c4f7f0c3685b7a46bee255932575cce10b424d813cfe4875d3e82047b97ddef52741d546b8e289dc6935b3ece0462db0a22b8e7&#x27;</span><br><span class="line">&#x27;0CoJUm6Qyw8W8jud&#x27;</span><br></pre></td></tr></table></figure><p>可以看到后三个参数是先调用了<strong>bvl1x方法</strong>的，所以在hook加密函数之前，要先对他进行hook。</p><p>（貌似这后三个值不会变化，可以写死，但这块为了验证RPC，还是借用他来实现）</p><h3 id="bvl1x方法"><a href="#bvl1x方法" class="headerlink" title="bvl1x方法"></a>bvl1x方法</h3><p>1、定义全局导出函数</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">window.p = bvl1x</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071117151.png" alt="image.png"> </p><p>2、配置RPC环境</p><p>（1）注入JSenv环境</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071117201.png" alt="img"> </p><p>（2）运行exe，浏览器（客户端）和 本地（服务端）建立连接</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071118893.png" alt="image.png"> </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 注入环境后连接通信</span><br><span class="line">var demo = new Hlclient(&quot;ws://127.0.0.1:12080/ws?group=zzz&amp;name=hlg&quot;);</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071118594.png" alt="image.png"> </p><p>3、在前端注入JS代码</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hlg1</span>(<span class="params">data1</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">p</span>(data1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">demo.<span class="title function_">regAction</span>(<span class="string">&quot;hacker1&quot;</span>, <span class="keyword">function</span> (<span class="params">resolve,param</span>)&#123;</span><br><span class="line">  res=<span class="title function_">hlg1</span>(param[<span class="string">&quot;data1&quot;</span>]);</span><br><span class="line">  <span class="title function_">resolve</span>(res);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071118541.png" alt="image.png"> </p><p>4、python脚本如下：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> jsonpath</span><br><span class="line"></span><br><span class="line">jscode1 = <span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">(function()&#123;</span></span><br><span class="line"><span class="string">    s = p([&quot;</span>流泪<span class="string">&quot;, &quot;</span>强<span class="string">&quot;]);</span></span><br><span class="line"><span class="string">    return s</span></span><br><span class="line"><span class="string">&#125;)()</span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">jscode2 = <span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">(function()&#123;</span></span><br><span class="line"><span class="string">    var Rj5o_md = [&quot;</span>色<span class="string">&quot;, &quot;</span>流感<span class="string">&quot;, &quot;</span>这边<span class="string">&quot;, &quot;</span>弱<span class="string">&quot;, &quot;</span>嘴唇<span class="string">&quot;, &quot;</span>亲<span class="string">&quot;, &quot;</span>开心<span class="string">&quot;, &quot;</span>呲牙<span class="string">&quot;, &quot;</span>憨笑<span class="string">&quot;, &quot;</span>猫<span class="string">&quot;, &quot;</span>皱眉<span class="string">&quot;, &quot;</span>幽灵<span class="string">&quot;, &quot;</span>蛋糕<span class="string">&quot;, &quot;</span>发怒<span class="string">&quot;, &quot;</span>大哭<span class="string">&quot;, &quot;</span>兔子<span class="string">&quot;, &quot;</span>星星<span class="string">&quot;, &quot;</span>钟情<span class="string">&quot;, &quot;</span>牵手<span class="string">&quot;, &quot;</span>公鸡<span class="string">&quot;, &quot;</span>爱意<span class="string">&quot;, &quot;</span>禁止<span class="string">&quot;, &quot;</span>狗<span class="string">&quot;, &quot;</span>亲亲<span class="string">&quot;, &quot;</span>叉<span class="string">&quot;, &quot;</span>礼物<span class="string">&quot;, &quot;</span>晕<span class="string">&quot;, &quot;</span>呆<span class="string">&quot;, &quot;</span>生病<span class="string">&quot;, &quot;</span>钻石<span class="string">&quot;, &quot;</span>拜<span class="string">&quot;, &quot;</span>怒<span class="string">&quot;, &quot;</span>示爱<span class="string">&quot;, &quot;</span>汗<span class="string">&quot;, &quot;</span>小鸡<span class="string">&quot;, &quot;</span>痛苦<span class="string">&quot;, &quot;</span>撇嘴<span class="string">&quot;, &quot;</span>惶恐<span class="string">&quot;, &quot;</span>口罩<span class="string">&quot;, &quot;</span>吐舌<span class="string">&quot;, &quot;</span>心碎<span class="string">&quot;, &quot;</span>生气<span class="string">&quot;, &quot;</span>可爱<span class="string">&quot;, &quot;</span>鬼脸<span class="string">&quot;, &quot;</span>跳舞<span class="string">&quot;, &quot;</span>男孩<span class="string">&quot;, &quot;</span>奸笑<span class="string">&quot;, &quot;</span>猪<span class="string">&quot;, &quot;</span>圈<span class="string">&quot;, &quot;</span>便便<span class="string">&quot;, &quot;</span>外星<span class="string">&quot;, &quot;</span>圣诞<span class="string">&quot;]</span></span><br><span class="line"><span class="string">    s = p(Rj5o_md);</span></span><br><span class="line"><span class="string">    return s</span></span><br><span class="line"><span class="string">&#125;)()</span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">jscode3 = <span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">(function()&#123;</span></span><br><span class="line"><span class="string">    s = p([&quot;</span>爱心<span class="string">&quot;, &quot;</span>女孩<span class="string">&quot;, &quot;</span>惊恐<span class="string">&quot;, &quot;</span>大笑<span class="string">&quot;]);</span></span><br><span class="line"><span class="string">    return s</span></span><br><span class="line"><span class="string">&#125;)()</span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://localhost:12080/execjs&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def <span class="title function_">des_enc</span>():</span><br><span class="line">    data1 = &#123;</span><br><span class="line">        <span class="string">&quot;group&quot;</span>: <span class="string">&quot;zzz&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;hlg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;action&quot;</span>: <span class="string">&quot;hacker1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;jscode&quot;</span>: jscode1</span><br><span class="line">    &#125;</span><br><span class="line">    res1 = requests.<span class="title function_">post</span>(url, data=data1)</span><br><span class="line">    <span class="title function_">print</span>(res1.<span class="property">text</span>)</span><br><span class="line"></span><br><span class="line">    data2 = &#123;</span><br><span class="line">        <span class="string">&quot;group&quot;</span>: <span class="string">&quot;zzz&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;hlg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;action&quot;</span>: <span class="string">&quot;hacker1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;jscode&quot;</span>: jscode2</span><br><span class="line">    &#125;</span><br><span class="line">    res2 = requests.<span class="title function_">post</span>(url, data=data2)</span><br><span class="line">    <span class="title function_">print</span>(res2.<span class="property">text</span>)</span><br><span class="line"></span><br><span class="line">    data3 = &#123;</span><br><span class="line">        <span class="string">&quot;group&quot;</span>: <span class="string">&quot;zzz&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;hlg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;action&quot;</span>: <span class="string">&quot;hacker1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;jscode&quot;</span>: jscode3</span><br><span class="line">    &#125;</span><br><span class="line">    res3 = requests.<span class="title function_">post</span>(url, data=data3)</span><br><span class="line">    <span class="title function_">print</span>(res3.<span class="property">text</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">des_enc</span>()</span><br></pre></td></tr></table></figure><p> 运行后，获得三个参数的值。<img src="https://cdn.nlark.com/yuque/0/2024/png/2167914/1713257229122-ed7036e6-5a86-43b5-ad3e-8cc13efeb688.png" alt="img"></p><h2 id="加密函数调用"><a href="#加密函数调用" class="headerlink" title="加密函数调用"></a>加密函数调用</h2><p>1、前端注入JS代码</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hlg2</span>(<span class="params">data2</span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> param2 = <span class="string">&quot;010001&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> param3 = <span class="string">&quot;00e0b509f6259df8642dbc35662901477df22677ec152b5ff68ace615bb7b725152b3ab17a876aea8a5aa76d2e417629ec4ee341f56135fccf695280104e0312ecbda92557c93870114af6c9d05c4f7f0c3685b7a46bee255932575cce10b424d813cfe4875d3e82047b97ddef52741d546b8e289dc6935b3ece0462db0a22b8e7&quot;</span></span><br><span class="line">  <span class="keyword">var</span> param4 = <span class="string">&quot;0CoJUm6Qyw8W8jud&quot;</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">asrsea</span>(data2,param2,param3,param4))</span><br><span class="line">  obj = <span class="title function_">asrsea</span>(data2,param2,param3,param4)</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">demo.<span class="title function_">regAction</span>(<span class="string">&quot;hacker2&quot;</span>, <span class="keyword">function</span> (<span class="params">resolve,param</span>)&#123;</span><br><span class="line">  res=<span class="title function_">hlg2</span>(param[<span class="string">&quot;data2&quot;</span>]);</span><br><span class="line">  <span class="title function_">resolve</span>(res);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071117273.png" alt="img"> </p><p>2、python脚本如下</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">param1 = <span class="string">&#x27;&#123;&quot;rid&quot;:&quot;R_SO_4_2061978961&quot;,&quot;threadId&quot;:&quot;R_SO_4_2061978961&quot;,&quot;pageNo&quot;:&quot;4&quot;,&quot;pageSize&quot;:&quot;20&quot;,&quot;cursor&quot;:&quot;1713198658380&quot;,&quot;offset&quot;:&quot;0&quot;,&quot;orderType&quot;:&quot;1&quot;,&quot;csrf_token&quot;:&quot;&quot;&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://localhost:12080/go&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def <span class="title function_">enc</span>():</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&quot;group&quot;</span>: <span class="string">&quot;zzz&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;hlg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;action&quot;</span>: <span class="string">&quot;hacker2&quot;</span>,</span><br><span class="line">        <span class="string">&quot;param&quot;</span>: json.<span class="title function_">dumps</span>(&#123;<span class="string">&quot;data2&quot;</span>: param1&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    res = requests.<span class="title function_">post</span>(url, data=data)</span><br><span class="line">    <span class="keyword">return</span> json.<span class="title function_">loads</span>(res.<span class="property">text</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">print</span>(<span class="title function_">enc</span>())</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071118130.png" alt="image.png"> </p><p>3、但上面代码是在前端中将参数写死的，这块可以动态调用Python脚本中计算的值。</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hlg2</span>(<span class="params">data2,param2,param3,param4</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">asrsea</span>(data2,param2,param3,param4))</span><br><span class="line">  obj = <span class="title function_">asrsea</span>(data2,param2,param3,param4)</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">demo.<span class="title function_">regAction</span>(<span class="string">&quot;hacker2&quot;</span>, <span class="keyword">function</span> (<span class="params">resolve,param</span>)&#123;</span><br><span class="line">  res=<span class="title function_">hlg2</span>(param[<span class="string">&quot;data2&quot;</span>],param[<span class="string">&quot;param2&quot;</span>],param[<span class="string">&quot;param3&quot;</span>],param[<span class="string">&quot;param4&quot;</span>]);</span><br><span class="line">  <span class="title function_">resolve</span>(res);</span><br><span class="line">&#125;)</span><br><span class="line">def <span class="title function_">enc</span>():</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&quot;group&quot;</span>: <span class="string">&quot;zzz&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;hlg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;action&quot;</span>: <span class="string">&quot;hacker2&quot;</span>,</span><br><span class="line">        <span class="string">&quot;param&quot;</span>: json.<span class="title function_">dumps</span>(&#123;<span class="string">&quot;data2&quot;</span>: param1, <span class="string">&quot;param2&quot;</span>: param2, <span class="string">&quot;param3&quot;</span>: param3, <span class="string">&quot;param4&quot;</span>: param4&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    res = requests.<span class="title function_">post</span>(url, data=data)</span><br><span class="line">    <span class="keyword">return</span> json.<span class="title function_">loads</span>(res.<span class="property">text</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">print</span>(<span class="title function_">enc</span>())</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2167914/1713261612399-d6afa6d9-a91e-47b0-ad2a-3eaaf955d680.png" alt="img"></p><h2 id="完整代码："><a href="#完整代码：" class="headerlink" title="完整代码："></a>完整代码：</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">jscode1 = <span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">(function()&#123;</span></span><br><span class="line"><span class="string">    s = p([&quot;</span>流泪<span class="string">&quot;, &quot;</span>强<span class="string">&quot;]);</span></span><br><span class="line"><span class="string">    return s</span></span><br><span class="line"><span class="string">&#125;)()</span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">jscode2 = <span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">(function()&#123;</span></span><br><span class="line"><span class="string">    var Rj5o_md = [&quot;</span>色<span class="string">&quot;, &quot;</span>流感<span class="string">&quot;, &quot;</span>这边<span class="string">&quot;, &quot;</span>弱<span class="string">&quot;, &quot;</span>嘴唇<span class="string">&quot;, &quot;</span>亲<span class="string">&quot;, &quot;</span>开心<span class="string">&quot;, &quot;</span>呲牙<span class="string">&quot;, &quot;</span>憨笑<span class="string">&quot;, &quot;</span>猫<span class="string">&quot;, &quot;</span>皱眉<span class="string">&quot;, &quot;</span>幽灵<span class="string">&quot;, &quot;</span>蛋糕<span class="string">&quot;, &quot;</span>发怒<span class="string">&quot;, &quot;</span>大哭<span class="string">&quot;, &quot;</span>兔子<span class="string">&quot;, &quot;</span>星星<span class="string">&quot;, &quot;</span>钟情<span class="string">&quot;, &quot;</span>牵手<span class="string">&quot;, &quot;</span>公鸡<span class="string">&quot;, &quot;</span>爱意<span class="string">&quot;, &quot;</span>禁止<span class="string">&quot;, &quot;</span>狗<span class="string">&quot;, &quot;</span>亲亲<span class="string">&quot;, &quot;</span>叉<span class="string">&quot;, &quot;</span>礼物<span class="string">&quot;, &quot;</span>晕<span class="string">&quot;, &quot;</span>呆<span class="string">&quot;, &quot;</span>生病<span class="string">&quot;, &quot;</span>钻石<span class="string">&quot;, &quot;</span>拜<span class="string">&quot;, &quot;</span>怒<span class="string">&quot;, &quot;</span>示爱<span class="string">&quot;, &quot;</span>汗<span class="string">&quot;, &quot;</span>小鸡<span class="string">&quot;, &quot;</span>痛苦<span class="string">&quot;, &quot;</span>撇嘴<span class="string">&quot;, &quot;</span>惶恐<span class="string">&quot;, &quot;</span>口罩<span class="string">&quot;, &quot;</span>吐舌<span class="string">&quot;, &quot;</span>心碎<span class="string">&quot;, &quot;</span>生气<span class="string">&quot;, &quot;</span>可爱<span class="string">&quot;, &quot;</span>鬼脸<span class="string">&quot;, &quot;</span>跳舞<span class="string">&quot;, &quot;</span>男孩<span class="string">&quot;, &quot;</span>奸笑<span class="string">&quot;, &quot;</span>猪<span class="string">&quot;, &quot;</span>圈<span class="string">&quot;, &quot;</span>便便<span class="string">&quot;, &quot;</span>外星<span class="string">&quot;, &quot;</span>圣诞<span class="string">&quot;]</span></span><br><span class="line"><span class="string">    s = p(Rj5o_md);</span></span><br><span class="line"><span class="string">    return s</span></span><br><span class="line"><span class="string">&#125;)()</span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">jscode3 = <span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">(function()&#123;</span></span><br><span class="line"><span class="string">    s = p([&quot;</span>爱心<span class="string">&quot;, &quot;</span>女孩<span class="string">&quot;, &quot;</span>惊恐<span class="string">&quot;, &quot;</span>大笑<span class="string">&quot;]);</span></span><br><span class="line"><span class="string">    return s</span></span><br><span class="line"><span class="string">&#125;)()</span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://localhost:12080/execjs&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def <span class="title function_">des_enc</span>():</span><br><span class="line">    data1 = &#123;</span><br><span class="line">        <span class="string">&quot;group&quot;</span>: <span class="string">&quot;zzz&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;hlg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;action&quot;</span>: <span class="string">&quot;hacker1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;jscode&quot;</span>: jscode1</span><br><span class="line">    &#125;</span><br><span class="line">    res1 = requests.<span class="title function_">post</span>(url, data=data1)</span><br><span class="line"></span><br><span class="line">    data2 = &#123;</span><br><span class="line">        <span class="string">&quot;group&quot;</span>: <span class="string">&quot;zzz&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;hlg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;action&quot;</span>: <span class="string">&quot;hacker1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;jscode&quot;</span>: jscode2</span><br><span class="line">    &#125;</span><br><span class="line">    res2 = requests.<span class="title function_">post</span>(url, data=data2)</span><br><span class="line"></span><br><span class="line">    data3 = &#123;</span><br><span class="line">        <span class="string">&quot;group&quot;</span>: <span class="string">&quot;zzz&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;hlg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;action&quot;</span>: <span class="string">&quot;hacker1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;jscode&quot;</span>: jscode3</span><br><span class="line">    &#125;</span><br><span class="line">    res3 = requests.<span class="title function_">post</span>(url, data=data3)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res1, res2, res3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">res1, res2, res3 = <span class="title function_">des_enc</span>()</span><br><span class="line">param2 = json.<span class="title function_">loads</span>(res1.<span class="property">text</span>)[<span class="string">&#x27;data&#x27;</span>]</span><br><span class="line">param3 = json.<span class="title function_">loads</span>(res2.<span class="property">text</span>)[<span class="string">&#x27;data&#x27;</span>]</span><br><span class="line">param4 = json.<span class="title function_">loads</span>(res3.<span class="property">text</span>)[<span class="string">&#x27;data&#x27;</span>]</span><br><span class="line"></span><br><span class="line">param1 = <span class="string">&#x27;&#123;&quot;rid&quot;:&quot;R_SO_4_2061978961&quot;,&quot;threadId&quot;:&quot;R_SO_4_2061978961&quot;,&quot;pageNo&quot;:&quot;4&quot;,&quot;pageSize&quot;:&quot;20&quot;,&quot;cursor&quot;:&quot;1713198658380&quot;,&quot;offset&quot;:&quot;0&quot;,&quot;orderType&quot;:&quot;1&quot;,&quot;csrf_token&quot;:&quot;&quot;&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://localhost:12080/go&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def <span class="title function_">enc</span>():</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&quot;group&quot;</span>: <span class="string">&quot;zzz&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;hlg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;action&quot;</span>: <span class="string">&quot;hacker2&quot;</span>,</span><br><span class="line">        <span class="string">&quot;param&quot;</span>: json.<span class="title function_">dumps</span>(&#123;<span class="string">&quot;data2&quot;</span>: param1, <span class="string">&quot;param2&quot;</span>: param2, <span class="string">&quot;param3&quot;</span>: param3, <span class="string">&quot;param4&quot;</span>: param4&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    res = requests.<span class="title function_">post</span>(url, data=data)</span><br><span class="line">    <span class="keyword">return</span> json.<span class="title function_">loads</span>(res.<span class="property">text</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">print</span>(<span class="title function_">enc</span>())</span><br></pre></td></tr></table></figure><h1 id="autodecoder联动"><a href="#autodecoder联动" class="headerlink" title="autodecoder联动"></a>autodecoder联动</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">加密函数：</span><br><span class="line"><span class="keyword">var</span> bKL3x = <span class="variable language_">window</span>.<span class="title function_">asrsea</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(i1x), <span class="title function_">bvl3x</span>([<span class="string">&quot;流泪&quot;</span>, <span class="string">&quot;强&quot;</span>]), <span class="title function_">bvl3x</span>(<span class="title class_">Rj6</span>d.<span class="property">md</span>), <span class="title function_">bvl3x</span>([<span class="string">&quot;爱心&quot;</span>, <span class="string">&quot;女孩&quot;</span>, <span class="string">&quot;惊恐&quot;</span>, <span class="string">&quot;大笑&quot;</span>]));</span><br></pre></td></tr></table></figure><p>1、前端注入的JS进行参数调用，可以修改为：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">bvl3x</span> = bvl3x</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">Rj6d_md</span> = [<span class="string">&quot;色&quot;</span>, <span class="string">&quot;流感&quot;</span>, <span class="string">&quot;这边&quot;</span>, <span class="string">&quot;弱&quot;</span>, <span class="string">&quot;嘴唇&quot;</span>, <span class="string">&quot;亲&quot;</span>, <span class="string">&quot;开心&quot;</span>, <span class="string">&quot;呲牙&quot;</span>, <span class="string">&quot;憨笑&quot;</span>, <span class="string">&quot;猫&quot;</span>, <span class="string">&quot;皱眉&quot;</span>, <span class="string">&quot;幽灵&quot;</span>, <span class="string">&quot;蛋糕&quot;</span>, <span class="string">&quot;发怒&quot;</span>, <span class="string">&quot;大哭&quot;</span>, <span class="string">&quot;兔子&quot;</span>, <span class="string">&quot;星星&quot;</span>, <span class="string">&quot;钟情&quot;</span>, <span class="string">&quot;牵手&quot;</span>, <span class="string">&quot;公鸡&quot;</span>, <span class="string">&quot;爱意&quot;</span>, <span class="string">&quot;禁止&quot;</span>, <span class="string">&quot;狗&quot;</span>, <span class="string">&quot;亲亲&quot;</span>, <span class="string">&quot;叉&quot;</span>, <span class="string">&quot;礼物&quot;</span>, <span class="string">&quot;晕&quot;</span>, <span class="string">&quot;呆&quot;</span>, <span class="string">&quot;生病&quot;</span>, <span class="string">&quot;钻石&quot;</span>, <span class="string">&quot;拜&quot;</span>, <span class="string">&quot;怒&quot;</span>, <span class="string">&quot;示爱&quot;</span>, <span class="string">&quot;汗&quot;</span>, <span class="string">&quot;小鸡&quot;</span>, <span class="string">&quot;痛苦&quot;</span>, <span class="string">&quot;撇嘴&quot;</span>, <span class="string">&quot;惶恐&quot;</span>, <span class="string">&quot;口罩&quot;</span>, <span class="string">&quot;吐舌&quot;</span>, <span class="string">&quot;心碎&quot;</span>, <span class="string">&quot;生气&quot;</span>, <span class="string">&quot;可爱&quot;</span>, <span class="string">&quot;鬼脸&quot;</span>, <span class="string">&quot;跳舞&quot;</span>, <span class="string">&quot;男孩&quot;</span>, <span class="string">&quot;奸笑&quot;</span>, <span class="string">&quot;猪&quot;</span>, <span class="string">&quot;圈&quot;</span>, <span class="string">&quot;便便&quot;</span>, <span class="string">&quot;外星&quot;</span>, <span class="string">&quot;圣诞&quot;</span>]</span><br><span class="line">demo.<span class="title function_">regAction</span>(<span class="string">&quot;enc&quot;</span>, <span class="keyword">function</span> (<span class="params">resolve,param</span>)&#123;</span><br><span class="line">  res=<span class="title function_">asrsea</span>(param,<span class="title function_">bvl3x</span>([<span class="string">&quot;流泪&quot;</span>, <span class="string">&quot;强&quot;</span>]), <span class="title function_">bvl3x</span>(<span class="title class_">Rj6</span>d_md), <span class="title function_">bvl3x</span>([<span class="string">&quot;爱心&quot;</span>, <span class="string">&quot;女孩&quot;</span>, <span class="string">&quot;惊恐&quot;</span>, <span class="string">&quot;大笑&quot;</span>]));</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="string">&quot;params=&quot;</span>+<span class="built_in">encodeURIComponent</span>(res.<span class="property">encText</span>)+<span class="string">&quot;&amp;encSecKey=&quot;</span>+res.<span class="property">encSecKey</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>2、Python代码也可以修改如下：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">param = <span class="string">&#x27;&#123;&quot;rid&quot;:&quot;R_SO_4_2061978961&quot;,&quot;threadId&quot;:&quot;R_SO_4_2061978961&quot;,&quot;pageNo&quot;:&quot;4&quot;,&quot;pageSize&quot;:&quot;20&quot;,&quot;cursor&quot;:&quot;1713198658380&quot;,&quot;offset&quot;:&quot;0&quot;,&quot;orderType&quot;:&quot;1&quot;,&quot;csrf_token&quot;:&quot;&quot;&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://localhost:12080/go&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def <span class="title function_">enc</span>():</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&quot;group&quot;</span>: <span class="string">&quot;zzz&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;hlg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;action&quot;</span>: <span class="string">&quot;enc&quot;</span>,</span><br><span class="line">        <span class="string">&quot;param&quot;</span>: json.<span class="title function_">dumps</span>(param)</span><br><span class="line">    &#125;</span><br><span class="line">    res = requests.<span class="title function_">post</span>(url, data=data)</span><br><span class="line">    <span class="keyword">return</span> json.<span class="title function_">loads</span>(res.<span class="property">text</span>)[<span class="string">&quot;data&quot;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">print</span>(<span class="title function_">enc</span>())</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071119854.png" alt="image.png"> </p><p>3、autodecoder代码</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> <span class="title class_">Flask</span>, request</span><br><span class="line"></span><br><span class="line">app = <span class="title class_">Flask</span>(__name__)</span><br><span class="line">url = <span class="string">&quot;http://localhost:12080/go&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@app.<span class="title function_">route</span>(<span class="string">&#x27;/decode&#x27;</span>, methods=[<span class="string">&quot;POST&quot;</span>])</span><br><span class="line">def <span class="title function_">decrypt</span>():</span><br><span class="line">    param = request.<span class="property">form</span>.<span class="title function_">get</span>(<span class="string">&#x27;dataBody&#x27;</span>)  # 获取  post 参数</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&quot;group&quot;</span>: <span class="string">&quot;zzz&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;hlg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;action&quot;</span>: <span class="string">&quot;enc&quot;</span>,</span><br><span class="line">        <span class="string">&quot;param&quot;</span>: json.<span class="title function_">dumps</span>(param)</span><br><span class="line">    &#125;</span><br><span class="line">    res = requests.<span class="title function_">post</span>(url, data=data)  # 这里换get也是可以的</span><br><span class="line"></span><br><span class="line">    encry_param = json.<span class="title function_">loads</span>(res.<span class="property">text</span>)[<span class="string">&#x27;data&#x27;</span>]</span><br><span class="line">    <span class="title function_">print</span>(<span class="string">&quot;param:&quot;</span>, json.<span class="title function_">dumps</span>(param))</span><br><span class="line">    <span class="title function_">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">200</span>)</span><br><span class="line">    <span class="title function_">print</span>(<span class="string">&quot;encry_param:&quot;</span>,encry_param)</span><br><span class="line">    <span class="keyword">return</span> encry_param</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@app.<span class="title function_">route</span>(<span class="string">&#x27;/encode&#x27;</span>, methods=[<span class="string">&quot;POST&quot;</span>])</span><br><span class="line">def <span class="title function_">encrypt</span>():</span><br><span class="line">    param = request.<span class="property">form</span>.<span class="title function_">get</span>(<span class="string">&#x27;dataBody&#x27;</span>)  # 获取  post 参数</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> param</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.<span class="property">debug</span> = <span class="title class_">True</span>  # 设置调试模式，生产模式的时候要关掉debug</span><br><span class="line">    app.<span class="title function_">run</span>(host=<span class="string">&quot;0.0.0.0&quot;</span>, port=<span class="string">&quot;8888&quot;</span>)</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071117344.png" alt="img"> </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405071117365.png" alt="img"> </p>]]></content>
      
      
      <categories>
          
          <category> 渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JsRpc </tag>
            
            <tag> 加解密 </tag>
            
            <tag> autodecoder </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JsRpc:提升前端渗透测试效率</title>
      <link href="/2024/05/06/JsRpc-%E6%8F%90%E5%8D%87%E5%89%8D%E7%AB%AF%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%95%88%E7%8E%87/"/>
      <url>/2024/05/06/JsRpc-%E6%8F%90%E5%8D%87%E5%89%8D%E7%AB%AF%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%95%88%E7%8E%87/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Rpc概述"><a href="#Rpc概述" class="headerlink" title="Rpc概述"></a>Rpc概述</h1><h2 id="什么是RPC"><a href="#什么是RPC" class="headerlink" title="什么是RPC"></a>什么是RPC</h2><p>全称 Remote Procedure Call——远程过程调用。</p><p>在网站的控制台新建一个WebScoket客户端链接到服务器通信，调用服务器的接口 服务器会发送信息给客户端</p><p>客户端接收到要执行的方法执行完js代码后把获得想要的内容发回给服务器 服务器接收到后再显示出来</p><p><strong>在js加密中JsRPC有什么作用？</strong></p><p>比如在访问网站时，我们想直接替换参数，查看有无sql注入或者想枚举密码、挖掘逻辑漏洞替换参数。但是发现参数值是加密的。此时，阅读js代码、补环境很费时费力。上手难度较大。</p><p>这时候就可以使用JsRPC。</p><p>RPC的优点：免去扣取代码和补环境的步骤。。。</p><h2 id="基本流程"><a href="#基本流程" class="headerlink" title="基本流程"></a>基本流程</h2><p>用户找到加密函数的位置【最重要】</p><p>在浏览器的console中输入env.js（包中自带的）</p><p>cmd中运行jsrpc程序</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061630850.png" alt="image-20240506163047789"> </p><h1 id="工具介绍"><a href="#工具介绍" class="headerlink" title="工具介绍"></a>工具介绍</h1><p>下载地址</p><p><a href="https://github.com/jxhczhl/JsRpc">https://github.com/jxhczhl/JsRpc</a></p><h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- main.go (服务器的主代码)</span><br><span class="line">-- resouces/JsEnv_Dev.js (客户端注入js环境)</span><br></pre></td></tr></table></figure><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>运行服务器程序和js脚本 即可让它们通信，实现调用接口执行js获取想要的值(加解密)</p><h2 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h2><p>原理：在网站的控制台新建一个WebScoket客户端链接到服务器通信，调用服务器的接口 服务器会发送信息给客户端 客户端接收到要执行的方法执行完js代码后把获得想要的内容发回给服务器 服务器接收到后再显示出来</p><p>【说明】本方法可以https证书且支持wss</p><p>在https的网站想要新建WebSocket连接如果是连接到普通的ws会报安全错误，连接本地(127.0.0.1)不会报错~ 可以用本地和wss 你自己看着玩</p><ol><li>无https证书者。直接编译main.go 使用本地ip(127.0.0.1)可以在https的网站直接连接ws使用 默认端口12080</li><li>有https证书者。修改main.go文件 把r.Run()注释掉，把r.RunTls注释取消掉 并且参数设置证书的路径 直接输入名字就是当前路径 默认端口：12443</li></ol><h1 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h1><p>1、打开编译好的文件，开启服务release下载，如下图所示：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061642614.png" alt="image.png"> </p><p><strong>api简介</strong>：</p><ul><li>&#x2F;list：查看当前连接的ws服务（get）</li><li>&#x2F;ws：浏览器注入ws连接的端口（ws|wss）</li><li>&#x2F;wst：ws测试使用，发啥回啥（ws|wss）</li><li>&#x2F;go：获取数据的接口（get|post）</li><li>&#x2F;execjs：传递jscode给浏览器执行（get|post）</li></ul><p>说明：接口用?group和name来区分任务，如”ws:&#x2F;&#x2F;127.0.0.1:1280&#x2F;ws?group&#x3D;{}&amp;name&#x3D;{}”&#x2F;&#x2F;注入ws的例子 group和name都可以随便起名(必填) <a href="http://127.0.0.1:12080/go?group=%7B%7D&name=%7B%7D&action=%7B%7D&param=%7B%7D">http://127.0.0.1:12080/go?group={}&amp;name={}&amp;action={}&amp;param={}</a> &#x2F;&#x2F;这是调用的接口 group和name填写上面注入时候的，action是注册的方法名,param是可选的参数 接口参数暂定为这几个，但是param还可以传stringify过的json(字符串) 下面会介绍。</p><p>2、注入JS，构建通信环境（&#x2F;resource&#x2F;JsEnv.js）</p><p>打开JsEnv 复制粘贴到网站控制台(注意：可以在浏览器开启的时候就先注入环境，不然要放开调试断点才能注入)</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061644138.png" alt="image.png"> </p><p>3、连接通信</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 注入环境后连接通信</span><br><span class="line">var demo = new Hlclient(&quot;ws://127.0.0.1:12080/ws?group=zzz&amp;name=hlg&quot;);</span><br></pre></td></tr></table></figure><h2 id="I-远程调用0"><a href="#I-远程调用0" class="headerlink" title="I 远程调用0"></a>I 远程调用0</h2><p><strong>接口传入JS代码让浏览器执行</strong></p><p>浏览器已经连接上通信后 调用execjs接口就行</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">jscode = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">(function()&#123;</span></span><br><span class="line"><span class="string">    console.log(&quot;test&quot;)</span></span><br><span class="line"><span class="string">    return &quot;执行成功&quot;</span></span><br><span class="line"><span class="string">&#125;)()</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://localhost:12080/execjs&quot;</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&quot;group&quot;</span>: <span class="string">&quot;zzz&quot;</span>,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;hlg&quot;</span>,</span><br><span class="line">    <span class="string">&quot;jscode&quot;</span>:jscode</span><br><span class="line">&#125;</span><br><span class="line">res = requests.post(url, data=data)</span><br><span class="line"><span class="built_in">print</span>(res.text)</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061646342.png" alt="image.png"> </p><h2 id="II-远程调用：浏览器预先注册JS方法-传递函数名调用"><a href="#II-远程调用：浏览器预先注册JS方法-传递函数名调用" class="headerlink" title="II 远程调用：浏览器预先注册JS方法 传递函数名调用"></a>II 远程调用：浏览器预先注册JS方法 传递函数名调用</h2><p><strong>远程调用1：无参获取值</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 注册一个方法 第一个参数hello为方法名，</span></span><br><span class="line"><span class="comment">// 第二个参数为函数，resolve里面的值是想要的值(发送到服务器的)</span></span><br><span class="line">demo.<span class="title function_">regAction</span>(<span class="string">&quot;hello&quot;</span>, <span class="keyword">function</span> (<span class="params">resolve</span>) &#123;</span><br><span class="line">    <span class="comment">//这样每次调用就会返回“好困啊+随机整数”</span></span><br><span class="line">    <span class="keyword">var</span> <span class="title class_">Js</span>_sjz = <span class="string">&quot;好困啊&quot;</span>+<span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">1000</span>);</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="title class_">Js</span>_sjz);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步的代码注册：</span></span><br><span class="line">demo.<span class="title function_">regAction</span>(<span class="string">&#x27;token&#x27;</span>, <span class="keyword">async</span> (resolve) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> token = <span class="keyword">await</span> grecaptcha.<span class="title function_">execute</span>(<span class="number">0</span>, &#123; <span class="attr">action</span>: <span class="string">&#x27;&#x27;</span> &#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">token</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> token</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="title function_">resolve</span>(token);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>访问接口，获得js端的返回值<br><a href="http://localhost:12080/go?group=zzz&name=hlg&action=hello">http://localhost:12080/go?group=zzz&amp;name=hlg&amp;action=hello</a></p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061647609.png" alt="image.png"> </p><p><strong>远程调用2：带参数值获取</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//写一个传入字符串，返回base64值的接口(调用内置函数btoa)</span></span><br><span class="line">demo.<span class="title function_">regAction</span>(<span class="string">&quot;hello2&quot;</span>, <span class="keyword">function</span> (<span class="params">resolve,param</span>) &#123;</span><br><span class="line">    <span class="comment">//这样添加了一个param参数，http接口带上它，这里就能获得</span></span><br><span class="line">    <span class="keyword">var</span> base666 = <span class="title function_">btoa</span>(param)</span><br><span class="line">    <span class="title function_">resolve</span>(base666);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>访问接口，获得JS的返回值。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061707111.png" alt="image-20240506170759046"> </p><h2 id="远程调用3：带多个参获-并且使用post方式-取值"><a href="#远程调用3：带多个参获-并且使用post方式-取值" class="headerlink" title="远程调用3：带多个参获 并且使用post方式 取值"></a>远程调用3：带多个参获 并且使用post方式 取值</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//假设有一个函数 需要传递两个参数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">hlg</span>(<span class="params">User,Status</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">User</span>+<span class="string">&quot;说：&quot;</span>+<span class="title class_">Status</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">demo.<span class="title function_">regAction</span>(<span class="string">&quot;hello3&quot;</span>, <span class="keyword">function</span> (<span class="params">resolve,param</span>) &#123;</span><br><span class="line">    <span class="comment">//这里还是param参数 param里面的key 是先这里写，但到时候传接口就必须对应的上</span></span><br><span class="line">    res=<span class="title function_">hlg</span>(param[<span class="string">&quot;user&quot;</span>],param[<span class="string">&quot;status&quot;</span>])</span><br><span class="line">    <span class="title function_">resolve</span>(res);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>访问接口，获得js端的返回值</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">url = <span class="string">&quot;http://localhost:12080/go&quot;</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&quot;group&quot;</span>: <span class="string">&quot;zzz&quot;</span>,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;hlg&quot;</span>,</span><br><span class="line">    <span class="string">&quot;action&quot;</span>: <span class="string">&quot;hello3&quot;</span>,</span><br><span class="line">    <span class="string">&quot;param&quot;</span>: json.dumps(&#123;<span class="string">&quot;user&quot;</span>:<span class="string">&quot;黑脸怪&quot;</span>,<span class="string">&quot;status&quot;</span>:<span class="string">&quot;好困啊&quot;</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(data[<span class="string">&quot;param&quot;</span>]) <span class="comment">#dumps后就是长这样的字符串&#123;&quot;user&quot;: &quot;\u9ed1\u8138\u602a&quot;, &quot;status&quot;: &quot;\u597d\u56f0\u554a&quot;&#125;</span></span><br><span class="line">res=requests.post(url, data=data) <span class="comment">#这里换get也是可以的</span></span><br><span class="line"><span class="built_in">print</span>(res.text)</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061710235.png" alt="image-20240506171012173"> </p>]]></content>
      
      
      <categories>
          
          <category> 渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JsRpc </tag>
            
            <tag> 加解密 </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>支付宝小程序反编译流程</title>
      <link href="/2024/05/04/%E6%94%AF%E4%BB%98%E5%AE%9D%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8F%8D%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B/"/>
      <url>/2024/05/04/%E6%94%AF%E4%BB%98%E5%AE%9D%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8F%8D%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在平常测试微信小程序的时候，会对微信小程序进行一下反编译，看看里面有没有泄露敏感信息，如小程序的key、secret、敏感接口，硬编码等。针对一些金融类的小程序，可能还要对其反编译后获取源码，定位加解密算法，配着脚本实现渗透测试。这块相关的知识，网上有比较多的案例，就不细说了。</p><p>前段时间某运营商，提出针对支付宝中小程序的渗透测试，就在想能不能把支付宝中小程序像微信一样反编译，看看有没有敏感信息泄露。网上找了一圈，关于支付宝小程序反编译案例较少，参考了网上一些教程，简单记录一下支付宝小程序反编译的过程。。。</p><h1 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h1><ul><li>已经root过的手机（这块模拟器也行-模拟器默认支持支付宝）</li><li>安卓adb（安装官网下载最新版本的 Platform Tools-包含 ADB）</li></ul><h1 id="定位源码包位置"><a href="#定位源码包位置" class="headerlink" title="定位源码包位置"></a>定位源码包位置</h1><p>1、连上手机以后Windows进入adb shell然后su切换为管理员权限</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">adb shell &amp;&amp; su</span><br></pre></td></tr></table></figure><p>2、然后直接进入支付宝小程序存放目录</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd /data/data/com.eg.android.AlipayGphone/files/nebulaInstallApps/</span><br></pre></td></tr></table></figure><p>然后，就可以看到该目录下，对应的小程序列表</p><p>可以按照时间排序，查看最新打开的支付宝小程序</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ls -lt</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061503090.png" alt="image.png"> </p><p>排在最上面的就是最近打开的小程序，从上往下按时间降序，一般都是图中一长串数字的.</p><p>【*】6开头短数字的目录我看的是支付宝加载的服务包。</p><p>3、然后随便进入一个小程序目录查看</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd 6d478a9eea58c23d3de0a047a9534d70</span><br><span class="line">ls</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061503700.png" alt="img"> </p><p>这个tar文件就是小程序的源码包，然后让这个文件复制到sdcard目录</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cp 2021004100610928.tar /sdcard/</span><br></pre></td></tr></table></figure><p>然后直接adb pull将源码包导出来</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">adb pull /sdcard/2021004100610928.tar</span><br></pre></td></tr></table></figure><p>导出后直接解压文件就可以查看源码了</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061503317.png" alt="img"> </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061505475.png" alt="image.png">  </p><p>最终导出来之后效果图如下</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061503347.png" alt="img"> </p><p>3、小程序源码使用的是js，而通常会加密、混淆等，如上图的js文件，对于我们分析会有一定的阻碍。</p><p>方法还是有的，只需要对js进行美化即可帮助我们分析，这里推荐一个js美化在线工具：</p><p><a href="https://tool.lu/js/">https://tool.lu/js/</a></p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061504971.png" alt="image.png">  </p><h1 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h1><p>支付宝下程序源码包获取还是比较简单的。不需要像微信小程序那样解密，反编译之类的。</p><p>tar压缩文件即为小程序的源码包。这个包没有加密，使用adb pull拿出来，直接解压即可。解压后对js格式化下代码，就可以分析了。js代码没有混淆，条理很清晰</p><h1 id="备注-支付宝小程序抓包"><a href="#备注-支付宝小程序抓包" class="headerlink" title="[备注]支付宝小程序抓包"></a>[备注]<strong>支付宝小程序抓包</strong></h1><p>在查找小程序反编译的时候，看到52pojie一篇关于小程序抓包的文章，可以参考下！</p><p><a href="https://www.52pojie.cn/thread-1050690-1-1.html">https://www.52pojie.cn/thread-1050690-1-1.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透测试 </tag>
            
            <tag> 小程序 </tag>
            
            <tag> 支付宝 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小程序sessionkey泄露漏洞利用</title>
      <link href="/2024/05/04/%E5%B0%8F%E7%A8%8B%E5%BA%8Fsessionkey%E6%B3%84%E9%9C%B2%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/"/>
      <url>/2024/05/04/%E5%B0%8F%E7%A8%8B%E5%BA%8Fsessionkey%E6%B3%84%E9%9C%B2%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="案例介绍"><a href="#案例介绍" class="headerlink" title="案例介绍"></a>案例介绍</h1><p>闲来无事，在测试某小程序的时候，发现存在sessionkey泄露漏洞。具体流程如下：</p><p>1、打开小程序后，点击【用户一键登录】：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061407311.png" alt="image.png"> </p><p>2、burp抓包，发现在请求参数中携带了几个比较敏感的字段，如下所示：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061407019.png" alt="image.png"> </p><p>三个敏感参数</p><ul><li>encryptedData</li><li>iv</li><li>session_key</li></ul><p>3、参考上篇文章，微信小程序登录流程。知道session_key的作用之一是将小程序前端从微信服务器获取到的encryptedData 解密出来。</p><h1 id="服务端获取开放数据"><a href="#服务端获取开放数据" class="headerlink" title="服务端获取开放数据"></a>服务端获取开放数据</h1><p>微信会对开放数据做签名和加密处理。开发者后台拿到开放数据后可以对数据进行校验签名和解密，来保证数据不被篡改。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061416344.png" alt="image-20240506141657312"> </p><p>签名校验以及数据加解密涉及用户的会话密钥 session_key。 开发者应该事先通过 <a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html">wx.login</a> 登录流程获取会话密钥 session_key 并保存在服务器。为了数据不被篡改，开发者不应该把 session_key 传到小程序客户端等服务器外的环境。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061417692.png" alt="image.png"> </p><h1 id="加密数据解密算法"><a href="#加密数据解密算法" class="headerlink" title="加密数据解密算法"></a>加密数据解密算法</h1><p>接口如果涉及敏感数据（如<a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserInfo.html">wx.getUserInfo</a>当中的 openId 和 unionId），接口的明文内容将不包含这些敏感数据。开发者如需要获取敏感数据，需要对接口返回的加密数据(encryptedData) 进行对称解密。 解密算法如下：</p><ol><li>对称解密使用的算法为 AES-128-CBC，数据采用PKCS#7填充。</li><li>对称解密的目标密文为 Base64_Decode(encryptedData)。</li><li>对称解密秘钥 aeskey &#x3D; Base64_Decode(session_key), aeskey 是16字节。</li><li>对称解密算法初始向量 为Base64_Decode(iv)，其中iv由数据接口返回。</li></ol><p>微信官方提供了多种编程语言的示例代码（<a href="https://res.wx.qq.com/wxdoc/dist/assets/media/aes-sample.eae1f364.zip">点击下载</a>）。每种语言类型的接口名字均一致。</p><h1 id="Python本地实现"><a href="#Python本地实现" class="headerlink" title="Python本地实现"></a>Python本地实现</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time: 2024-04-26 15:42</span></span><br><span class="line"><span class="comment"># @Author: muhe Jing</span></span><br><span class="line"><span class="comment"># @File: decrypt.py</span></span><br><span class="line"><span class="comment"># @Software: PyCharm</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parse</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">from</span> Crypto.Cipher <span class="keyword">import</span> AES</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">decrypt</span>(<span class="params">data, key, i_v</span>):</span><br><span class="line">    data = base64.b64decode(urllib.parse.unquote(data))</span><br><span class="line">    key = base64.b64decode(urllib.parse.unquote(key))</span><br><span class="line">    i_v = base64.b64decode(urllib.parse.unquote(i_v))</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(data)</span><br><span class="line">    <span class="built_in">print</span>(key)</span><br><span class="line">    <span class="built_in">print</span>(i_v)</span><br><span class="line"></span><br><span class="line">    cipher = AES.new(key, AES.MODE_CBC, i_v)</span><br><span class="line">    decrypted = cipher.decrypt(data)</span><br><span class="line">    <span class="built_in">print</span>(decrypted.decode)</span><br><span class="line">    <span class="keyword">return</span> decrypted</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    encryptedData = <span class="built_in">input</span>(<span class="string">&quot;输入获取到的encryptedData:&quot;</span>)</span><br><span class="line">    session_key = <span class="built_in">input</span>(<span class="string">&quot;输入获取到的session_key:&quot;</span>)</span><br><span class="line">    iv = <span class="built_in">input</span>(<span class="string">&quot;输入获取到的iv:&quot;</span>)</span><br><span class="line">    decrypt(encryptedData, session_key, iv)</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061418857.png" alt="img"> </p><p>这块可以看到解密之后，在明文字符串后面有特殊字符 “\0e”</p><p>这主要是因为AES算法填充使用的是PKCS#7，该填充模式的特性如下：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405061423475.png" alt="image-20240506142355445"> </p><p>所以，这块填充个了 14字节的 “\x0e”。。。</p>]]></content>
      
      
      <categories>
          
          <category> 渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透测试 </tag>
            
            <tag> 微信小程序 </tag>
            
            <tag> sessionkey泄露 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小程序授权&amp;登录&amp;sessionkey&amp;unionid介绍</title>
      <link href="/2024/05/04/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%88%E6%9D%83-%E7%99%BB%E5%BD%95-sessionkey-unionid%E4%BB%8B%E7%BB%8D/"/>
      <url>/2024/05/04/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%88%E6%9D%83-%E7%99%BB%E5%BD%95-sessionkey-unionid%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>微信小程序相比于普通的应用，很大的一个优势在于不需要进行注册和显式登录，大部分问题可以直接一键微信登录解决。<br>但是，在点击 “授权”、”登录” 的过程中，都做了那些事情呢？</p><p>1、<strong>获取用户登录凭证</strong>：小程序首先会调用微信提供的<code>wx.login</code>接口，获取用户的登录凭证（code）。这个code是一个临时的、有时效性的字符串，用于后续的身份验证。</p><p>2、<strong>发送请求到开发者服务器</strong>：小程序将获取到的code发送到开发者自己的服务器。这一步是为了保护用户的隐私和安全，因为用户的微信敏感信息（如openid、session_key等）不会直接暴露给小程序。</p><p>3、<strong>开发者服务器与微信服务器交互</strong>：开发者服务器将code、小程序的AppID和AppSecret（这是开发者在微信公众平台注册小程序时获得的，用于证明开发者身份的密钥）一起发送给微信服务器进行校验。</p><p>4、<strong>微信服务器返回用户信息</strong>：如果校验通过，微信服务器会返回一个openid和一个session_key给开发者服务器。openid是用户在微信中的唯一标识，session_key是本次会话的密钥，用于后续加密用户数据的解密。</p><p>5、<strong>开发者服务器返回用户信息给小程序</strong>：开发者服务器可以将openid返回给小程序。小程序可以根据openid进行用户的唯一标识和业务处理。如果需要获取更多用户信息，如昵称、头像等，小程序还需要用户进行额外的授权操作。</p><p>6、<strong>用户授权操作</strong>：如果用户需要授权小程序获取更多的个人信息，小程序会展示一个授权界面，用户点击“授权”按钮后，小程序就可以获取到用户的基本信息了。</p><p>这些就是在微信小程序中点击“授权”或“登录”的过程中，主要发生的一系列操作。这样的设计既保证了用户信息的安全性，又简化了用户的登录流程，提高了用户体验。</p><p>下面通过四个方面主要说一下具体的细节：</p><ul><li>授权和登录的意义</li><li>sessionkey的作用</li><li>unionid的作用，有哪些获取途径</li><li>在应用中如何保存用户登录态</li></ul><h1 id="授权和登录的意义"><a href="#授权和登录的意义" class="headerlink" title="授权和登录的意义"></a>授权和登录的意义</h1><p>首先，在这块需要明确一下概念，<strong>授权</strong> 和 <strong>登录</strong> 是两个操作。</p><h2 id="1-授权"><a href="#1-授权" class="headerlink" title="1. 授权"></a>1. 授权</h2><p>部分接口需要经过用户授权同意才能调用。把这些接口按使用范围分成多个 <code>scope</code> ，用户选择对 <code>scope</code> 来进行授权，当授权给一个 <code>scope</code> 之后，其对应的所有接口都可以直接使用。</p><p>此类接口调用时：</p><ul><li>如果用户未接受或拒绝过此权限，会弹窗询问用户，用户点击同意后方可调用接口；</li><li>如果用户已授权，可以直接调用接口；</li><li>如果用户已拒绝授权，则不会出现弹窗，而是直接进入接口 fail 回调。</li></ul><p>参考小程序开发文档<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/authorize.html">开放能力 &#x2F; 用户信息 &#x2F; 授权 (qq.com)</a>中，授权操作是通过**wx.authorize()**接口便可以完成</p><p>提前向用户发起授权请求。调用后会立刻弹窗询问用户是否同意授权小程序使用某项功能或获取用户的某些数据，但不会实际调用对应接口。如果用户之前已经同意授权，则不会出现弹窗，直接返回成功。</p><p>也就是说，授权过程实际上只是在小程序前端获得了操作部分wx 接口的访问许可，这个过程实际上是不会与<strong>开发者服务器</strong>发生任何关系的。</p><p>再来看微信官方提供的scope 列表：</p><p> <img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405051925365.png" alt="image-20240505192518306"> </p><p>wx.authorize(Object object)接口示例代码如下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 可以通过 wx.getSetting 先查询一下用户是否授权了 &quot;scope.record&quot; 这个 scope</span></span><br><span class="line">wx.<span class="title function_">getSetting</span>(&#123;</span><br><span class="line">  <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!res.<span class="property">authSetting</span>[<span class="string">&#x27;scope.record&#x27;</span>]) &#123;</span><br><span class="line">      wx.<span class="title function_">authorize</span>(&#123;</span><br><span class="line">        <span class="attr">scope</span>: <span class="string">&#x27;scope.record&#x27;</span>,</span><br><span class="line">        success () &#123;</span><br><span class="line">          <span class="comment">// 用户已经同意小程序使用录音功能，后续调用 wx.startRecord 接口不会弹窗询问</span></span><br><span class="line">          wx.<span class="title function_">startRecord</span>()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="2-登录"><a href="#2-登录" class="headerlink" title="2. 登录"></a>2. 登录</h2><p>所谓的登录就是要让<strong>开发者服务器</strong>知道当前的用户是谁？在传统的web 应用中，我们必须要让用户输入账号和密码才能实现登录操作。但是在微信应用中，我们可以通过微信服务器来完成这个操作，获取到与当前用户对应的唯一标志（**<u>openId</u>**）。</p><p>微信提供了两种方法  <strong>wx.login 和  wx.getUserProfile</strong> ，<strong>官方是推荐使用第二种因为第二种是必须要通过用户的授权才可以获取信息，而第一种则是直接获取。</strong></p><h3 id="wx-login："><a href="#wx-login：" class="headerlink" title="wx.login："></a>wx.login：</h3><p>wx.login()用来做登录的方法，调用接口获取登录凭证，code发送给后端用于置换session_key和openid等数据。每个用户相对于每个微信应用（公众号或者小程序）的openId 是唯一的，也就是说一个用户相对于不同的微信应用会存在不同的openId。</p><p>小程序可以通过微信官方提供的登录能力方便地获取微信提供的用户身份标识，快速建立小程序内的用户体系。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405051925825.png" alt="image-20240505192537783">  </p><p><strong>上图是小程序官方的一张登录流程图，可以简单说一下这个流程</strong></p><p>1、调用 <a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html">wx.login()</a> 获取 <strong>临时登录凭证code</strong> ，并回传到开发者服务器。</p><p>2、后端调用微信接口，用appid+appsecret+code发送过去，置换到session_key+openid，以前是不能置换unionid的，但是现在在满足以下条件可以置换到unionid</p><ul><li>微信开放平台下存在同主体的App、公众号、小程序 </li><li>用户关注了某个相同主体公众号，或曾经在某个相同主体App、公众号上进行过微信登录授权 同时满足以上两个条件就能拿到用户unionid，这样一来，就能在wx.login()准确识别出用户是谁</li></ul><p>3、自定义登录态与openid和session_key关联，实际就是生成一个与openid，session_key关联的token，下发给前端</p><p>4、前端将后端下发的token存入缓存，在后面的接口请求中带上自定登录态</p><p>以上就是小程序的整个登录流程，可以看到在特定的条件下，通过wx.login()的调用拿到unionId也能在后端数据库里拿到用户信息。</p><h3 id="wx-getUserInfo-wx-getUserProfile-："><a href="#wx-getUserInfo-wx-getUserProfile-：" class="headerlink" title="wx.getUserInfo()&#x2F;wx.getUserProfile()："></a>wx.getUserInfo()&#x2F;wx.getUserProfile()：</h3><p>功能描述：获取用户信息。页面产生点击事件（例如 <code>button</code> 上 <code>bindtap</code> 的回调中）后才可调用，每次请求都会弹出授权窗口，用户同意后返回 <code>userInfo</code>。<code>wx.getUserProfile</code>该接口用于替换 <code>wx.getUserInfo</code>，详见 <a href="https://developers.weixin.qq.com/community/develop/doc/000cacfa20ce88df04cb468bc52801?highLine=login">用户信息接口调整说明</a>。</p><p>这块以<code>wx.getUserInfo</code>为例，首先看一下这个API：</p><p> <img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405051930698.png" alt="image-20240505193046661"> </p><p>在设置withCredentials 属性为true 的情况下，这个api 可以拿到encryptedData，iv 等敏感信息，encryptedData 需要使用session_key 进行解密，解密后可以拿到的数据。</p><p>也就是说，session_key的作用之一是将小程序前端从微信服务器获取到的encryptedData 解密出来，获取到openId 和unionId等信息。</p><p>但是在wx.login()登录过程中可以看到开发者服务器是能够直接拿到用户的openId信息，而且unionId 也是有其他获取途径，所以session_key 在这里的作用看起来有点鸡肋。</p><p>具体session_key有什么作用，可以继续往下看。</p><h1 id="sessionkey的作用"><a href="#sessionkey的作用" class="headerlink" title="sessionkey的作用"></a>sessionkey的作用</h1><p>登录过程中涉及session_key和unionId，于是又引出了下面的问题。</p><p>session_key在登录的过程中或者登录完成后起什么作用呢？</p><p>前面说到在<code>wx.getUserInfo()</code>中可以利用session_key 对encryptedData进行加解密，那具体在什么场景下会涉及呢？？？</p><p>【场景举例】</p><p>在使用微信小程序的时候，登录一般会提供 <strong>微信授权一键登录</strong>，这时候会弹窗，确认手机号，然后进行登录确认：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405051937473.png" alt="image.png"> </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405051939889.png" alt="image-20240505193931858"> </p><p>所以，session_key 一个重要的作用大概体现在获取用户手机方面（可能还包含其他敏感信息获取api）。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405051942985.png" alt="image-20240505194236945"> </p><p>可以看到getPhoneNumber 返回的用户数据是加密过的，只有使用session_key才能解密，而小程序前端没有session_key，所以无法获取到用户的手机，只能传到开发者服务器进行处理。</p><h1 id="unionId-的作用-获取途径"><a href="#unionId-的作用-获取途径" class="headerlink" title="unionId 的作用&amp;获取途径"></a>unionId 的作用&amp;获取途径</h1><h2 id="1-unionid机制说明"><a href="#1-unionid机制说明" class="headerlink" title="1. unionid机制说明"></a>1. unionid机制说明</h2><p>如果公司拥有多个移动应用、网站应用、和公众帐号（包括小程序），可通过unionid来区分用户的唯一性，因为只要是同一个微信开放平台帐号下的移动应用、网站应用和公众帐号（包括小程序），用户的unionid是唯一的。换句话说，同一用户，对同一个微信开放平台下的不同应用，unionid是相同的。</p><p><strong>Tip</strong>：unionid 用于识别同一主体下不同账号之间的用户。举例说明：就是公司有A订阅号，B服务号，同一个人关注A和B，会得到不同的OPENID，但是会得到相同的unionid。这样就可以识别到相同的用户，用于不同账号之间打通用户关系。</p><h2 id="2-UnionID获取途径"><a href="#2-UnionID获取途径" class="headerlink" title="2. UnionID获取途径"></a>2. <strong>UnionID获取途径</strong></h2><p>必须有一个微信开放平台账号绑定了至少一个微信公众账号或者网站应用或者小程序，否则UnionID返回null。绑定了开发者帐号的小程序，可以通过下面3种途径获取UnionID。</p><p><strong>方法一：</strong>调用接口wx.getUserInfo，从解密数据中获取UnionID。注意本接口需要用户授权，请开发者妥善处理用户拒绝授权后的情况。</p><p><strong>方法二：</strong>如果开发者帐号下存在同主体的公众号，并且该用户已经关注了该公众号。开发者可以直接通过wx.login获取到该用户UnionID，无须用户再次授权。</p><p><strong>方法三：</strong>如果开发者帐号下存在同主体的公众号或移动应用，并且该用户已经授权登录过该公众号或移动应用。开发者也可以直接通过wx.login获取到该用户UnionID，无须用户再次授权。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405051944734.png" alt="img"> </p><h1 id="在应用中如何保存登录态"><a href="#在应用中如何保存登录态" class="headerlink" title="在应用中如何保存登录态"></a>在应用中如何保存登录态</h1><p>保存用户登录态，一直以来都有两种解决方案：前端保存和后端保存。</p><h2 id="1-前端保存"><a href="#1-前端保存" class="headerlink" title="1. 前端保存"></a>1. 前端保存</h2><p>在前面登录章节中<strong>自定义登录态</strong>写session 的时候可以直接设定过期时间，定期通知小程序前端重新进行登录（wx.login）。</p><h2 id="2-前端保存"><a href="#2-前端保存" class="headerlink" title="2. 前端保存"></a>2. 前端保存</h2><p>因为session_key 存在时效性问题（毕竟是用来查看敏感信息），而小程序前端可以通过wx.checkSession() 来检查session_key 是否过期。所以可以通过这个来作为保存用户登录态的机制，这也是小程序文档中推荐的方法：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202405/202405051947710.png" alt="image-20240505194743677"> </p>]]></content>
      
      
      <categories>
          
          <category> 渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透测试 </tag>
            
            <tag> 小程序 </tag>
            
            <tag> sessionkey </tag>
            
            <tag> unionid </tag>
            
            <tag> 小程序登录&amp;授权 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitee搭建免费图床</title>
      <link href="/2024/04/17/Gitee%E6%90%AD%E5%BB%BA%E5%85%8D%E8%B4%B9%E5%9B%BE%E5%BA%8A/"/>
      <url>/2024/04/17/Gitee%E6%90%AD%E5%BB%BA%E5%85%8D%E8%B4%B9%E5%9B%BE%E5%BA%8A/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>为什么要搭建图床？？？</p><ol><li>hexo默认可以加载本地文件夹和外部URL的图片，搭建图床后主要用来存储图片，方便管理；</li><li>可以将md文件+对应路径图片打包，方便管理；</li><li>可移植性强。</li></ol><p>还有一个原因，这玩意免费啊！！！</p><p>​Typora+PicGo+Gitee实现图片上传功能<br>​抓紧时间步入正题，Go！</p><h1 id="第一步-配置Gitee仓库"><a href="#第一步-配置Gitee仓库" class="headerlink" title="第一步 配置Gitee仓库"></a>第一步 配置Gitee仓库</h1><p>1、附上<a href="https://gitee.com/">码云gitee</a>地址</p><p>2、注册登录自己的gitee账号</p><p>3、创建仓库，仓库要求公开，so要上传合法图片哒~</p><ul><li>步骤一：创建仓库</li></ul><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404170937885.png" alt="image-20240417093654778"> </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404170941548.png" alt="image-20240417094102500"> </p><ul><li>步骤二：生成私人令牌（请在备忘录中记下生成的私人令牌 ）</li></ul><p>打开“个人主页”—&gt;“个人设置”—-&gt;“私人令牌”</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404170942484.png" alt="image-20240417094222456"> </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404170943977.png" alt="image-20240417094311937"> </p><p>点击 “生成新的令牌” ，提交后，将生成的私人令牌保存好，后面会用到。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404170946003.png" alt="image-20240417094637966">  </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404170947800.png" alt="image-20240417094732760"> </p><h1 id="第二步-PicGo的下载及相关配置"><a href="#第二步-PicGo的下载及相关配置" class="headerlink" title="第二步 PicGo的下载及相关配置"></a>第二步 PicGo的下载及相关配置</h1><p>下载地址：<a href="https://github.com/Molunerfinn/PicGo/releases">https://github.com/Molunerfinn/PicGo/releases</a></p><p><strong>1、首先，下载PicGo的安装包</strong></p><p><a href="https://picgo.github.io/PicGo-Doc/zh/guide/#%E5%BA%94%E7%94%A8%E6%A6%82%E8%BF%B0">PicGo官网指南</a><br>一个图床，一个用于快速上传图片并获取图片URL链接的工具，也完全免费。</p><p><strong>2、其次，在PicGo中安装插件</strong></p><p>常见问题：</p><p>\1. 安装插件一直显示“安装中”；</p><p>\2. 使用npm命令安装插件提示： npm不是内部或外部命令，也不是可运行的程序</p><p>解决：Node.js安装及环境配置，这个必须配置的！！</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404171006115.png" alt="image-20240417100629083"> </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404171020809.png" alt="image-20240417102035779"> </p><p><strong>4、最后，完成PicGo的相关配置</strong></p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404171024030.png" alt="image-20240417102414003"> </p><p>提示“设置成功”即可，配置好后进行<strong>重启！！！！！！</strong><br>随后，设置PicGo时，先选择显示的图床为gitee，再上翻进行设置Server</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404171050897.png" alt="image-20240417105056869"> </p><p>设置成功后在“上传区”测试图片是否能够成功上传，多试几张图片或者重启PicGo看看</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404171051216.png" alt="image-20240417105117184"> </p><h1 id="第三步-Typora的下载及相关配置"><a href="#第三步-Typora的下载及相关配置" class="headerlink" title="第三步 Typora的下载及相关配置"></a>第三步 Typora的下载及相关配置</h1><p>typora是一款支持实时预览的Markdown文本编辑器， 并且完全免费<br>下载地址： <a href="https://www.typora.io/">typora</a></p><p>文件—&gt;偏好设置–&gt;配置PicGo路径</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404171052201.png" alt="image-20240417105231175"> </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404171053000.png" alt="image-20240417105306966"> </p><p>上传图片之后，图片地址指向码云仓库并且提示上传成功就可了。</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>这样，就可以实现，当使用Typora写文档的时候，无论上传本地&amp;远程的图片，复制过来后，会自动通过PicGo上传到gitee中。</p><p>Typora——&gt;PicGo——&gt;Gitee</p><p> <img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404171057563.png" alt="image-20240417105744532"> </p><p>同理，可以看到hexo中的图片加载默认就是从gitee中获取了！！！</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404171100384.png" alt="image-20240417110017307"> </p>]]></content>
      
      
      <categories>
          
          <category> 博客搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 图床 </tag>
            
            <tag> 博客美化 </tag>
            
            <tag> Gitee </tag>
            
            <tag> Picgo </tag>
            
            <tag> typora </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo主题美化(续)</title>
      <link href="/2024/04/11/hexo%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96-%E7%BB%AD/"/>
      <url>/2024/04/11/hexo%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96-%E7%BB%AD/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="hexo弹出欢迎弹窗"><a href="#hexo弹出欢迎弹窗" class="headerlink" title="hexo弹出欢迎弹窗"></a>hexo弹出欢迎弹窗</h1><h2 id="选择一个好看的弹窗"><a href="#选择一个好看的弹窗" class="headerlink" title="选择一个好看的弹窗"></a>选择一个好看的弹窗</h2><p>首先，既然要弹窗，就要好看，而不是JavaScript里的alert()函数。</p><p>这块参考网上文章后，选定使用sweetAlert来实现弹窗（<a href="https://sweetalert.js.org/">SweetAlert</a>），感觉不错。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404111531919.png" alt="img"></p><h3 id="获取其JavaScript和CSS文件"><a href="#获取其JavaScript和CSS文件" class="headerlink" title="获取其JavaScript和CSS文件"></a>获取其JavaScript和CSS文件</h3><p>首先，需要将sweetalert.js和sweetalert.css放到自己博客下。</p><h3 id="新建JavaScript文件夹"><a href="#新建JavaScript文件夹" class="headerlink" title="新建JavaScript文件夹"></a>新建JavaScript文件夹</h3><p>在博客根目录往下找到\themes\next\source\js文件夹，新建sweetalert.js，文件内容<a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https://blog.pai233.top/js/sweetalert.js&source=article&objectId=1933199">请看这里</a>，觉得复制麻烦的可以直接按Crtl+S进行保存。</p><h3 id="新建CSS文件"><a href="#新建CSS文件" class="headerlink" title="新建CSS文件"></a>新建CSS文件</h3><p>在博客根目录往下找到\themes\next\source\css文件夹，新建sweetalert.css，文件内容<a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https://blog.pai233.top/css/sweetalert.css&source=article&objectId=1933199">请看这里</a>。</p><h2 id="引入到主题中"><a href="#引入到主题中" class="headerlink" title="引入到主题中"></a>引入到主题中</h2><p>打开\themes\next\layout_layout.swig，在<head>标签内插入以下语句：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;/js/sweetalert.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;/css/sweetalert.css&quot;</span>&gt;</span><br></pre></td></tr></table></figure><p>这样就完成了引入。</p><h2 id="自动弹窗"><a href="#自动弹窗" class="headerlink" title="自动弹窗"></a>自动弹窗</h2><p>在博客根目录往下找到\themes\next\source\js文件夹，新建welcome.js：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">function <span class="title function_">welcome</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">let</span> <span class="variable">welcome_text</span> <span class="operator">=</span> <span class="string">&#x27;欢迎光顾xxx的小窝~&#x27;</span></span><br><span class="line">    <span class="keyword">if</span>(document.referrer!==<span class="string">&#x27;&#x27;</span>)&#123;</span><br><span class="line">        let referrer=document.referrer.split(<span class="string">&quot;/&quot;</span>)[<span class="number">2</span>];</span><br><span class="line">        welcome_text=<span class="string">&quot;欢迎你，来自&quot;</span>+referrer.toUpperCase()+<span class="string">&quot;的用户！&quot;</span>;<span class="comment">//获取用户来源域名</span></span><br><span class="line">    &#125;</span><br><span class="line">    swal(&#123;</span><br><span class="line">        title: <span class="string">&quot; 欢迎！&quot;</span>,</span><br><span class="line">        text: welcome_text+<span class="string">&#x27;\n打开页面下方音乐以获得更佳体验！&#x27;</span>,<span class="comment">//欢迎文本，可自行修改</span></span><br><span class="line">        imageUrl: <span class="string">&quot;/images/avatar.jpg&quot;</span>,<span class="comment">//图片，自行修改位置</span></span><br><span class="line">        timer: <span class="number">3000</span>,<span class="comment">//弹出时间</span></span><br><span class="line">        showConfirmButton: <span class="literal">false</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">$(document).ready(()=&gt;&#123;<span class="comment">//若未引用JQuery，请引用</span></span><br><span class="line">    welcome()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>这样就大功告成了~~~</p><h1 id="双栏布局"><a href="#双栏布局" class="headerlink" title="双栏布局"></a>双栏布局</h1><p>默认情况，博客文章是单栏布局的，如下所示：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404111532739.png" alt="img"> </p><p>但是我们可以通过插件 “hexo-butterfly-article-double-row” 将其调整为双栏布局，如下：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404111533993.png" alt="image.png"> </p><p>首先执行以下的命令</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">npm i hexo-butterfly-article-<span class="type">double</span>-row --save</span><br></pre></td></tr></table></figure><p>在网站的根配置文件下添加以下的代码</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">#双栏美化</span><br><span class="line">butterfly_article_double_row:</span><br><span class="line">  enable: <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>【重要】这块有个点一定要注意，是在我们默认的根配置文件 _config.yml 中添加上述代码，而不是在主题配置文件中，如果配置在主题文件中后续hexo一键三连的时候会报错，解析有问题：</p><p>“Cannot read property ‘enable’ of undefined”</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404111532633.png" alt="img"> </p><p>这样之后，可以成功切换双栏了，但有个bug，页面比较丑，且页码是有问题的</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404111532753.png" alt="img"> </p><p>通过扒取其他博主的的样式代码，发现有些地方需要改一下，在\themes\butterfly\source\css目录下新建文件mycss.css（一般存自己的一些样式代码，或者想本案例中需要做一些调整的样式代码）,添加以下代码：</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#recent-posts</span>&gt;<span class="selector-class">.recent-post-item</span>&#123;</span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.layout</span> <span class="selector-id">#recent-posts</span>&gt;<span class="selector-class">.recent-post-item</span> <span class="selector-class">.post_cover</span>&#123;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">280px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#recent-posts</span>&gt;<span class="selector-class">.recent-post-item</span>&gt;<span class="selector-class">.recent-post-info</span>&#123;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.layout</span> <span class="selector-id">#recent-posts</span>&gt;<span class="selector-class">.recent-post-item</span>&gt;<span class="selector-class">.recent-post-info</span>&gt;<span class="selector-class">.article-title</span>&#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">1.6em</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#recent-posts</span>&gt;<span class="selector-class">.recent-post-item</span>&gt;<span class="selector-class">.recent-post-info</span>&gt;<span class="selector-class">.article-meta-wrap</span>&#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#pagination</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">1rem</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#pagination</span> <span class="selector-class">.page-number</span>&#123;</span><br><span class="line"><span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">16px</span> -<span class="number">4px</span> <span class="number">#2c2d300c</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.layout</span>&gt;<span class="selector-class">.recent-posts</span> <span class="selector-class">.pagination</span>&gt;<span class="selector-pseudo">:not</span>(<span class="selector-class">.space</span>)&#123;</span><br><span class="line"><span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">16px</span> -<span class="number">4px</span> <span class="number">#2c2d300c</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>同时在主题配置目录inject字段下引入mycss.css文件</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">inject</span><br><span class="line">    - &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;/css/mycss.css&quot;</span>&gt;</span><br></pre></td></tr></table></figure><p>再次查看效果</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404111534081.png" alt="image.png"> </p><p>个人感觉双栏没有单栏看着舒服，这块只做演示。。。</p><h1 id="添加卡通人物"><a href="#添加卡通人物" class="headerlink" title="添加卡通人物"></a>添加卡通人物</h1><p>可以给博客添加一个卡通宠物，还能根据你鼠标位置摇头，点击此处（<a href="https://github.com/EYHN/hexo-helper-live2d">点击此处</a>）进入项目地址：</p><h2 id="初级版"><a href="#初级版" class="headerlink" title="初级版"></a>初级版</h2><p>已经封装好了插件，但只是模型，不能说话、不能换装、功能较少。</p><p>1、安装模块</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure><p>2、输入以下命令，下载相应的模型，将 packagename 更换成模型名称即可</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">npm install packagename  <span class="comment">//npm install live2d-widget-model-wanko</span></span><br></pre></td></tr></table></figure><p>具体的packagename和对应图片可以<a href="https://blog.csdn.net/u012931864/article/details/83054822">点击此处</a></p><p>3、在 站点配置文件 中新增如下内容（这块要求必须是站点配置文件，不能是主题配置文件）：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"># Live2D</span><br><span class="line">## https:<span class="comment">//github.com/EYHN/hexo-helper-live2d</span></span><br><span class="line">live2d:</span><br><span class="line">  enable: <span class="literal">true</span></span><br><span class="line">  # enable: <span class="literal">false</span></span><br><span class="line">  scriptFrom: local # 默认</span><br><span class="line">  pluginRootPath: live2dw/ # 插件在站点上的根目录(相对路径)</span><br><span class="line">  pluginJsPath: lib/ # 脚本文件相对与插件根目录路径</span><br><span class="line">  pluginModelPath: assets/ # 模型文件相对与插件根目录路径</span><br><span class="line">  # scriptFrom: jsdelivr # jsdelivr CDN</span><br><span class="line">  # scriptFrom: unpkg # unpkg CDN</span><br><span class="line">  # scriptFrom: https:<span class="comment">//cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js # 你的自定义 url</span></span><br><span class="line">  tagMode: <span class="literal">false</span> # 标签模式, 是否仅替换 live2d tag标签而非插入到所有页面中</span><br><span class="line">  debug: <span class="literal">false</span> # 调试, 是否在控制台输出日志</span><br><span class="line">  model:</span><br><span class="line">    use: live2d-widget-model-wanko # npm-<span class="keyword">module</span> <span class="keyword">package</span> name</span><br><span class="line">    # use: wanko # 博客根目录/live2d_models/ 下的目录名</span><br><span class="line">    # use: ./wives/wanko # 相对于博客根目录的路径</span><br><span class="line">    # use: https:<span class="comment">//cdn.jsdelivr.net/npm/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json # 你的自定义 url</span></span><br><span class="line">  display:</span><br><span class="line">    position: right</span><br><span class="line">    width: <span class="number">150</span></span><br><span class="line">    height: <span class="number">300</span></span><br><span class="line">  mobile:</span><br><span class="line">    show: <span class="literal">false</span> # 手机中是否展示</span><br></pre></td></tr></table></figure><p>3、展示如下：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404111534918.png" alt="img"> </p><h2 id="进阶版"><a href="#进阶版" class="headerlink" title="进阶版"></a>进阶版</h2><p>网上也有一些进阶版的卡通人物实现，功能齐全。能说话、能换装、能玩游戏、能拍照、还能自定义。</p><p>具体实现，可以参考：</p><p><a href="https://augu1sto.gitee.io/ee36c104ddd2/">Hexo美化|站宠？看板娘？live2d配置（附魔改插件和新模型）</a></p><p><a href="https://zhuanlan.zhihu.com/p/58325389">Hexo博客NexT主题美化之新增看板娘(能说话、能换装)</a></p><h1 id="小标题添加旋转小风车"><a href="#小标题添加旋转小风车" class="headerlink" title="小标题添加旋转小风车"></a>小标题添加旋转小风车</h1><p>1、打开 _config.butterfly.yml<br>找到 Beautify，将 <a href="https://so.csdn.net/so/search?q=enable&spm=1001.2101.3001.7020">enable</a> 设置为 true，title-prefix-icon 设置为 ‘\f863’</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"># Beautify (美化頁面顯示)</span><br><span class="line">beautify:</span><br><span class="line">    enable: <span class="literal">true</span></span><br><span class="line">    field: post # site/post</span><br><span class="line">    title-prefix-icon: <span class="string">&#x27;\f863&#x27;</span> # <span class="string">&#x27;\f0c1&#x27;</span></span><br><span class="line">    title-prefix-icon-color: <span class="string">&quot;#F47466&quot;</span></span><br></pre></td></tr></table></figure><p>2、在主题<a href="https://so.csdn.net/so/search?q=%E6%96%87%E4%BB%B6%E5%A4%B9&spm=1001.2101.3001.7020">文件夹</a> source&#x2F;css&#x2F; 中创建一个 icon.css，内容如下：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 文章页H1-H6图标样式效果 */</span></span><br><span class="line"><span class="comment">/* 控制风车转动速度 4s那里可以自己调节快慢 */</span></span><br><span class="line">h1::before,</span><br><span class="line">h2::before,</span><br><span class="line">h3::before,</span><br><span class="line">h4::before,</span><br><span class="line">h5::before,</span><br><span class="line">h6::before &#123;</span><br><span class="line">  -webkit-animation: ccc 4s linear infinite;</span><br><span class="line">  animation: ccc 4s linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 控制风车转动方向 -1turn 为逆时针转动，1turn 为顺时针转动，相同数字部分记得统一修改 */</span></span><br><span class="line">@-webkit-keyframes ccc &#123;</span><br><span class="line">  <span class="number">0</span>% &#123;</span><br><span class="line">    -webkit-transform: rotate(0deg);</span><br><span class="line">    transform: rotate(0deg);</span><br><span class="line">  &#125;</span><br><span class="line">  to &#123;</span><br><span class="line">    -webkit-transform: rotate(-1turn);</span><br><span class="line">    transform: rotate(-1turn);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@keyframes</span> ccc &#123;</span><br><span class="line">  <span class="number">0</span>% &#123;</span><br><span class="line">    -webkit-transform: rotate(0deg);</span><br><span class="line">    transform: rotate(0deg);</span><br><span class="line">  &#125;</span><br><span class="line">  to &#123;</span><br><span class="line">    -webkit-transform: rotate(-1turn);</span><br><span class="line">    transform: rotate(-1turn);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 设置风车颜色 */</span></span><br><span class="line">#content-inner.layout h1::before &#123;</span><br><span class="line">  color: #ef50a8;</span><br><span class="line">  margin-left: -<span class="number">1.</span>55rem;</span><br><span class="line">  font-size: <span class="number">1.</span>3rem;</span><br><span class="line">  margin-top: -<span class="number">0.</span>23rem;</span><br><span class="line">&#125;</span><br><span class="line">#content-inner.layout h2::before &#123;</span><br><span class="line">  color: #fb7061;</span><br><span class="line">  margin-left: -<span class="number">1.</span>35rem;</span><br><span class="line">  font-size: <span class="number">1.</span>1rem;</span><br><span class="line">  margin-top: -<span class="number">0.</span>12rem;</span><br><span class="line">&#125;</span><br><span class="line">#content-inner.layout h3::before &#123;</span><br><span class="line">  color: #ffbf00;</span><br><span class="line">  margin-left: -<span class="number">1.</span>22rem;</span><br><span class="line">  font-size: <span class="number">0.</span>95rem;</span><br><span class="line">  margin-top: -<span class="number">0.</span>09rem;</span><br><span class="line">&#125;</span><br><span class="line">#content-inner.layout h4::before &#123;</span><br><span class="line">  color: #a9e000;</span><br><span class="line">  margin-left: -<span class="number">1.</span>05rem;</span><br><span class="line">  font-size: <span class="number">0.</span>8rem;</span><br><span class="line">  margin-top: -<span class="number">0.</span>09rem;</span><br><span class="line">&#125;</span><br><span class="line">#content-inner.layout h5::before &#123;</span><br><span class="line">  color: #57c850;</span><br><span class="line">  margin-left: -<span class="number">0.</span>9rem;</span><br><span class="line">  font-size: <span class="number">0.</span>7rem;</span><br><span class="line">  margin-top: 0rem;</span><br><span class="line">&#125;</span><br><span class="line">#content-inner.layout h6::before &#123;</span><br><span class="line">  color: #5ec1e0;</span><br><span class="line">  margin-left: -<span class="number">0.</span>9rem;</span><br><span class="line">  font-size: <span class="number">0.</span>66rem;</span><br><span class="line">  margin-top: 0rem;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* s设置风车hover动效 6s那里可以自己调节快慢*/</span></span><br><span class="line">#content-inner.layout h1:hover,</span><br><span class="line">#content-inner.layout h2:hover,</span><br><span class="line">#content-inner.layout h3:hover,</span><br><span class="line">#content-inner.layout h4:hover,</span><br><span class="line">#content-inner.layout h5:hover,</span><br><span class="line">#content-inner.layout h6:hover &#123;</span><br><span class="line">  color: <span class="keyword">var</span>(--theme-color);</span><br><span class="line">&#125;</span><br><span class="line">#content-inner.layout h1:hover::before,</span><br><span class="line">#content-inner.layout h2:hover::before,</span><br><span class="line">#content-inner.layout h3:hover::before,</span><br><span class="line">#content-inner.layout h4:hover::before,</span><br><span class="line">#content-inner.layout h5:hover::before,</span><br><span class="line">#content-inner.layout h6:hover::before &#123;</span><br><span class="line">  color: <span class="keyword">var</span>(--theme-color);</span><br><span class="line">  -webkit-animation: ccc 6s linear infinite;</span><br><span class="line">  animation: ccc 6s linear infinite;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3、并在 _config.butterfly.yml 中找到 <a href="https://so.csdn.net/so/search?q=inject&spm=1001.2101.3001.7020">inject</a>，在 head 下添加</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">- &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;/css/icon.css&quot;</span>&gt;</span><br></pre></td></tr></table></figure><p>最终展示效果如下：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404111534447.png" alt="img"> </p><h1 id="自定义鼠标指针样式"><a href="#自定义鼠标指针样式" class="headerlink" title="自定义鼠标指针样式"></a><strong>自定义鼠标指针样式</strong></h1><p>1、选定好看的鼠标样式，这块为了简答，选择两种鼠标样式，如下：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404111535448.png" alt="img"> </p><p>下载地址为：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">https:<span class="comment">//cdn.jsdelivr.net/gh/TRHX/CDN-for-itrhx.com@1.0/images/mouse.cur</span></span><br><span class="line">https:<span class="comment">//cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@latest/Hexo/img/pointer.cur</span></span><br></pre></td></tr></table></figure><p>2、在 &#x2F;themes&#x2F;butterfly&#x2F;source&#x2F;css路径下创建一个mouse.css文件，在文件中添加如下代码：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">  cursor:url(/img/pointer/mouse.cur),</span><br><span class="line">        <span class="keyword">default</span>;</span><br><span class="line">&#125;</span><br><span class="line">a,</span><br><span class="line">img &#123;</span><br><span class="line">  cursor:url(/img/pointer/pointer.cur),</span><br><span class="line">        <span class="keyword">default</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3、打开站点主题配置文件_config.butterfly.yml，找到inject，在head处直接引入该文件：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">  - &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;/css/mouse.css&quot;</span>&gt;</span><br></pre></td></tr></table></figure><p>效果如下所示：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404111535495.png" alt="img"> </p><h1 id="添加背景动态彩带效果"><a href="#添加背景动态彩带效果" class="headerlink" title="添加背景动态彩带效果"></a>添加背景动态彩带效果</h1><p>butterfly提供三种效果：静止彩带、动态彩带、canvas_nest</p><p>我选的是动态彩条，修改主题配置文件：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">canvas_fluttering_ribbon: # 动态彩带</span><br><span class="line">  enable: <span class="literal">true</span></span><br><span class="line">  mobile: <span class="literal">false</span> # <span class="literal">false</span> 手机端不显示 <span class="literal">true</span> 手机端显示</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404111535952.png" alt="img"> </p><h1 id="添加枫叶飘落效果"><a href="#添加枫叶飘落效果" class="headerlink" title="添加枫叶飘落效果"></a>添加枫叶飘落效果</h1><p>步骤和前面的基本类似，都是本地引入JS文件，在配置文件中直接调用即可</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> stop, staticx;</span><br><span class="line"><span class="type">var</span> <span class="variable">img</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">img.src = <span class="string">&quot;https://img.cdn.nesxc.com/2022/02/202202251325420webp&quot;</span>;</span><br><span class="line"></span><br><span class="line">function <span class="title function_">Sakura</span><span class="params">(x, y, s, r, fn)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.x = x;</span><br><span class="line">    <span class="built_in">this</span>.y = y;</span><br><span class="line">    <span class="built_in">this</span>.s = s;</span><br><span class="line">    <span class="built_in">this</span>.r = r;</span><br><span class="line">    <span class="built_in">this</span>.fn = fn</span><br><span class="line">&#125;</span><br><span class="line">Sakura.prototype.draw = function(cxt) &#123;</span><br><span class="line">    cxt.save();</span><br><span class="line">    <span class="type">var</span> <span class="variable">xc</span> <span class="operator">=</span> <span class="number">20</span> * <span class="built_in">this</span>.s / <span class="number">2</span>;</span><br><span class="line">    cxt.translate(<span class="built_in">this</span>.x, <span class="built_in">this</span>.y);</span><br><span class="line">    cxt.rotate(<span class="built_in">this</span>.r);</span><br><span class="line">    cxt.drawImage(img, <span class="number">0</span>, <span class="number">0</span>, <span class="number">20</span> * <span class="built_in">this</span>.s, <span class="number">20</span> * <span class="built_in">this</span>.s);</span><br><span class="line">    cxt.restore()</span><br><span class="line">&#125;;</span><br><span class="line">Sakura.prototype.update = function() &#123;</span><br><span class="line">    <span class="built_in">this</span>.x = <span class="built_in">this</span>.fn.x(<span class="built_in">this</span>.x, <span class="built_in">this</span>.y);</span><br><span class="line">    <span class="built_in">this</span>.y = <span class="built_in">this</span>.fn.y(<span class="built_in">this</span>.y, <span class="built_in">this</span>.y);</span><br><span class="line">    <span class="built_in">this</span>.r = <span class="built_in">this</span>.fn.r(<span class="built_in">this</span>.r);</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.x &gt; window.innerWidth || <span class="built_in">this</span>.x &lt; <span class="number">0</span> || <span class="built_in">this</span>.y &gt; window.innerHeight || <span class="built_in">this</span>.y &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.r = getRandom(<span class="string">&quot;fnr&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (Math.random() &gt; <span class="number">0.4</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.x = getRandom(<span class="string">&quot;x&quot;</span>);</span><br><span class="line">            <span class="built_in">this</span>.y = <span class="number">0</span>;</span><br><span class="line">            <span class="built_in">this</span>.s = getRandom(<span class="string">&quot;s&quot;</span>);</span><br><span class="line">            <span class="built_in">this</span>.r = getRandom(<span class="string">&quot;r&quot;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.x = window.innerWidth;</span><br><span class="line">            <span class="built_in">this</span>.y = getRandom(<span class="string">&quot;y&quot;</span>);</span><br><span class="line">            <span class="built_in">this</span>.s = getRandom(<span class="string">&quot;s&quot;</span>);</span><br><span class="line">            <span class="built_in">this</span>.r = getRandom(<span class="string">&quot;r&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">SakuraList = function() &#123;</span><br><span class="line">    <span class="built_in">this</span>.list = []</span><br><span class="line">&#125;;</span><br><span class="line">SakuraList.prototype.push = function(sakura) &#123;</span><br><span class="line">    <span class="built_in">this</span>.list.push(sakura)</span><br><span class="line">&#125;;</span><br><span class="line">SakuraList.prototype.update = function() &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">var</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, len = <span class="built_in">this</span>.list.length; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="built_in">this</span>.list[i].update()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">SakuraList.prototype.draw = function(cxt) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">var</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, len = <span class="built_in">this</span>.list.length; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="built_in">this</span>.list[i].draw(cxt)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">SakuraList.prototype.get = function(i) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.list[i]</span><br><span class="line">&#125;;</span><br><span class="line">SakuraList.prototype.size = function() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.list.length</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">function <span class="title function_">getRandom</span><span class="params">(option)</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> ret, random;</span><br><span class="line">    <span class="keyword">switch</span> (option) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;x&quot;</span>:</span><br><span class="line">            ret = Math.random() * window.innerWidth;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;y&quot;</span>:</span><br><span class="line">            ret = Math.random() * window.innerHeight;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;s&quot;</span>:</span><br><span class="line">            ret = Math.random();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;r&quot;</span>:</span><br><span class="line">            ret = Math.random() * <span class="number">4</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;fnx&quot;</span>:</span><br><span class="line">            random = -<span class="number">0.5</span> + Math.random() * <span class="number">1</span>;</span><br><span class="line">            ret = function(x, y) &#123;</span><br><span class="line">                <span class="keyword">return</span> x + <span class="number">0.5</span> * random - <span class="number">1.7</span></span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;fny&quot;</span>:</span><br><span class="line">            random = <span class="number">1.5</span> + Math.random() * <span class="number">0.7</span>;</span><br><span class="line">            ret = function(x, y) &#123;</span><br><span class="line">                <span class="keyword">return</span> y + random</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;fnr&quot;</span>:</span><br><span class="line">            random = Math.random() * <span class="number">0.03</span>;</span><br><span class="line">            ret = function(r) &#123;</span><br><span class="line">                <span class="keyword">return</span> r + random</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function <span class="title function_">startSakura</span><span class="params">()</span> &#123;</span><br><span class="line">    requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame;</span><br><span class="line">    <span class="type">var</span> <span class="variable">canvas</span> <span class="operator">=</span> document.createElement(<span class="string">&quot;canvas&quot;</span>),</span><br><span class="line">        cxt;</span><br><span class="line">    staticx = <span class="literal">true</span>;</span><br><span class="line">    canvas.height = window.innerHeight;</span><br><span class="line">    canvas.width = window.innerWidth;</span><br><span class="line">    canvas.setAttribute(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;position: fixed;left: 0;top: 0;pointer-events: none;&quot;</span>);</span><br><span class="line">    canvas.setAttribute(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;canvas_sakura&quot;</span>);</span><br><span class="line">    document.getElementsByTagName(<span class="string">&quot;body&quot;</span>)[<span class="number">0</span>].appendChild(canvas);</span><br><span class="line">    cxt = canvas.getContext(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line">    <span class="type">var</span> <span class="variable">sakuraList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SakuraList</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">var</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> sakura, randomX, randomY, randomS, randomR, randomFnx, randomFny;</span><br><span class="line">        randomX = getRandom(<span class="string">&quot;x&quot;</span>);</span><br><span class="line">        randomY = getRandom(<span class="string">&quot;y&quot;</span>);</span><br><span class="line">        randomR = getRandom(<span class="string">&quot;r&quot;</span>);</span><br><span class="line">        randomS = getRandom(<span class="string">&quot;s&quot;</span>);</span><br><span class="line">        randomFnx = getRandom(<span class="string">&quot;fnx&quot;</span>);</span><br><span class="line">        randomFny = getRandom(<span class="string">&quot;fny&quot;</span>);</span><br><span class="line">        randomFnR = getRandom(<span class="string">&quot;fnr&quot;</span>);</span><br><span class="line">        sakura = <span class="keyword">new</span> <span class="title class_">Sakura</span>(randomX, randomY, randomS, randomR, &#123;</span><br><span class="line">            x: randomFnx,</span><br><span class="line">            y: randomFny,</span><br><span class="line">            r: randomFnR</span><br><span class="line">        &#125;);</span><br><span class="line">        sakura.draw(cxt);</span><br><span class="line">        sakuraList.push(sakura)</span><br><span class="line">    &#125;</span><br><span class="line">    stop = requestAnimationFrame(function() &#123;</span><br><span class="line">        cxt.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</span><br><span class="line">        sakuraList.update();</span><br><span class="line">        sakuraList.draw(cxt);</span><br><span class="line">        stop = requestAnimationFrame(arguments.callee)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">window.onresize = function() &#123;</span><br><span class="line">    <span class="type">var</span> <span class="variable">canvasSnow</span> <span class="operator">=</span> document.getElementById(<span class="string">&quot;canvas_snow&quot;</span>)</span><br><span class="line">&#125;;</span><br><span class="line">img.onload = function() &#123;</span><br><span class="line">    startSakura()</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">function <span class="title function_">stopp</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (staticx) &#123;</span><br><span class="line">        <span class="type">var</span> <span class="variable">child</span> <span class="operator">=</span> document.getElementById(<span class="string">&quot;canvas_sakura&quot;</span>);</span><br><span class="line">        child.parentNode.removeChild(child);</span><br><span class="line">        window.cancelAnimationFrame(stop);</span><br><span class="line">        staticx = <span class="literal">false</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        startSakura()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>在配置文件中引入：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head</span><br><span class="line">  bottom:</span><br><span class="line">    - &lt;script src=<span class="string">&quot;/js/leaves.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 博客搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> 主题美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决hexo开启懒加载后图片无法立即显示的问题</title>
      <link href="/2024/04/11/%E8%A7%A3%E5%86%B3hexo%E5%BC%80%E5%90%AF%E6%87%92%E5%8A%A0%E8%BD%BD%E5%90%8E%E5%9B%BE%E7%89%87%E6%97%A0%E6%B3%95%E7%AB%8B%E5%8D%B3%E6%98%BE%E7%A4%BA%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2024/04/11/%E8%A7%A3%E5%86%B3hexo%E5%BC%80%E5%90%AF%E6%87%92%E5%8A%A0%E8%BD%BD%E5%90%8E%E5%9B%BE%E7%89%87%E6%97%A0%E6%B3%95%E7%AB%8B%E5%8D%B3%E6%98%BE%E7%A4%BA%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="本文目的"><a href="#本文目的" class="headerlink" title="本文目的"></a>本文目的</h1><p>主要介绍hexo-lazyload-image（图片懒加载）插件引发的bug以及相关API</p><h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><p>网站开启图片懒加载后，首次加载页面图片不显示，但是刷新一次后会显示。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404/202404111526969.png" alt="img"> </p><h1 id="定位原因"><a href="#定位原因" class="headerlink" title="定位原因"></a>定位原因</h1><p>为了提升网页的浏览体验，开启了pjax优化，其原理在于pjax封装了ajax实现局部刷新，将网站变成了单页面应用。</p><p>懒加载插件如果配置不当，将与pjax插件发生冲突，导致以上bug。</p><h1 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h1><p>找到hexo项目的根目录下的站点配置文件_config.yml，具体路径：blog&#x2F;_config.yml，其中blog是你的项目文件夹。</p><p>找到lazyload配置，添上isSPA: true字段即可。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">lazyload:</span><br><span class="line">  enable: <span class="literal">true</span></span><br><span class="line">  onlypost: <span class="literal">false</span> # optional</span><br><span class="line">  loadingImg: # optional eg ./images/loading.gif</span><br><span class="line">  isSPA: <span class="literal">true</span> # optional</span><br></pre></td></tr></table></figure><h1 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h1><p>来仔细看一下hexo-lazyload-image 插件的API，它共有5个配置项：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">lazyload:</span><br><span class="line">  enable: <span class="literal">true</span></span><br><span class="line">  onlypost: <span class="literal">false</span> # optional</span><br><span class="line">  loadingImg: # optional eg ./images/loading.gif</span><br><span class="line">  isSPA: <span class="literal">false</span> # optional</span><br><span class="line">  preloadRatio: <span class="number">3</span> # optional, <span class="keyword">default</span> is <span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>onlypost</strong></p><ul><li>true：只有路由页面或者文章的图片才会被懒加载。</li><li>false：除了站点背景图（如果有的话），整个站点的图片均会被懒加载。</li></ul><p><strong>loadingImg</strong>：指定的话，加载自定义路径的图片用作文章图片加载时显示，不指定的话显示默认图片。</p><p><strong>isSPA</strong></p><ul><li>true：针对单页面应用，当滚动条滚动到图片位置时就会向后端请求图片</li><li>false：刷新才能请求图片</li></ul><p><strong>preloadRatio</strong>：在多少倍的可见区域时触发图片请求，默认为1，即当前屏幕的区域。</p>]]></content>
      
      
      <categories>
          
          <category> 博客搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 懒加载 </tag>
            
            <tag> 博客优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo禁用调试模式</title>
      <link href="/2024/04/09/Hexo%E7%A6%81%E7%94%A8%E8%B0%83%E8%AF%95%E6%A8%A1%E5%BC%8F/"/>
      <url>/2024/04/09/Hexo%E7%A6%81%E7%94%A8%E8%B0%83%E8%AF%95%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h1><p>网站禁用调试模式是一种常见的网站安全措施，旨在防止攻击者利用浏览器开发工具（如Chrome DevTools）对网站进行恶意攻击或窃取敏感信息。禁用调试模式通过限制或禁止开发工具的使用，增强网站的安全防护。</p><p>实现网站禁用调试模式的技术方法有多种。一种常见的方法是在网页代码中插入JavaScript代码来检测是否打开了开发工具。如果检测到开发工具被打开，则会禁用页面的一些功能，或将页面重定向到其他页面。这种方法的实现相对简单，但也存在一定的被绕过风险。</p><p>另一种更为安全的方法是使用服务器端的技术来检测是否打开了开发工具。服务器端可以检测客户端请求头中的User-Agent字段，以识别浏览器和开发工具的类型。如果检测到请求头中包含开发工具的信息，服务器端可以采取相应的措施来禁止对网站进行攻击。</p><p>本文主要介绍通过网站中引入JavaScript代码，禁止攻击者打开DEvtools实现。</p><h1 id="0x01-实现步骤"><a href="#0x01-实现步骤" class="headerlink" title="0x01 实现步骤"></a>0x01 实现步骤</h1><h2 id="新建bandev-js文件"><a href="#新建bandev-js文件" class="headerlink" title="新建bandev.js文件"></a>新建bandev.js文件</h2><p>在theme对应主题下的新建  source&#x2F;js&#x2F;bandev.js（自行修改提示文字）</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//禁止右键</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">oncontextmenu</span> = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&quot;event.returnValue=false;&quot;</span>) <span class="comment">//禁用右键</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听按键</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">onkeydown</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// f12</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">event</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">keyCode</span> == <span class="number">123</span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;F12被禁用&quot;</span>);</span><br><span class="line">        event.<span class="property">keyCode</span> = <span class="number">0</span>;</span><br><span class="line">        event.<span class="property">returnValue</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ctrl+shift+i</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">ctrlKey</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">shiftKey</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">keyCode</span> == <span class="number">73</span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;ctrl+shift+i被禁用&quot;</span>);</span><br><span class="line">        event.<span class="property">keyCode</span> = <span class="number">0</span>;</span><br><span class="line">        event.<span class="property">returnValue</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ctrl+s</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">ctrlKey</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">keyCode</span> == <span class="number">83</span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;ctrl+s被禁用&quot;</span>);</span><br><span class="line">        event.<span class="property">keyCode</span> = <span class="number">0</span>;</span><br><span class="line">        event.<span class="property">returnValue</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="comment">// ctrl+p</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">ctrlKey</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">keyCode</span> == <span class="number">80</span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;ctrl+p被禁用&quot;</span>);</span><br><span class="line">        event.<span class="property">keyCode</span> = <span class="number">0</span>;</span><br><span class="line">        event.<span class="property">returnValue</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//禁止先打开控制台然后强行进入</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">// 这里我做的是跳转首页，可以根据实际需要进行其他限制</span></span><br><span class="line">    <span class="keyword">var</span> domain = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">host</span>;<span class="comment">// 获取当前域名</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&quot;https://&quot;</span> + domain;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">outerHeight</span> - <span class="variable language_">window</span>.<span class="property">innerHeight</span> &gt; <span class="number">150</span>) &#123;</span><br><span class="line">    <span class="title function_">a</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">outerWidth</span> - <span class="variable language_">window</span>.<span class="property">innerWidth</span> &gt; <span class="number">150</span>) &#123;</span><br><span class="line">    <span class="title function_">a</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>主要分为三个方面的思路：</p><p>1、禁止右键</p><p>2、禁止特定按键</p><p>3、禁止先打开控制台后强制进入</p><p>下面具体说明这三个的实现方法：</p><h2 id="禁止右键"><a href="#禁止右键" class="headerlink" title="禁止右键"></a>禁止右键</h2><p>1、最简单的一行代码搞定：document.oncontextmenu是一个事件处理器，它会在用户尝试在文档上执行右键点击（即打开上下文菜单）时被触发，调用函数，将event.returnValue设置为false默认阻止此事件的发生。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">document.oncontextmenu = new Function(&quot;event.returnValue=false;&quot;) //禁用右键</span><br></pre></td></tr></table></figure><p>2、但需要注意，上面的代码适用于旧的浏览器（如IE）版本，在更现代的浏览器（如Chrome, Firefox等）中，这种方式可能不会起作用。对于更现代的浏览器，通常会使用event.preventDefault()方法来阻止默认行为。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">document.oncontextmenu = function(event) &#123;  </span><br><span class="line">    event.preventDefault();  </span><br><span class="line">    return false;  </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="禁止特定按键"><a href="#禁止特定按键" class="headerlink" title="禁止特定按键"></a>禁止特定按键</h2><p>防止F12和shift+ctrl+i调起开发者工具；并且禁用ctrl+s和ctrl+s，防止对网页内容本地保存</p><p>监听按键事件，对上述的按件进行监听，如果监听到设置event.returnValue &#x3D; false。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 监听按键</span><br><span class="line">document.onkeydown = function () &#123;</span><br><span class="line">    // f12</span><br><span class="line">    if (window.event &amp;&amp; window.event.keyCode == 123) &#123;</span><br><span class="line">        alert(&quot;F12被禁用&quot;);</span><br><span class="line">        event.keyCode = 0;</span><br><span class="line">        event.returnValue = false;</span><br><span class="line">    &#125;</span><br><span class="line">    // ctrl+shift+i</span><br><span class="line">    if (window.event.ctrlKey &amp;&amp; window.event.shiftKey &amp;&amp; window.event.keyCode == 73) &#123;</span><br><span class="line">        alert(&quot;ctrl+shift+i被禁用&quot;);</span><br><span class="line">        event.keyCode = 0;</span><br><span class="line">        event.returnValue = false;</span><br><span class="line">    &#125;</span><br><span class="line">    // ctrl+s</span><br><span class="line">    if (window.event.ctrlKey &amp;&amp; window.event.keyCode == 83) &#123;</span><br><span class="line">        alert(&quot;ctrl+s被禁用&quot;);</span><br><span class="line">        event.keyCode = 0;</span><br><span class="line">        event.returnValue = false;</span><br><span class="line">    &#125;</span><br><span class="line">     // ctrl+p</span><br><span class="line">    if (window.event.ctrlKey &amp;&amp; window.event.keyCode == 80) &#123;</span><br><span class="line">        alert(&quot;ctrl+p被禁用&quot;);</span><br><span class="line">        event.keyCode = 0;</span><br><span class="line">        event.returnValue = false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="禁止先打开控制台后强制进入"><a href="#禁止先打开控制台后强制进入" class="headerlink" title="禁止先打开控制台后强制进入"></a>禁止先打开控制台后强制进入</h2><p>如果用户在工具栏调起开发者工具，那么判断浏览器的可视高度和可视宽度是否有改变，如有改变则关闭本页面 </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//禁止先打开控制台然后强行进入</span><br><span class="line">function a() &#123;</span><br><span class="line">    var domain = window.location.host;// 获取当前域名</span><br><span class="line">    window.location.href = &quot;https://&quot; + domain;</span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br><span class="line">if (window.outerHeight - window.innerHeight &gt; 150) &#123;</span><br><span class="line">    a()</span><br><span class="line">&#125;</span><br><span class="line">if (window.outerWidth - window.innerWidth &gt; 150) &#123;</span><br><span class="line">    a()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="最终代码"><a href="#最终代码" class="headerlink" title="最终代码"></a>最终代码</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//禁止右键</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">oncontextmenu</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;  </span><br><span class="line">    event.<span class="title function_">preventDefault</span>();  </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;  </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听按键</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">onkeydown</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// f12</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">event</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">keyCode</span> == <span class="number">123</span>) &#123;</span><br><span class="line">        event.<span class="property">keyCode</span> = <span class="number">0</span>;</span><br><span class="line">        event.<span class="property">returnValue</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ctrl+shift+i</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">ctrlKey</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">shiftKey</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">keyCode</span> == <span class="number">73</span>) &#123;</span><br><span class="line">        event.<span class="property">keyCode</span> = <span class="number">0</span>;</span><br><span class="line">        event.<span class="property">returnValue</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ctrl+s</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">ctrlKey</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">keyCode</span> == <span class="number">83</span>) &#123;</span><br><span class="line">        event.<span class="property">keyCode</span> = <span class="number">0</span>;</span><br><span class="line">        event.<span class="property">returnValue</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="comment">// ctrl+p</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">ctrlKey</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">keyCode</span> == <span class="number">80</span>) &#123;</span><br><span class="line">        event.<span class="property">keyCode</span> = <span class="number">0</span>;</span><br><span class="line">        event.<span class="property">returnValue</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//禁止先打开控制台然后强行进入</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;请关闭控制台后再访问本站！！！&quot;</span>)</span><br><span class="line">    <span class="keyword">var</span> domain = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">host</span>;<span class="comment">// 获取当前域名</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&quot;https://&quot;</span> + domain;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">outerHeight</span> - <span class="variable language_">window</span>.<span class="property">innerHeight</span> &gt; <span class="number">150</span>) &#123;</span><br><span class="line">    <span class="title function_">a</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">outerWidth</span> - <span class="variable language_">window</span>.<span class="property">innerWidth</span> &gt; <span class="number">150</span>) &#123;</span><br><span class="line">    <span class="title function_">a</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>hexo一键三连后，查看效果</p><p>执行效果如下：</p><ul><li>右键、特定按键打开Devtools，无反应</li><li>先打开控制台后强制进入，会弹窗，强制关闭devtools</li></ul><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091645594.png" alt="image-20240409164540557">  </p>]]></content>
      
      
      <categories>
          
          <category> 博客搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客安全 </tag>
            
            <tag> 禁用调试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>clash配置负载均衡</title>
      <link href="/2024/04/08/clash%E9%85%8D%E7%BD%AE%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"/>
      <url>/2024/04/08/clash%E9%85%8D%E7%BD%AE%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h2 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h2><p>在使用Clash节点的时候，有时候觉得自己的节点网速跑不满，速度不够快。这时候，我们可以尝试着使用负载均衡，来让节点的网速拉满。在渗透测试的时候，目标站点那边有WAF，操作没几分钟就被客户把IP ban掉了，如果使用clash挂上游代理，可以切换IP，但每次被封一个就切换一次，太麻烦，这块就可以使用负载均衡的方式，一个IP被ban后，直接自动切换下一个IP。。。</p><h2 id="0x01-准备材料"><a href="#0x01-准备材料" class="headerlink" title="0x01 准备材料"></a>0x01 准备材料</h2><ul><li>Clash 节点配置</li><li>基于原版 Clash、Clash Premium 或 Clash Meta 的客户端</li></ul><h2 id="0x02-配置步骤"><a href="#0x02-配置步骤" class="headerlink" title="0x02 配置步骤"></a>0x02 配置步骤</h2><h3 id="CFW-Parsers"><a href="#CFW-Parsers" class="headerlink" title="CFW Parsers"></a>CFW Parsers</h3><ol><li>打开 Clash For Windows，转到“设置”→“配置”。点击“预处理配置”右边的“Edit”按钮：</li></ol><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101023662.png" alt="image-20240410102323613">  </p><ol start="2"><li>在内置编辑器中，粘贴以下内容并保存</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">parsers:</span><br><span class="line">  - reg: &#x27;slbable$&#x27;</span><br><span class="line">    yaml:</span><br><span class="line">      append-proxy-groups:</span><br><span class="line">        - name: ⚖️ 负载均衡-散列</span><br><span class="line">          type: load-balance</span><br><span class="line">          url: &#x27;http://www.google.com/generate_204&#x27;</span><br><span class="line">          interval: 300</span><br><span class="line">          strategy: consistent-hashing</span><br><span class="line">        - name: ⚖️ 负载均衡-轮询</span><br><span class="line">          type: load-balance</span><br><span class="line">          url: &#x27;http://www.google.com/generate_204&#x27;</span><br><span class="line">          interval: 300</span><br><span class="line">          strategy: round-robin</span><br><span class="line">      commands:</span><br><span class="line">        - proxy-groups.⚖️ 负载均衡-散列.proxies=[]proxyNames</span><br><span class="line">        - proxy-groups.0.proxies.0+⚖️ 负载均衡-散列</span><br><span class="line">        - proxy-groups.⚖️ 负载均衡-轮询.proxies=[]proxyNames</span><br><span class="line">        - proxy-groups.0.proxies.0+⚖️ 负载均衡-轮询</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101023242.png" alt="image-20240410102331198">  </p><ol start="3"><li>为了防止正常订阅被污染，请自行修改订阅地址，在其后面加上#slbable即可使用负载均衡</li></ol><p>在订阅地址后面手动输入：#slbable</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101023573.png" alt="image-20240410102338531">  </p><ol start="4"><li>点击确定回到【配置】界面，右击配置项选择【预处理配置】。如果出现如下界面，就代表负载均衡规则已加载成功：</li></ol><p>出现 reg(slbable$) 代表负载均衡规则加载成功</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101023311.png" alt="image-20240410102344268">  </p><ol start="5"><li>此时，Clash 已经配置好的节点之间的负载均衡规则。在【代理】-【规则】中出现了【负载均衡-散列】和【负载均衡-轮询】的选项：</li></ol><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101023529.png" alt="image-20240410102350484">  </p><p>新增的<strong>【负载均衡-散列】</strong>和<strong>【负载均衡-轮询】</strong>选项卡</p><p>在只需要重启 Clash 并选择好代理，就可以实现负载均衡效果。</p><ol start="6"><li>重启之后，打开【代理】-【规则】，并点击选择【负载均衡-轮询模式】。然后右击窗口右下角的Clash小蓝猫图标，像右侧图片这样选择。选择【系统代理】、然后代理模式选择【规则】。</li></ol><h3 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h3><p>关于<strong>系统代理</strong>、<strong>TUN模式</strong>、<strong>混合配置</strong>这些，新手可以这么理解：</p><ul><li>系统代理：就是浏览页面、看视频之类的走代理（魔法上网）。游戏、应用之类的不会走代理</li><li>TUN 模式：就是无论网页、游戏、应用还是什么全部按照规则走代理（魔法上网）。</li><li>混合模式：就是上面两个混一起用。</li></ul><h2 id="0x03-测试"><a href="#0x03-测试" class="headerlink" title="0x03 测试"></a>0x03 测试</h2><p>使用Python脚本来简单测试一下：</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">proxies = &#123;<span class="string">&#x27;http&#x27;</span>: <span class="string">&quot;socks5://127.0.0.1:7890&quot;</span>,</span><br><span class="line">           <span class="string">&#x27;https&#x27;</span>: <span class="string">&quot;socks5://127.0.0.1:7890&quot;</span></span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">ips = []</span><br><span class="line"><span class="comment"># IP正则表达式，用于提前返回字符串中的IP</span></span><br><span class="line">regex_str = <span class="string">r&quot;\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.)&#123;3&#125;(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">    response = requests.get(<span class="string">&quot;https://ipinfo.io&quot;</span>, proxies=proxies)</span><br><span class="line">    ip = re.findall(regex_str, response.text)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">if</span> ip <span class="keyword">not</span> <span class="keyword">in</span> ips:</span><br><span class="line">        ips.append(ip)</span><br><span class="line">        <span class="built_in">print</span>(ip)</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101023915.png" alt="image-20240410102358873">  </p>]]></content>
      
      
      <categories>
          
          <category> 杂项 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> clash </tag>
            
            <tag> 负载均衡 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记一次国密站点抓包流程</title>
      <link href="/2024/04/07/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%9B%BD%E5%AF%86%E7%AB%99%E7%82%B9%E6%8A%93%E5%8C%85%E6%B5%81%E7%A8%8B/"/>
      <url>/2024/04/07/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%9B%BD%E5%AF%86%E7%AB%99%E7%82%B9%E6%8A%93%E5%8C%85%E6%B5%81%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="0x00-背景"><a href="#0x00-背景" class="headerlink" title="0x00 背景"></a>0x00 背景</h2><p>目标站点：针对国密站点，此处举例某金融国密站点</p><p>使用工具：GMproxy、burp</p><p>说明：使用GMproxy和burp联动，抓取国密站点的数据包</p><h2 id="0x01-GMproxy说明与使用"><a href="#0x01-GMproxy说明与使用" class="headerlink" title="0x01 GMproxy说明与使用"></a>0x01 GMproxy说明与使用</h2><h3 id="1-说明"><a href="#1-说明" class="headerlink" title="1. 说明"></a>1. 说明</h3><p>为保障重要系统的安全，国家密码管理局要求相应业务系统要做广泛的改造，改用中国标准的公钥密码算法。国密算法的支持已成为业务系统的重要安全保障。</p><p>但随着国密网站的增多，包括很多单位的办公SSL VPN也逐步改造为国密SSL VPN。很多常用浏览器不支持国密SSL网站访问的问题日益突出，如Chrome 、Edge、IE、FireFox火狐 等浏览器均不能访问国密SSL网站。</p><p>“GMProxy”正是来<strong>让任意浏览器支持国密网站的工具</strong>。GMProxy 为绿色软件，下载后解压即可使用。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101029361.png" alt="image-20240410102900222">  </p><h3 id="2-软件下载"><a href="#2-软件下载" class="headerlink" title="2. 软件下载"></a>2. 软件下载</h3><p>最新版的GMProxy：<a href="https://www.gmproxy.cn/GMProxy.msi">https://www.gmproxy.cn/GMProxy.msi</a></p><p>软件签名信息为: <strong>北京水熊虫网络科技有限公司</strong>。</p><p>GMProxy.msi SHA1:0b163a967b96a212a16b74083faf78963b35f375</p><h3 id="3-安装证书"><a href="#3-安装证书" class="headerlink" title="3. 安装证书"></a>3. 安装证书</h3><p>帮助–&gt;安装跟证书，安装到 “受信任的根证书安装机构”下：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101029845.png" alt="image-20240410102913811"> </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101029510.png" alt="image-20240410102919468">  </p><h3 id="4-运行"><a href="#4-运行" class="headerlink" title="4. 运行"></a>4. 运行</h3><p>直接下载后之后，桌面运行快捷方式即可打开：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101029502.png" alt="image-20240410102925460"> </p><h3 id="5-编辑网址列表"><a href="#5-编辑网址列表" class="headerlink" title="5. 编辑网址列表"></a>5. 编辑网址列表</h3><p>只有在国密网址列表中的URL 才会启动国密SSL 转换，无论访问HTTP 还是HTTPS ，GMProxy 都会转换成国密https进行访问。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101029472.png" alt="image-20240410102931437"> </p><h3 id="6-备注"><a href="#6-备注" class="headerlink" title="6. 备注"></a>6. 备注</h3><p>这个工具使用有时间限制，会涉及到软件激活：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101029406.png" alt="image-20240410102935364"> </p><h2 id="0x02-普通浏览器访问国密站点"><a href="#0x02-普通浏览器访问国密站点" class="headerlink" title="0x02 普通浏览器访问国密站点"></a>0x02 普通浏览器访问国密站点</h2><p>“GMProxy”正是来<strong>让任意浏览器支持国密网站的工具</strong>。</p><p>1、当我们不使用GMProxy的时候，使用chrome浏览器，会提示如下：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101029449.png" alt="image-20240410102941397"> </p><p>2、使用GMProxy来访问国密站点</p><p>（1）首先，在浏览器上设置代理，将流量转发到GMProxy（GMProxy默认端口<strong>18080</strong>）</p><p><img src="C:/Users/HONOR/AppData/Roaming/Typora/typora-user-images/image-20240410102946428.png" alt="image-20240410102946428"> </p><p>（2）开启代理，重新访问国密站点，访问成功 </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101029426.png" alt="image-20240410102953367"> </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101029629.png" alt="image-20240410102958572"> </p><h2 id="0x03-burp联动GMProxy"><a href="#0x03-burp联动GMProxy" class="headerlink" title="0x03 burp联动GMProxy"></a>0x03 burp联动GMProxy</h2><p>1、可以通过给BurpSuite 设置<strong>Upstream</strong> 代理 ，实现对国密HTTPS的测试</p><p>（这块将 burp抓到的流量转发到GMProxy）</p><p>User OPtions –&gt; UpStream proxy</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101030083.png" alt="image-20240410103003046"></p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101030235.png" alt="image-20240410103009205"> </p><p>2、浏览器正常开启burp代理</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101030629.png" alt="image-20240410103015597"> </p><p>3、成功抓取到国密站点流量，并可以正常访问</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101030545.png" alt="image-20240410103026503"> </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101030816.png" alt="image-20240410103031752"> </p>]]></content>
      
      
      <categories>
          
          <category> 渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透测试 </tag>
            
            <tag> 抓包 </tag>
            
            <tag> burp </tag>
            
            <tag> 国密站点 </tag>
            
            <tag> GMproxy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记一次web站点检测burp证书抓包</title>
      <link href="/2024/04/07/%E8%AE%B0%E4%B8%80%E6%AC%A1web%E7%AB%99%E7%82%B9%E6%A3%80%E6%B5%8Bburp%E8%AF%81%E4%B9%A6%E6%8A%93%E5%8C%85/"/>
      <url>/2024/04/07/%E8%AE%B0%E4%B8%80%E6%AC%A1web%E7%AB%99%E7%82%B9%E6%A3%80%E6%B5%8Bburp%E8%AF%81%E4%B9%A6%E6%8A%93%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h2 id="0x00-背景"><a href="#0x00-背景" class="headerlink" title="0x00 背景"></a>0x00 背景</h2><p>目标站点：某期货公司web站点</p><p>工具：charles、burp</p><p>说明：web站点开启burp后不能访问，但使用Charle抓包正常。</p><h2 id="0x01-分析"><a href="#0x01-分析" class="headerlink" title="0x01 分析"></a>0x01 分析</h2><p>1、访问目标地址：可以正常访问</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101028089.png" alt="image-20240410102802034">  </p><p>2、开启burp抓包，发现不能成功访问了</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101028969.png" alt="image-20240410102807932"> </p><p>3、但是使用charles进行抓包，可以成功抓包并访问</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101028019.png" alt="image-20240410102813961"> </p><p>4、所以，猜测当前站点<strong>有对burp证书进行检测</strong>。</p><h2 id="0x02-解决办法"><a href="#0x02-解决办法" class="headerlink" title="0x02 解决办法"></a>0x02 解决办法</h2><p>双层代理屏蔽掉burp证书，让流量从 <strong>浏览器 –&gt; burp –&gt;Charles</strong>：</p><p>1、首先，在burp上配置上游代理，让burp的流量转发到Charles：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101028423.png" alt="image-20240410102820377"></p><p>2、浏览器上正常开启burp代理</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101028074.png" alt="image-20240410102826031"></p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101028705.png" alt="image-20240410102834676"></p><p>3、打开Charles，Charles默认监听8888端口：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101028678.png" alt="image-20240410102840645"> </p><p>4、重新访问地址，可以成功访问并抓包：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101028384.png" alt="image-20240410102847329">  </p>]]></content>
      
      
      <categories>
          
          <category> 渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透测试 </tag>
            
            <tag> 抓包 </tag>
            
            <tag> burp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记一次VPN不走全局代理抓包解决办法</title>
      <link href="/2024/04/07/%E8%AE%B0%E4%B8%80%E6%AC%A1VPN%E4%B8%8D%E8%B5%B0%E5%85%A8%E5%B1%80%E4%BB%A3%E7%90%86%E6%8A%93%E5%8C%85%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"/>
      <url>/2024/04/07/%E8%AE%B0%E4%B8%80%E6%AC%A1VPN%E4%B8%8D%E8%B5%B0%E5%85%A8%E5%B1%80%E4%BB%A3%E7%90%86%E6%8A%93%E5%8C%85%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h3 id="0x00-背景"><a href="#0x00-背景" class="headerlink" title="0x00 背景"></a>0x00 背景</h3><p>站点：内网 web 环境</p><p>访问方式：本地下载VPN连接，访问web站点</p><p>问题：使用burp正常抓包，发现没有响应</p><h3 id="0x01-抓包分析"><a href="#0x01-抓包分析" class="headerlink" title="0x01 抓包分析"></a>0x01 抓包分析</h3><p>1、首先，访问站点，使用burp抓包，发现可以抓到请求包，但没有响应</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101026848.png" alt="image-20240410102621701">  </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101026529.png" alt="image-20240410102629496">  </p><p>2、同时，开启burp代理抓包后，web站点不能访问；关闭代理，又可以正常访问：</p><ul><li>关闭代理</li></ul><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101026082.png" alt="image-20240410102635955">  </p><ul><li>开启代理</li></ul><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101026949.png" alt="image-20240410102642920">  </p><p>3、通过wireshark抓包分析，可以看到，当burp抓包重放后，流量不再经过我们的VPN，而是在发送到了当前WIFI所在内网中：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101026628.png" alt="image-20240410102651606">  </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101026537.png" alt="image-20240410102657524">  </p><p>这块的 10.xx.xx.48为目标测试地址；10.101.22.62为当前wifi地址。</p><p>4、初步猜测，是easyconnect VPN不是全局代理，只是针对部分exe类应用，如浏览器(chrome.exe)、cmd.exe等做了代理。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101027473.png" alt="image-20240410102709452">  </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101027129.png" alt="image-20240410102716102">  </p><h3 id="0x02-解决办法"><a href="#0x02-解决办法" class="headerlink" title="0x02 解决办法"></a>0x02 解决办法</h3><p>使用端口转发工具做端口转发。让流量的一个走向为：浏览器-&gt;burp-&gt;端口转发-&gt;VPN-&gt;服务端</p><ul><li>端口转发工具：ew（其它类似工具也可以）</li><li>转发代理：走socks5代理</li></ul><p>1、使用ew设置全局端口转发</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101027828.png" alt="image-20240410102723818">  </p><p>2、burp配置socks代理</p><p>user options –&gt; socks proxy，配置同ew即可</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101027392.png" alt="image-20240410102730363">  </p><p>3、浏览器开启http代理，正常请求</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101027207.png" alt="image-20240410102736179">  </p><p>4、使用burp成功抓包</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101027630.png" alt="image-20240410102742575">  </p>]]></content>
      
      
      <categories>
          
          <category> 渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透测试 </tag>
            
            <tag> 抓包 </tag>
            
            <tag> VPN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>unveilr反编译微信小程序</title>
      <link href="/2024/04/06/unveilr%E5%8F%8D%E7%BC%96%E8%AF%91%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
      <url>/2024/04/06/unveilr%E5%8F%8D%E7%BC%96%E8%AF%91%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101024241.png" alt="image-20240410102424221">  </p><p>针对与微信小程序，网上的工具比较多，但个人感觉比较好用的是 unveilr.exe。下面针对这个工具主要介绍一下使用方法。</p><h2 id="定位小程序中加载的-wxapkg文件"><a href="#定位小程序中加载的-wxapkg文件" class="headerlink" title="定位小程序中加载的.wxapkg文件"></a>定位小程序中加载的.wxapkg文件</h2><p>1、微信设置中找到文件夹所在位置。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101024205.png" alt="image-20240410102432189">  </p><p>2、定位过去，找到APPlet文件夹，该文件夹下面存放的是小程序加载后的缓存文件。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101024112.png" alt="image-20240410102439099">  </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101024810.png" alt="image-20240410102446795">  </p><p>3、由于可能之前加载过其他的小程序，在定位目标程序之前，可以将APPlet文件夹下内容清空</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101024280.png" alt="image-20240410102453267">  </p><p>4、加载目标程序，这块以【xxx就业】小程序为例</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101025831.png" alt="image-20240410102507813"> </p><p>5、获取到加载的小程序.wxakg文件</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101025226.png" alt="image-20240410102515218">  </p><h2 id="unveilr反编译-wxakg文件"><a href="#unveilr反编译-wxakg文件" class="headerlink" title="unveilr反编译.wxakg文件"></a>unveilr反编译.wxakg文件</h2><p>1、使用如下命令，对目标小程序进行反编译</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">unveilr.exe &quot;xxxx\Applet\wxff689bf2602ab223\12&quot;   //这块直接写文件夹名称就行，会自动读取加载的</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101025538.png" alt="image-20240410102520524">  </p><h2 id="微信开发者助手加载进行调试"><a href="#微信开发者助手加载进行调试" class="headerlink" title="微信开发者助手加载进行调试"></a>微信开发者助手加载进行调试</h2><p>1、成功加载了小程序，但是有个报错：”不在以下 request 合法域名列表中”</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101025220.png" alt="image-20240410102526174">  </p><p>解决办法：详情-&gt;本地设置，勾选上不校验合法域名：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101025042.png" alt="image-20240410102532006">  </p><p>重新加载小程序，发现没有报错了！</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101025787.png" alt="image-20240410102537744">  </p><p>2、点击【职位】模块，报错 “ Cannot read property ‘length’ of undefined”</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101025628.png" alt="image-20240410102543598">  </p><p>解决办法：参考如下链接</p><p><a href="https://developers.weixin.qq.com/community/develop/doc/000e2e36b6c8106a882a514495d000">https://developers.weixin.qq.com/community/develop/doc/000e2e36b6c8106a882a514495d000</a></p><p>使用 res.data.result 前 ，先使用 if(res.data&amp;&amp;res.data.result) 进行空值判断，为真后继续你的逻辑处理。</p><p><a href="https://blog.csdn.net/lily__an/article/details/89226181">https://blog.csdn.net/lily__an/article/details/89226181</a></p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101025509.png" alt="image-20240410102549484">  </p><p>按照这种解决办法，可以修改JS中的代码如下：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101025348.png" alt="image-20240410102556317">  </p><p>重新加载，就会发现不再报错了！</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101026431.png" alt="image-20240410102602390">  </p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>排错思路，就是哪里有问题解决哪里的问题。</p><p>这种一般网上找解决办法都是有的，百度就ok！</p>]]></content>
      
      
      <categories>
          
          <category> 渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透测试 </tag>
            
            <tag> 小程序 </tag>
            
            <tag> unveilr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo开始写博客</title>
      <link href="/2024/03/26/hexo%E5%BC%80%E5%A7%8B%E5%86%99%E5%8D%9A%E5%AE%A2/"/>
      <url>/2024/03/26/hexo%E5%BC%80%E5%A7%8B%E5%86%99%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="新建文章"><a href="#新建文章" class="headerlink" title="新建文章"></a>新建文章</h1><p>命令：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo new [layout] title  或  hexo n [layout] title</span><br></pre></td></tr></table></figure><p>创建文章前要先选定模板，在hexo中也叫做布局。hexo支持三种布局（layout）：post(默认)、draft、page。</p><p>这块先介绍如何使用已有布局，后面还将会介绍如何自定义布局。</p><p>在博客目录下输入以下命令时，会默认使用post布局，然后自动在source_posts目录生成一个text.md文件：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo n text</span><br></pre></td></tr></table></figure><p>当然，也可以执行布局</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo n [layout_name] draft1</span><br></pre></td></tr></table></figure><p>该命令创建了一个使用特定布局的名为draft1的文章。</p><p>打开之前创建的test.md文件，可以看到文章开头包含如下内容：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: text1</span><br><span class="line">author: luyao</span><br><span class="line">date: 2020-04-10 04:13:36</span><br><span class="line">tags: hexo</span><br><span class="line">categories: blog</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>如何自定义布局呢？实际上，布局是一个markdown文件，它们保存在scaffolds&#x2F;目录下，可以看到hexo自带的三种布局其实就是三个.md文件：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101022175.png" alt="image-20240410102220147">  </p><p>每一个文件中的内容实际只包含一个Front-matter。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101022119.png" alt="image-20240410102227091">  </p><p>因此，可以在这里修改布局或者建立新的布局，然后创建文章时使用这些布局。</p><h1 id="开始写文章"><a href="#开始写文章" class="headerlink" title="开始写文章"></a>开始写文章</h1><p>两个虚线之间的内容就是叫Front-matter，主要是文章的配置，具体配置如下，不同主题配置不一样，这块以<strong>Matery</strong>主题为例</p><p>Front-matter 选项中的所有内容均为<strong>非必填</strong>的。但我仍然建议至少填写 title 和 date 的值。</p><table><thead><tr><th align="center"><strong>配置选项</strong></th><th align="center"><strong>默认值</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td align="center">title</td><td align="center">Markdown 的文件标题</td><td>文章标题，强烈建议填写此选项</td></tr><tr><td align="center">date</td><td align="center">文件创建时间日期</td><td>建议使用发布日期时间</td></tr><tr><td align="center">author</td><td align="center">根 _config.yml 中的 author</td><td>文章作者</td></tr><tr><td align="center">img</td><td align="center">featureImages 中的某个值</td><td>文章特征图，推荐使用图床(腾讯云、七牛云、又拍云等)来做图片的路径.如: <a href="http://xxx.com/xxx.jpg">http://xxx.com/xxx.jpg</a></td></tr><tr><td align="center">top</td><td align="center">true</td><td>推荐文章（文章是否置顶），如果 top 值为 true，则会作为首页推荐文章</td></tr><tr><td align="center">cover</td><td align="center">false</td><td>v1.0.2版本新增，表示该文章是否需要加入到首页轮播封面中</td></tr><tr><td align="center">coverImg</td><td align="center">无</td><td>v1.0.2版本新增，表示该文章在首页轮播封面需要显示的图片路径，如果没有，则默认使用文章的特色图片</td></tr><tr><td align="center">password</td><td align="center">无</td><td>文章阅读密码，如果要对文章设置阅读验证密码的话，就可以设置 password 的值，该值必须是用 SHA256 加密后的密码，防止被他人识破。前提是在主题的 config.yml 中激活了 verifyPassword 选项</td></tr><tr><td align="center">toc</td><td align="center">true</td><td>是否开启 TOC，可以针对某篇文章单独关闭 TOC 的功能。前提是在主题的 config.yml 中激活了 toc 选项</td></tr><tr><td align="center">mathjax</td><td align="center">false</td><td>是否开启数学公式支持 ，本文章是否开启 mathjax，且需要在主题的 _config.yml 文件中也需要开启才行</td></tr><tr><td align="center">summary</td><td align="center">无</td><td>文章摘要，自定义的文章摘要内容，如果这个属性有值，文章卡片摘要就显示这段文字，否则程序会自动截取文章的部分内容作为摘要</td></tr><tr><td align="center">categories</td><td align="center">无</td><td>文章分类，本主题的分类表示宏观上大的分类，只建议一篇文章一个分类</td></tr><tr><td align="center">tags</td><td align="center">无</td><td>文章标签，一篇文章可以多个标签</td></tr><tr><td align="center">keywords</td><td align="center">文章标题</td><td>文章关键字，SEO 时需要</td></tr><tr><td align="center">reprintPolicy</td><td align="center">cc_by</td><td>文章转载规则， 可以是 cc_by, cc_by_nd, cc_by_sa, cc_by_nc, cc_by_nc_nd, cc_by_nc_sa, cc0, noreprint 或 pay 中的一个</td></tr></tbody></table><p>以下为文章的 Front-mattre示例：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: hexo开始写博客</span><br><span class="line">date: 2024-03-26 09:25:00</span><br><span class="line">author: Muhe</span><br><span class="line">img: /source/images/xxx.jpg</span><br><span class="line">top: true</span><br><span class="line">cover: true</span><br><span class="line">coverImg: /images/1.jpg</span><br><span class="line">password: 8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92</span><br><span class="line">toc: false</span><br><span class="line">mathjax: false</span><br><span class="line">summary: 这是你自定义的文章摘要内容，如果这个属性有值，文章卡片摘要就显示这段文字，否则程序会自动截取文章的部分内容作为摘要</span><br><span class="line">categories: Markdown</span><br><span class="line">tags:</span><br><span class="line">  - Typora</span><br><span class="line">  - Markdown</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>【Tips】发现一个问题，每次hexo n的时候Front-matter中内容少的可怜，那怎么修改默认的格式呢？只要去主目录下找到scaffolds文件夹下找到一个post.md文件修改即可：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line"># 标题</span><br><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">author: 无敌小小弋</span><br><span class="line"># 简述</span><br><span class="line">summary:</span><br><span class="line"># 使用自定义封面 </span><br><span class="line">img: </span><br><span class="line"># 是否置顶true，或者去掉</span><br><span class="line">top: true</span><br><span class="line"># 轮播</span><br><span class="line">cover:</span><br><span class="line"># 轮播图</span><br><span class="line">coverImg: </span><br><span class="line"># 标签</span><br><span class="line">tags: </span><br><span class="line"># 分类</span><br><span class="line">categories: </span><br><span class="line"># 是否加密文章，SHA256加密</span><br><span class="line">password: </span><br><span class="line">---</span><br></pre></td></tr></table></figure><h1 id="文章插入图片"><a href="#文章插入图片" class="headerlink" title="文章插入图片"></a>文章插入图片</h1><p>图片几乎是写博客时不可或缺的元素。在hexo中插入图片需要先进行一些设置，不过在介绍那之前让我们先回顾一下markdown引用图片的语法：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">![alt](path [title])</span><br></pre></td></tr></table></figure><ul><li>path是必选的，表示图片的路径，可使用绝对或相对路径。</li><li>alt是可选的，是图片无法加载时的替代描述文本。</li><li>title是可选的，是图片的标题。</li></ul><p>在hexo中，引用图片不是简单的使用上述语法即可，你还需要为图片制定一个<strong>资源文件夹</strong>。具体来说，hexo中文章引用图片有两种方式：</p><ol><li><p>将所有文章的图片放到source&#x2F;images 文件夹中（没有就自己创建一个），然后使用markdown语句引用图片。这种方法一般适用于包含少量图片的hexo项目，但是当文章数量增多，图片数也随之增加后，该管理方式就显得有些混乱。因此我个人推荐你使用下面一种方法。</p></li><li><p>为每一个文章创建一个资源文件夹，将图片保存其中，具体步骤如下：</p><ul><li><p>在博客根目录打开_config.yml文件做如下修改：<br>yaml post_asset_folder: true</p></li><li><p>然后使用hexo n text命令后创建一个使用post布局名为text的文章，你将发现hexo在\source_post文件夹下创建了一个\text文件夹以及同名的.md文件：</p></li><li><p>最后就可以打开text.md文件进行编辑了，你可以把要引用的图片放到同名文件夹下，然后使用相对路径进行引用。<strong>注意</strong>：请不要自作聪明将text.md文件移动到同名文件夹下，经本人尝试，发现这样会导致图片无法正常引用。</p></li></ul></li></ol><p><strong>Tip</strong>：如果你使用的是<a href="https://link.zhihu.com/?target=https://www.typora.io/">Typora</a>编辑器，可以在编辑器的文件&#x2F;偏好设置&#x2F;图像中进行如下设置：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101022069.png" alt="image-20240410102243042">  </p><p>这样每次直接拷贝到文章的截图将会被自动保存到同名的文件夹下，非常方便~</p><p>但有可能设置了上面的相关配置后，图片依旧加载不出来，下面是两种解决办法：</p><h2 id="本地图片加载不出来"><a href="#本地图片加载不出来" class="headerlink" title="本地图片加载不出来"></a>本地图片加载不出来</h2><p>插件<a href="https://link.zhihu.com/?target=https://github.com/hexojs/hexo-renderer-marked">hexo-renderer-marked</a>解决了这个问题。可以直接用npm install hexo-renderer-marked命令直接安装，之后在config.yaml中更改配置如下：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">post_asset_folder: true</span><br><span class="line">marked:</span><br><span class="line">  prependRoot: true</span><br><span class="line">  postAsset: true</span><br></pre></td></tr></table></figure><p>hexo三连后，本地加载的图片就可以正常显示了。</p><h2 id="在线图片加载不出来"><a href="#在线图片加载不出来" class="headerlink" title="在线图片加载不出来"></a>在线图片加载不出来</h2><p>这个解决方法其实很简单，只需要文章的头部如下图所示位置添加<meta name="referrer" content="no-referrer"/>这一句话就可以完美解决问题</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404101022344.png" alt="image-20240410102251316">  </p><h1 id="插入视频"><a href="#插入视频" class="headerlink" title="插入视频"></a>插入视频</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;video width=&quot;480&quot; height=&quot;320&quot; controls&gt;</span><br><span class="line">     &lt;source src=video_path&gt;</span><br><span class="line">&lt;/video&gt;</span><br></pre></td></tr></table></figure><ul><li>video_path是视频的存储路径（含双引号），你可以把视频放在文章的同名资源文件夹下，然后用相对路径方式引用。</li><li>width和height是视频区块的宽度和高度，可自定义。</li></ul><h1 id="删除文章"><a href="#删除文章" class="headerlink" title="删除文章"></a>删除文章</h1><p>删除文章的过程一样也很简单，先删除本地文件，然后通过生成和部署命令进而将远程仓库中的文件也一并删除。具体来说，以最开始默认形成的helloworld.md这篇文章为例。</p><p>首先进入到source &#x2F; _post 文件夹中，找到helloworld.md文件，在本地直接执行删除。然后依次执行hexo g，hexo d，再去主页查看你就会发现你的博客上面已经空空如也了，这就是如何删除文章的方法。</p>]]></content>
      
      
      <categories>
          
          <category> 博客搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自定义博客主题相关设置</title>
      <link href="/2024/03/22/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8D%9A%E5%AE%A2%E4%B8%BB%E9%A2%98%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/"/>
      <url>/2024/03/22/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8D%9A%E5%AE%A2%E4%B8%BB%E9%A2%98%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="安装butterfly主题"><a href="#安装butterfly主题" class="headerlink" title="安装butterfly主题"></a>安装butterfly主题</h1><p>首先，在hexo的根目录下使用如下命令下载主题</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</span><br></pre></td></tr></table></figure><p>npm安装pug 和 stylus 渲染器。不然会报错</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><p>修改项目根目录下的_config.yml文件（称为站点配置文件），开启主题。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Extensions</span><br><span class="line">## Plugins: https://hexo.io/plugins/</span><br><span class="line">## Themes: https://hexo.io/themes/</span><br><span class="line">theme: butterfly</span><br></pre></td></tr></table></figure><p>【建议】</p><p>为了减少升级&#x2F;修改主题带来的不便，可以将主题目录下（&#x2F;blog&#x2F;theme）的配置文件 _config.yml 重命名为 _config.butterfly.yml，复制到 Hexo 根目录下与_config.yml同级。</p><p>Hexo会自动合并主题中的_config.yml和 _config.butterfly.yml ，如果存在同名配置，会使用_config.butterfly.yml的配置，其优先度较高。所以像和博客网址相关联的固定资料可以设置在_config.yml中，比如博客的标题、作者信息和邮箱等等资料，而和主题样式相关的配置放在 _config.butterfly.yml 中，那么在将来你想换一个主题是很方便的。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091730067.png" alt="image-20240409173030013"> </p><h1 id="导航栏菜单"><a href="#导航栏菜单" class="headerlink" title="导航栏菜单"></a>导航栏菜单</h1><p>修改主题配置文件 _config.butterfly.yml</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">menu:</span><br><span class="line">  主页: / || fas fa-home</span><br><span class="line">  博文 || fa fa-graduation-cap:</span><br><span class="line">    分类: /categories/ || fa fa-archive</span><br><span class="line">    标签: /tags/ || fa fa-tags</span><br><span class="line">    归档: /archives/ || fa fa-folder-open</span><br><span class="line">  生活 || fas fa-list:</span><br><span class="line">    分享: /shuoshuo/ || fa fa-comments-o</span><br><span class="line">    相册: /photos/ || fa fa-camera-retro</span><br><span class="line">    音乐: /music/ || fa fa-music</span><br><span class="line">    影视: /movies/ || fas fa-video</span><br><span class="line">  友链: /links/ || fa fa-link</span><br><span class="line">  留言板: /comment/ || fa fa-paper-plane</span><br><span class="line">  #留言板: /messageboard/ || fa fa-paper-plane</span><br><span class="line">  关于笔者: /about/ || fas fa-heart  </span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091731911.png" alt="image-20240409173101879">  </p><h1 id="代码块显示"><a href="#代码块显示" class="headerlink" title="代码块显示"></a>代码块显示</h1><p>在_config.butterfly.yml配置文件中可以配置如下功能。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">highlight_theme: mac  #  darker / pale night / light / ocean / mac / mac light / false 代码主题</span><br><span class="line">highlight_copy: true # 复制按钮</span><br><span class="line">highlight_lang: false # 是否显示代码语言</span><br><span class="line">highlight_shrink: false # true: 代码块默认不展开 / false: 代码块默认展开 | none: 展开并隐藏折叠按钮</span><br><span class="line">highlight_height_limit: false # unit: px</span><br><span class="line">code_word_wrap: false #代码自动换行，关闭滚动条</span><br></pre></td></tr></table></figure><p>同时将站点默认配置文件_config.yml的highlight设置为false。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">highlight:</span><br><span class="line">  enable: false</span><br><span class="line">  line_number: false</span><br><span class="line">  auto_detect: false</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091731319.png" alt="image-20240409173121285"> </p><h1 id="本地搜索功能"><a href="#本地搜索功能" class="headerlink" title="本地搜索功能"></a>本地搜索功能</h1><p>如果要使用本地搜索功能，需要安装 hexo-generator-search 插件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><p>修改_config.butterfly.yml 配置文件：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Local search</span><br><span class="line">local_search:</span><br><span class="line">  enable: true</span><br><span class="line">  labels:</span><br><span class="line">    input_placeholder: Search for Posts</span><br><span class="line">    hits_empty: &quot;We didn&#x27;t find any results for the search: $&#123;query&#125;&quot; # 如果没有查到内容相关内容显示</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091731709.png" alt="image-20240409173142597">  </p><h1 id="修改副标题"><a href="#修改副标题" class="headerlink" title="修改副标题"></a>修改副标题</h1><p>修改主题配置文件 _config.butterfly.yml:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># the subtitle on homepage (主頁subtitle)</span><br><span class="line">subtitle:</span><br><span class="line">  enable: true</span><br><span class="line">  # Typewriter Effect (开启打字效果)</span><br><span class="line">  effect: true</span><br><span class="line">  # loop (循環打字)</span><br><span class="line">  loop: true</span><br><span class="line">  # source調用第三方服務</span><br><span class="line">  # source: false 關閉調用</span><br><span class="line">  # source: 1  調用搏天api的隨機語錄（簡體）</span><br><span class="line">  # source: 2  調用一言網的一句話（簡體）</span><br><span class="line">  # source: 3  調用一句網（簡體）</span><br><span class="line">  # source: 4  調用今日詩詞（簡體）</span><br><span class="line">  # subtitle 會先顯示 source , 再顯示 sub 的內容</span><br><span class="line">  source: false</span><br><span class="line">  # 如果有英文逗号&#x27; , &#x27;,请使用转义字元 &amp;#44;</span><br><span class="line">  # 如果有英文双引号&#x27; &quot; &#x27;,请使用转义字元 &amp;quot;</span><br><span class="line">  # 开头不允許转义字元，如需要，请把整個句子用双引号包住</span><br><span class="line">  # 如果关闭打字效果，subtitle只会现示sub的第一行文字</span><br><span class="line">  sub:</span><br><span class="line">    - 从来没有真正的绝境，只有心灵的迷途</span><br><span class="line">    - Never really desperate，only the lost of the soul</span><br><span class="line">    - 没有选择会是唯一的路</span><br><span class="line">    - No choice will be the only way</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091731603.png" alt="image-20240409173155522">   </p><h1 id="图片设置"><a href="#图片设置" class="headerlink" title="图片设置"></a>图片设置</h1><p>图片可以用云链接或者本地路径：&#x2F;themes&#x2F;butterfly&#x2F;source&#x2F;img。修改主题配置文件_config.butterfly.yml：</p><h2 id="网站图标"><a href="#网站图标" class="headerlink" title="网站图标"></a>网站图标</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Favicon（网站图）</span><br><span class="line">favicon: /img/favicon.png</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091732790.png" alt="image-20240409173204664">  </p><h2 id="头像"><a href="#头像" class="headerlink" title="头像"></a>头像</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">avatar:</span><br><span class="line">  img: /img/avatar.jpg #图片路径</span><br><span class="line">  effect: false #头像会一直转圈  </span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091737311.png" alt="image-20240409173712278">  </p><h2 id="主页封面图片"><a href="#主页封面图片" class="headerlink" title="主页封面图片"></a>主页封面图片</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># The banner image of home page</span><br><span class="line">index_img: /img/background.jpg</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091738768.png" alt="image-20240409173816493">  </p><h2 id="文章详情页顶部图片"><a href="#文章详情页顶部图片" class="headerlink" title="文章详情页顶部图片"></a>文章详情页顶部图片</h2><p>当没有在front-matter设置top_img和cover的情况下会显示该图</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># If the banner of page not setting, it will show the top_img</span><br><span class="line">default_top_img: /img/default_top_img.jpg </span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091739148.png" alt="image-20240409173923951">  </p><h2 id="归档页底部图片"><a href="#归档页底部图片" class="headerlink" title="归档页底部图片"></a>归档页底部图片</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#归档子标签页图片</span><br><span class="line"># The banner image of archive page</span><br><span class="line">archive_img: /img/archive.jpg</span><br></pre></td></tr></table></figure><h2 id="tag页顶部图片"><a href="#tag页顶部图片" class="headerlink" title="tag页顶部图片"></a>tag页顶部图片</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#tag页（标签页）</span><br><span class="line">tag_img: /img/tag_img.jpg</span><br></pre></td></tr></table></figure><h2 id="category页顶部图片"><a href="#category页顶部图片" class="headerlink" title="category页顶部图片"></a>category页顶部图片</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#category页</span><br><span class="line">category_img: /img/category_img.jpg</span><br></pre></td></tr></table></figure><h2 id="统一文章封面"><a href="#统一文章封面" class="headerlink" title="统一文章封面"></a>统一文章封面</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cover:</span><br><span class="line">  index_enable: true #  是否展示文章封面</span><br><span class="line">  aside_enable: true</span><br><span class="line">  archives_enable: true</span><br><span class="line">  position: both # 封面展示的位置 left/right/both</span><br><span class="line">  # 当没有设置cover时，默认展示的文章封面</span><br><span class="line">  default_cover:</span><br><span class="line">    # 当配置多张图片时，会随机选择一张作为 cover. 此时写法为</span><br><span class="line">    - https:</span><br><span class="line">    - http:</span><br><span class="line">    - http:</span><br><span class="line">    - http:</span><br><span class="line">    - http:</span><br><span class="line">    - http:</span><br></pre></td></tr></table></figure><p>如果需要为每一篇文章设置不同的封面，可以在文章的md文件中添加配置。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hello World        # 标题</span><br><span class="line">tags: [hello]             # 标签</span><br><span class="line">categories:               # 分类</span><br><span class="line">description: hello word~  # 描述</span><br><span class="line">top_img: /img/hello-1.png # 顶部背景图</span><br><span class="line">cover: /img/hello-1.png   # 文章封面</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091739478.png" alt="image-20240409173949425">  </p><h2 id="错误页面"><a href="#错误页面" class="headerlink" title="错误页面"></a>错误页面</h2><p>配置了该属性后会替换无法展示的图片</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Replace Broken Images (替換無法顯示的圖片)</span><br><span class="line">error_img:</span><br><span class="line">  flink: /img/friend_404.gif</span><br><span class="line">  post_page: /img/404.jpg</span><br></pre></td></tr></table></figure><h1 id="图片懒加载"><a href="#图片懒加载" class="headerlink" title="图片懒加载"></a>图片懒加载</h1><p>新增hexo-lazyload-image模块</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">npm install hexo-lazyload-image --save</span><br></pre></td></tr></table></figure><p>在主目录配置文件_config.yml增加配置</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">lazyload:</span><br><span class="line">  enable: <span class="literal">true</span></span><br><span class="line">  loadingImg: /img/loading.gif</span><br></pre></td></tr></table></figure><p>这个就是图片没加载出来的时候，出现一个动图转转转的文章页样式 </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091740516.png" alt="image-20240409174005478">  </p><h1 id="图片放大查看"><a href="#图片放大查看" class="headerlink" title="图片放大查看"></a>图片放大查看</h1><p>修改主题配置文件_config.butterfly.yml</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">medium_zoom: <span class="literal">false</span></span><br><span class="line">fancybox: <span class="literal">true</span></span><br></pre></td></tr></table></figure><h1 id="版权样式"><a href="#版权样式" class="headerlink" title="版权样式"></a>版权样式</h1><p>修改主题配置文件_config.butterfly.yml</p><p>复制的内容后面加上版权信息</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># copy settings</span><br><span class="line"># copyright: Add the copyright information after copied content (複製的內容後面加上版權信息)</span><br><span class="line">copy:</span><br><span class="line">  enable: true # 是否开启网站复制权限</span><br><span class="line">  copyright:  # 复制的内容后面加上版权信息</span><br><span class="line">    enable: false  # 是否开启复制版权信息添加</span><br><span class="line">    limit_count: 50 # 字数限制，当复制文字大于这个字数限制时</span><br></pre></td></tr></table></figure><p>文章版权信息</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">post_copyright:</span><br><span class="line">  enable: true</span><br><span class="line">  decode: true</span><br><span class="line">  license: CC BY-NC-SA 4.0</span><br><span class="line">  license_url: https://creativecommons.org/licenses/by-nc-sa/4.0/</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091740536.png" alt="image-20240409174018503">  </p><h1 id="侧边栏样式"><a href="#侧边栏样式" class="headerlink" title="侧边栏样式"></a>侧边栏样式</h1><p>修改主题配置文件_config.butterfly.yml</p><p>调整侧边栏出现位置</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">aside:</span><br><span class="line">  enable: <span class="literal">true</span></span><br><span class="line">  hide: <span class="literal">false</span></span><br><span class="line">  button: <span class="literal">true</span></span><br><span class="line">  mobile: <span class="literal">true</span> # display on mobile</span><br><span class="line">  position: right # left or right </span><br></pre></td></tr></table></figure><p>个人信息</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">social:</span><br><span class="line">   fab fa-github: https:<span class="comment">//github.com/ || Github</span></span><br><span class="line">   fa fa-book-open: https:<span class="comment">//blog.csdn.net/mjh1667002013 || CSDN</span></span><br><span class="line">   fab fa-qq:  tencent:<span class="comment">//AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=728831102&amp;website=www.oicqzone.com || QQ</span></span><br><span class="line">   fas fa-envelope-open-text: mailto:<span class="number">1976083684</span><span class="meta">@qq</span>.com || Email</span><br></pre></td></tr></table></figure><h1 id="公告栏设置"><a href="#公告栏设置" class="headerlink" title="公告栏设置"></a>公告栏设置</h1><p>修改主题配置文件_config.butterfly.yml</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">card_announcement:</span><br><span class="line">    enable: <span class="literal">true</span></span><br><span class="line">    content: This is my Blog #修改公告栏信息</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091740662.png" alt="image-20240409174030633">  </p><h1 id="TOC目录"><a href="#TOC目录" class="headerlink" title="TOC目录"></a>TOC目录</h1><p>修改主题配置文件_config.butterfly.yml</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"># toc (目錄)</span><br><span class="line">toc:</span><br><span class="line">  post: <span class="literal">true</span></span><br><span class="line">  page: <span class="literal">false</span></span><br><span class="line">  number: <span class="literal">false</span></span><br><span class="line">  expand: <span class="literal">true</span> # 是否展开</span><br><span class="line">  style_simple: <span class="literal">false</span> # <span class="keyword">for</span> post</span><br><span class="line">  scroll_percent: <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091740966.png" alt="image-20240409174038930">  </p><h1 id="背景美化"><a href="#背景美化" class="headerlink" title="背景美化"></a>背景美化</h1><p>修改主题配置文件 _config.butterfly.yml</p><h2 id="鼠标点击效果"><a href="#鼠标点击效果" class="headerlink" title="鼠标点击效果"></a>鼠标点击效果</h2><p>有冒光特效、烟火特效、爱心特效、文字特效，选择其中一个将enable设置为true就可以。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"># Typewriter <span class="title function_">Effect</span> <span class="params">(打字效果)</span></span><br><span class="line"># https:<span class="comment">//github.com/disjukr/activate-power-mode</span></span><br><span class="line">activate_power_mode:</span><br><span class="line">  enable: <span class="literal">false</span></span><br><span class="line">  colorful: <span class="literal">true</span> # open particle <span class="title function_">animation</span> <span class="params">(冒光特效)</span></span><br><span class="line">  shake: <span class="literal">true</span> #  open <span class="title function_">shake</span> <span class="params">(抖动特效)</span></span><br><span class="line">  mobile: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"># Mouse click effects: fireworks (鼠标点击效果:萤火特效)</span><br><span class="line">fireworks:</span><br><span class="line">  enable: <span class="literal">true</span></span><br><span class="line">  zIndex: <span class="number">9999</span> # -<span class="number">1</span> or <span class="number">9999</span></span><br><span class="line">  mobile: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"># Mouse click effects: Heart <span class="title function_">symbol</span> <span class="params">(鼠标点击效果: 爱心)</span></span><br><span class="line">click_heart:</span><br><span class="line">  enable: <span class="literal">false</span></span><br><span class="line">  mobile: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"># Mouse click effects: words (鼠标点击效果: 文字)</span><br><span class="line">ClickShowText:</span><br><span class="line">  enable: <span class="literal">false</span></span><br><span class="line">  text:</span><br><span class="line">     - 富强</span><br><span class="line">     - 民主</span><br><span class="line">     - 文明</span><br><span class="line">     - 和谐</span><br><span class="line">     - 平等</span><br><span class="line">     - 公正</span><br><span class="line">     - 法治</span><br><span class="line">     - 爱国</span><br><span class="line">     - 敬业</span><br><span class="line">     - 诚信</span><br><span class="line">     - 友善</span><br><span class="line">  fontSize: 15px</span><br><span class="line">  random: <span class="literal">true</span></span><br><span class="line">  mobile: <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091740263.png" alt="image-20240409174048213">   </p><h2 id="打字效果"><a href="#打字效果" class="headerlink" title="打字效果"></a>打字效果</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"># Typewriter <span class="title function_">Effect</span> <span class="params">(打字效果)</span></span><br><span class="line"># https:<span class="comment">//github.com/disjukr/activate-power-mode</span></span><br><span class="line">activate_power_mode:</span><br><span class="line">  enable: <span class="literal">true</span></span><br><span class="line">  colorful: <span class="literal">true</span> # open particle <span class="title function_">animation</span> <span class="params">(冒光特效)</span></span><br><span class="line">  shake: <span class="literal">true</span> #  open <span class="title function_">shake</span> <span class="params">(抖动特效)</span></span><br><span class="line">  mobile: <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="背景特效"><a href="#背景特效" class="headerlink" title="背景特效"></a>背景特效</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"># Background <span class="title function_">effects</span> <span class="params">(背景特效)</span></span><br><span class="line"># canvas_ribbon (静止彩带)</span><br><span class="line"># See: https:<span class="comment">//github.com/hustcc/ribbon.js</span></span><br><span class="line">canvas_ribbon:</span><br><span class="line">  enable: <span class="literal">false</span></span><br><span class="line">  size: <span class="number">150</span></span><br><span class="line">  alpha: <span class="number">0.6</span></span><br><span class="line">  zIndex: -<span class="number">1</span></span><br><span class="line">  click_to_change: <span class="literal">false</span></span><br><span class="line">  mobile: <span class="literal">false</span></span><br><span class="line"># Fluttering <span class="title function_">Ribbon</span> <span class="params">(动态彩带)</span></span><br><span class="line">canvas_fluttering_ribbon:</span><br><span class="line">  enable: <span class="literal">false</span></span><br><span class="line">  mobile: <span class="literal">false</span></span><br><span class="line">#星空特效</span><br><span class="line"># canvas_nest</span><br><span class="line"># https:<span class="comment">//github.com/hustcc/canvas-nest.js</span></span><br><span class="line">canvas_nest:</span><br><span class="line">  enable: <span class="literal">true</span></span><br><span class="line">  color: <span class="string">&#x27;0,0,255&#x27;</span> #color of lines, <span class="keyword">default</span>: <span class="string">&#x27;0,0,0&#x27;</span>; RGB values: (R,G,B).(note: use <span class="string">&#x27;,&#x27;</span> to separate.)</span><br><span class="line">  opacity: <span class="number">0.7</span> # the opacity of <span class="title function_">line</span> <span class="params">(<span class="number">0</span>~<span class="number">1</span>)</span>, <span class="keyword">default</span>: <span class="number">0.5</span>.</span><br><span class="line">  zIndex: -<span class="number">1</span> # z-index property of the background, <span class="keyword">default</span>: -<span class="number">1.</span></span><br><span class="line">  count: <span class="number">99</span> # the number of lines, <span class="keyword">default</span>: <span class="number">99.</span></span><br><span class="line">  mobile: <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="自定义背景主题色"><a href="#自定义背景主题色" class="headerlink" title="自定义背景主题色"></a>自定义背景主题色</h2><p>可以修改部分的UI颜色，没测试过</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"># theme_color:</span><br><span class="line">#   enable: <span class="literal">true</span></span><br><span class="line">#   main: <span class="string">&quot;#49B1F5&quot;</span></span><br><span class="line">#   paginator: <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">#   button_hover: <span class="string">&quot;#FF7242&quot;</span></span><br><span class="line">#   text_selection: <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">#   link_color: <span class="string">&quot;#99a9bf&quot;</span></span><br><span class="line">#   meta_color: <span class="string">&quot;#858585&quot;</span></span><br><span class="line">#   hr_color: <span class="string">&quot;#A4D8FA&quot;</span></span><br><span class="line">#   code_foreground: <span class="string">&quot;#F47466&quot;</span></span><br><span class="line">#   code_background: <span class="string">&quot;rgba(27, 31, 35, .05)&quot;</span></span><br><span class="line">#   toc_color: <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">#   blockquote_padding_color: <span class="string">&quot;#49b1f5&quot;</span></span><br><span class="line">#   blockquote_background_color: <span class="string">&quot;#49b1f5&quot;</span></span><br></pre></td></tr></table></figure><h2 id="渐变背景"><a href="#渐变背景" class="headerlink" title="渐变背景"></a>渐变背景</h2><p>默认显示白色，可设置图片或者颜色<br>修改主题配置文件_config.butterfly.yml：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">background:</span><br></pre></td></tr></table></figure><p>设置渐变色步骤：</p><ol><li>在\Butterfly\source\css\目录下创建css文件 background.css：</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">#web_bg &#123;</span><br><span class="line">  background: -webkit-linear-gradient(</span><br><span class="line">    0deg,</span><br><span class="line">    rgba(<span class="number">247</span>, <span class="number">149</span>, <span class="number">51</span>, <span class="number">0.1</span>) <span class="number">0</span>,</span><br><span class="line">    rgba(<span class="number">243</span>, <span class="number">112</span>, <span class="number">85</span>, <span class="number">0.1</span>) <span class="number">15</span>%,</span><br><span class="line">    rgba(<span class="number">239</span>, <span class="number">78</span>, <span class="number">123</span>, <span class="number">0.1</span>) <span class="number">30</span>%,</span><br><span class="line">    rgba(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>, <span class="number">0.1</span>) <span class="number">44</span>%,</span><br><span class="line">    rgba(<span class="number">80</span>, <span class="number">115</span>, <span class="number">184</span>, <span class="number">0.1</span>) <span class="number">58</span>%,</span><br><span class="line">    rgba(<span class="number">16</span>, <span class="number">152</span>, <span class="number">173</span>, <span class="number">0.1</span>) <span class="number">72</span>%,</span><br><span class="line">    rgba(<span class="number">7</span>, <span class="number">179</span>, <span class="number">155</span>, <span class="number">0.1</span>) <span class="number">86</span>%,</span><br><span class="line">    rgba(<span class="number">109</span>, <span class="number">186</span>, <span class="number">130</span>, <span class="number">0.1</span>) <span class="number">100</span>%</span><br><span class="line">  );</span><br><span class="line">  background: -moz-linear-gradient(</span><br><span class="line">    0deg,</span><br><span class="line">    rgba(<span class="number">247</span>, <span class="number">149</span>, <span class="number">51</span>, <span class="number">0.1</span>) <span class="number">0</span>,</span><br><span class="line">    rgba(<span class="number">243</span>, <span class="number">112</span>, <span class="number">85</span>, <span class="number">0.1</span>) <span class="number">15</span>%,</span><br><span class="line">    rgba(<span class="number">239</span>, <span class="number">78</span>, <span class="number">123</span>, <span class="number">0.1</span>) <span class="number">30</span>%,</span><br><span class="line">    rgba(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>, <span class="number">0.1</span>) <span class="number">44</span>%,</span><br><span class="line">    rgba(<span class="number">80</span>, <span class="number">115</span>, <span class="number">184</span>, <span class="number">0.1</span>) <span class="number">58</span>%,</span><br><span class="line">    rgba(<span class="number">16</span>, <span class="number">152</span>, <span class="number">173</span>, <span class="number">0.1</span>) <span class="number">72</span>%,</span><br><span class="line">    rgba(<span class="number">7</span>, <span class="number">179</span>, <span class="number">155</span>, <span class="number">0.1</span>) <span class="number">86</span>%,</span><br><span class="line">    rgba(<span class="number">109</span>, <span class="number">186</span>, <span class="number">130</span>, <span class="number">0.1</span>) <span class="number">100</span>%</span><br><span class="line">  );</span><br><span class="line">  background: -o-linear-gradient(</span><br><span class="line">    0deg,</span><br><span class="line">    rgba(<span class="number">247</span>, <span class="number">149</span>, <span class="number">51</span>, <span class="number">0.1</span>) <span class="number">0</span>,</span><br><span class="line">    rgba(<span class="number">243</span>, <span class="number">112</span>, <span class="number">85</span>, <span class="number">0.1</span>) <span class="number">15</span>%,</span><br><span class="line">    rgba(<span class="number">239</span>, <span class="number">78</span>, <span class="number">123</span>, <span class="number">0.1</span>) <span class="number">30</span>%,</span><br><span class="line">    rgba(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>, <span class="number">0.1</span>) <span class="number">44</span>%,</span><br><span class="line">    rgba(<span class="number">80</span>, <span class="number">115</span>, <span class="number">184</span>, <span class="number">0.1</span>) <span class="number">58</span>%,</span><br><span class="line">    rgba(<span class="number">16</span>, <span class="number">152</span>, <span class="number">173</span>, <span class="number">0.1</span>) <span class="number">72</span>%,</span><br><span class="line">    rgba(<span class="number">7</span>, <span class="number">179</span>, <span class="number">155</span>, <span class="number">0.1</span>) <span class="number">86</span>%,</span><br><span class="line">    rgba(<span class="number">109</span>, <span class="number">186</span>, <span class="number">130</span>, <span class="number">0.1</span>) <span class="number">100</span>%</span><br><span class="line">  );</span><br><span class="line">  background: -ms-linear-gradient(</span><br><span class="line">    0deg,</span><br><span class="line">    rgba(<span class="number">247</span>, <span class="number">149</span>, <span class="number">51</span>, <span class="number">0.1</span>) <span class="number">0</span>,</span><br><span class="line">    rgba(<span class="number">243</span>, <span class="number">112</span>, <span class="number">85</span>, <span class="number">0.1</span>) <span class="number">15</span>%,</span><br><span class="line">    rgba(<span class="number">239</span>, <span class="number">78</span>, <span class="number">123</span>, <span class="number">0.1</span>) <span class="number">30</span>%,</span><br><span class="line">    rgba(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>, <span class="number">0.1</span>) <span class="number">44</span>%,</span><br><span class="line">    rgba(<span class="number">80</span>, <span class="number">115</span>, <span class="number">184</span>, <span class="number">0.1</span>) <span class="number">58</span>%,</span><br><span class="line">    rgba(<span class="number">16</span>, <span class="number">152</span>, <span class="number">173</span>, <span class="number">0.1</span>) <span class="number">72</span>%,</span><br><span class="line">    rgba(<span class="number">7</span>, <span class="number">179</span>, <span class="number">155</span>, <span class="number">0.1</span>) <span class="number">86</span>%,</span><br><span class="line">    rgba(<span class="number">109</span>, <span class="number">186</span>, <span class="number">130</span>, <span class="number">0.1</span>) <span class="number">100</span>%</span><br><span class="line">  );</span><br><span class="line">  background: linear-gradient(</span><br><span class="line">    90deg,</span><br><span class="line">    rgba(<span class="number">247</span>, <span class="number">149</span>, <span class="number">51</span>, <span class="number">0.1</span>) <span class="number">0</span>,</span><br><span class="line">    rgba(<span class="number">243</span>, <span class="number">112</span>, <span class="number">85</span>, <span class="number">0.1</span>) <span class="number">15</span>%,</span><br><span class="line">    rgba(<span class="number">239</span>, <span class="number">78</span>, <span class="number">123</span>, <span class="number">0.1</span>) <span class="number">30</span>%,</span><br><span class="line">    rgba(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>, <span class="number">0.1</span>) <span class="number">44</span>%,</span><br><span class="line">    rgba(<span class="number">80</span>, <span class="number">115</span>, <span class="number">184</span>, <span class="number">0.1</span>) <span class="number">58</span>%,</span><br><span class="line">    rgba(<span class="number">16</span>, <span class="number">152</span>, <span class="number">173</span>, <span class="number">0.1</span>) <span class="number">72</span>%,</span><br><span class="line">    rgba(<span class="number">7</span>, <span class="number">179</span>, <span class="number">155</span>, <span class="number">0.1</span>) <span class="number">86</span>%,</span><br><span class="line">    rgba(<span class="number">109</span>, <span class="number">186</span>, <span class="number">130</span>, <span class="number">0.1</span>) <span class="number">100</span>%</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改配置文件_config.butterfly.yml的引入方式</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"># Inject</span><br><span class="line"># 插入代码到头部 &lt;/head&gt; 之前 和 底部 &lt;/body&gt; 之前</span><br><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">     - &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;/css/background.css&quot;</span>&gt;</span><br><span class="line">  bottom:</span><br><span class="line">    # - &lt;script src=<span class="string">&quot;xxxx&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>如果背景色不生效，设置_config.butterfly.yml</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"># Website <span class="title function_">Background</span> <span class="params">(設置網站背景)</span></span><br><span class="line"># can set it to color or <span class="title function_">image</span> <span class="params">(可設置圖片 或者 顔色)</span></span><br><span class="line"># The formal of image: url(http:<span class="comment">//xxxxxx.com/xxx.jpg)</span></span><br><span class="line">background: <span class="string">&#x27;#efefef&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091740434.png" alt="image-20240409174058336">  </p><h1 id="footer背景"><a href="#footer背景" class="headerlink" title="footer背景"></a>footer背景</h1><p>footer 的背景，当设置 false 时，将与主题色一致。修改主题配置文件_config.butterfly.yml</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"># footer是否显示图片背景(与top_img一致)</span><br><span class="line">footer_bg: <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091741053.png" alt="image-20240409174152727"> </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091742215.png" alt="image-20240409174205076">  </p><h1 id="字数统计"><a href="#字数统计" class="headerlink" title="字数统计"></a>字数统计</h1><p>安装统计组件</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">npm install hexo-wordcount --save or yarn add hexo-wordcount</span><br></pre></td></tr></table></figure><p>修改主题配置文件_config.butterfly.yml</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"># wordcount (字數統計)</span><br><span class="line">wordcount:</span><br><span class="line">  enable: <span class="literal">true</span></span><br><span class="line">  post_wordcount: <span class="literal">true</span></span><br><span class="line">  min2read: <span class="literal">true</span></span><br><span class="line">  total_wordcount: <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091742197.png" alt="image-20240409174215114">  </p><h1 id="添加音乐播放器"><a href="#添加音乐播放器" class="headerlink" title="添加音乐播放器"></a>添加音乐播放器</h1><h2 id="插件安装与配置"><a href="#插件安装与配置" class="headerlink" title="插件安装与配置"></a>插件安装与配置</h2><p>安装 <a href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a> 这款插件。执行如下指令：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">npm install --save hexo-tag-aplayer</span><br></pre></td></tr></table></figure><p>插件配置方式为修改Hexo 的配置文件中进行如下修改。就是你的<a href="https://so.csdn.net/so/search?q=Hexo&spm=1001.2101.3001.7020">Hexo</a>根目录下的_config.yml文件。</p><p>这块直接搜，没有在Hexo目录下的_config.yml文件中找到，将如下内容添加：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">aplayer:</span><br><span class="line">  meting: <span class="literal">true</span></span><br><span class="line">  asset_inject: <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>主题配置文件_config.butterfly.yml中开启aplayerInject：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"># Inject the css and <span class="title function_">script</span> <span class="params">(aplayer/meting)</span></span><br><span class="line">aplayerInject:</span><br><span class="line">  enable: <span class="literal">true</span></span><br><span class="line">  per_page: <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>下面介绍两种常见的用法：</p><h2 id="普通页面播放器"><a href="#普通页面播放器" class="headerlink" title="普通页面播放器"></a>普通页面播放器</h2><p>在博客音乐播放页面（&#x2F;source&#x2F;music&#x2F;index.md）中添加如下：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&#123;% meting <span class="string">&quot;8872308188&quot;</span> <span class="string">&quot;netease&quot;</span> <span class="string">&quot;playlist&quot;</span> <span class="string">&quot;autoplay&quot;</span> <span class="string">&quot;mutex:false&quot;</span> <span class="string">&quot;listmaxheight:400px&quot;</span> <span class="string">&quot;preload:none&quot;</span> <span class="string">&quot;theme:#ad7a86&quot;</span>%&#125;</span><br></pre></td></tr></table></figure><p>常用的选项如下所示:</p><p><strong>server可选</strong>：netease（网易云音乐），tencent（QQ音乐），kugou（酷狗音乐），xiami（虾米音乐），baidu（百度音乐）。建议网易云</p><p><strong>type可选</strong>：song（歌曲），playlist（歌单），album（专辑），search（搜索关键字），artist（歌手）。添加单曲选的歌曲，歌单选择playlist，可以自行尝试。</p><p><strong>id获取示例</strong>: 打开网易云音乐，选择喜欢的歌单，在网页版打开，获取歌单list，填入即可。使用的时候将上边的ID号换为自己喜欢的歌单即可。注意歌单中不能包括VIP音乐，否则无法解析。建议单独建立一个歌单，以后有喜欢的音乐添加进去，网页也会自动同步添加。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091742965.png" alt="image-20240409174227907">  </p><p>lrcType设置为 -1默认显示歌词，放在fixed模式下比较合适。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091743652.png" alt="image-20240409174302343">  </p><h2 id="全局吸底Aplayer模式"><a href="#全局吸底Aplayer模式" class="headerlink" title="全局吸底Aplayer模式"></a>全局吸底Aplayer模式</h2><p>把 aplayer代码 插入到主题配置文件_config.butterfly.yml的 inject.bottom 即可。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">  bottom:</span><br><span class="line">    - &lt;div class=<span class="string">&quot;aplayer no-destroy&quot;</span> data-id=<span class="string">&quot;7422861869&quot;</span> data-server=<span class="string">&quot;netease&quot;</span> data-type=<span class="string">&quot;playlist&quot;</span> data-fixed=<span class="string">&quot;true&quot;</span> data-autoplay=<span class="string">&quot;true&quot;</span> data-lrcType=<span class="string">&quot;-1&quot;</span>&gt; &lt;/div&gt;</span><br></pre></td></tr></table></figure><p>需要修改的参数就只有data-id、data-server、data-type、data-autoplay&#x3D;”true”、data-lrcType&#x3D;”-1”一些常用的参数，可以自行根据需要修改。</p><p>最后，如果你想切换页面时，音乐不会中断。请把主题配置文件的 pjax 设为 true即可。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">pjax:</span><br><span class="line"> enable: ture</span><br><span class="line"> exclude:</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091743658.png" alt="image-20240409174316617"> </p><h1 id="创建主题图库"><a href="#创建主题图库" class="headerlink" title="创建主题图库"></a>创建主题图库</h1><p>执行如下命令，创建photos页面</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">hexo n page photos     #创建你的页面   </span><br></pre></td></tr></table></figure><p>在index.md文件的 Front-matter 中添加如下内容（不现实侧边栏和评论区）</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091743503.png" alt="image-20240409174322454"> </p><p>添加图库集合页</p><p>图库集合页面就是普通的页面，比如上面创建的&#x2F;photos&#x2F;index.md页面，下面将其设置成一个图库集合页面！设置图库集合页面是使用外挂标签来实现的，书写格式如下：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;div class=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>这里面每个galleryGroup中设置的内容如下：</p><ul><li>name：图库名字</li><li>description：图库描述</li><li>link：链接到对应相册地址</li><li>img-url：图库封面地址</li></ul><p>如下所示：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;div class=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span><br><span class="line">&#123;% galleryGroup <span class="string">&#x27;壁紙&#x27;</span> <span class="string">&#x27;收藏的一些壁纸，侵删&#x27;</span> <span class="string">&#x27;/album/wallpaper&#x27;</span> https:<span class="comment">//www.czblogs.cn/album/wallpaper.jpeg %&#125;</span></span><br><span class="line">&#123;% galleryGroup <span class="string">&#x27;风景&#x27;</span> <span class="string">&#x27;相册是我快乐过的证据&#x27;</span> <span class="string">&#x27;/album/life&#x27;</span> https:<span class="comment">//www.czblogs.cn/album/life.jpeg %&#125;</span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>这样设置后，页面就变成了这样</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091743457.png" alt="image-20240409174346000">  </p><p>图库子页面</p><p>此时，点击任何一个图集，都会重定向到 404 页！这是因为我们还没有创建相应的子页面！这里我以《生活》这个相册为例来创建它的子页面！</p><p>第一步：打开终端，切换到本地 Hexo 博客的根目录下，执行如下命令</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> <span class="title class_">page</span> life</span><br></pre></td></tr></table></figure><p>然后会在博客根目录下的&#x2F;source目录下生成名为life的文件夹，并在其中生成一个名为index.md的文件，这个文件就对应着《生活》这个子页面！</p><p>但是此时图库子页面&#x2F;source&#x2F;life&#x2F;index.md跟相册首页&#x2F;source&#x2F;photos&#x2F;index.md是平级的：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091744958.png" alt="image-20240409174400897">  </p><p>第二步：将life整个文件夹都移动到album文件夹中：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091744854.png" alt="image-20240409174408799">  </p><p>第三步：此时打开&#x2F;source&#x2F;photos&#x2F;life&#x2F;index.md文件，修改如下：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091744316.png" alt="image-20240409174417267">  </p><p>第四步：然后在子页面（也就是&#x2F;source&#x2F;photos&#x2F;life&#x2F;index.md）中使用标签外挂挂上自己的照片，写法如下：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![]()</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><p>比如我下面这样，填写很多个自己的图片（图片路径需要自己填充）：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![](https:<span class="comment">//w.wallhaven.cc/full/72/wallhaven-72yzje.jpg)</span></span><br><span class="line">![](https:<span class="comment">//w.wallhaven.cc/full/l8/wallhaven-l8v3ey.png)</span></span><br><span class="line">![](https:<span class="comment">//w.wallhaven.cc/full/1p/wallhaven-1poo61.jpg)</span></span><br><span class="line">![](https:<span class="comment">//w.wallhaven.cc/full/kx/wallhaven-kxj3l1.jpg)</span></span><br><span class="line">![](https:<span class="comment">//w.wallhaven.cc/full/jx/wallhaven-jxl31y.png)</span></span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091744405.png" alt="image-20240409174443067">   </p><h1 id="留言板"><a href="#留言板" class="headerlink" title="留言板"></a>留言板</h1><p>具体实现可参考：<a href="https://fe32.top/articles/hexo1611/">https://fe32.top/articles/hexo1611/</a></p>]]></content>
      
      
      <categories>
          
          <category> 博客搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> blog </tag>
            
            <tag> 主题 </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从0到-1搭建个人博客</title>
      <link href="/2024/03/19/%E4%BB%8E0%E5%88%B0-1%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
      <url>/2024/03/19/%E4%BB%8E0%E5%88%B0-1%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>使用Hexo和GitHub搭建博客的原理主要涉及静态网站生成与托管两个核心环节：</p><p>首先，Hexo是一个基于Node.js的静态博客框架。它的工作原理是解析使用Markdown（或其他渲染引擎）编写的文章，并利用主题模板生成静态网页。这意味着，当使用Hexo创建博客时，其实是在本地编写和预览博客的内容。Hexo的优势在于其快速、简洁且高效，使创作者无需关注太多技术细节。</p><p>然后，生成的静态网页需要托管到网络上以供他人访问。GitHub Pages是一个很好的选择，它是一个允许用户在其GitHub仓库上托管静态网页的服务。通过将Hexo生成的静态网页推送到GitHub仓库，并利用GitHub Pages的设置功能，就可以将博客发布到互联网上。</p><p>因此，使用Hexo+GitHub搭建博客的原理就是：利用Hexo生成静态网页，然后将这些网页托管到GitHub Pages上，从而实现博客的在线发布和访问。</p><p>具体来说，搭建过程主要包括以下几个步骤：</p><ol><li>安装Git和Node.js，这是使用Hexo和GitHub的前提。</li><li>安装Hexo，并初始化博客项目。</li><li>在GitHub上创建个人仓库，用于存放博客的源代码和静态网页。</li><li>将Hexo生成的静态网页推送到GitHub仓库。</li><li>在GitHub仓库中设置GitHub Pages，选择正确的分支和目录，以便正确托管静态网页。</li><li>更改Hexo的主题，以定制博客外观。</li><li>设置个人域名（可选），以便使用自定义域名访问博客。</li><li>开始使用Hexo编写和发布文章，每次发布新文章时，只需运行Hexo的生成命令，然后将生成的静态网页推送到GitHub即可。</li></ol><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><h2 id="注册github账号"><a href="#注册github账号" class="headerlink" title="注册github账号"></a>注册github账号</h2><p>前往github官网进行账号注册。（若已有账号，此步骤可忽略）</p><figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">https://www.github.com/    </span><br></pre></td></tr></table></figure><p>注册之后，要记住邮箱和用户名，这块在后面会用到。</p><h2 id="安装NodeJS"><a href="#安装NodeJS" class="headerlink" title="安装NodeJS"></a>安装NodeJS</h2><p>Hexo是基于NodeJS的静态框架博客，所以，如果要安装Hexo，前提条件是要有NodeJS的环境。<br>进入NodeJS官网，下载对应的版本。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091709927.png" alt="image-20240409170903874">  </p><p>如果是windows，安装的时候建议无脑下一步就行，如果 C 盘不吃紧的话，然后勾选所有组件，并勾选 Add to Path 将其添加到系统环境变量。</p><p>如果是Linux，可以参考这篇文章：</p><p><a href="https://blog.csdn.net/qq_41974199/article/details/119328353">https://blog.csdn.net/qq_41974199/article/details/119328353</a></p><p>安装Node.js 会包含环境变量以及 npm 的安装，安装后，可以在命令行输入如下命令检测是否安装成功：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">node -v   //显示 nodejs 的版本号。</span><br><span class="line">npm -v    //显示 npm 的版本号</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091709361.png" alt="image-20240409170920334">  </p><p>【注】这块推荐使用14以上的nodeJS版本，之前用的v10的版本，会报错。</p><h2 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h2><p><a href="https://git-scm.com/">https://git-scm.com/</a></p><p>若为windows，需要安装Git bash，所有安装建议都无脑下一步即可。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091709228.png" alt="image-20240409170930145">  </p><p>若为Linux，直接命令行在线安装即可。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install -y git</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091709444.png" alt="image-20240409170945400">  </p><h2 id="设置用户名和邮箱"><a href="#设置用户名和邮箱" class="headerlink" title="设置用户名和邮箱"></a>设置用户名和邮箱</h2><p>因为 Git 是分布式版本控制系统，所以需要设置用户名和邮箱作为一个标识，在命令行输入如下：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;user_name&quot;</span> <span class="comment"># user_name 填入 GitHub 用户名</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global user.email <span class="string">&quot;user_email&quot;</span> <span class="comment"># user_email 填入 GitHub 注册的邮箱</span></span><br></pre></td></tr></table></figure><p>此处全局设置用户名和邮箱后，将作为本地和github同步的 **[UserName]**。</p><h2 id="搭建github仓库"><a href="#搭建github仓库" class="headerlink" title="搭建github仓库"></a>搭建github仓库</h2><h3 id="新建仓库"><a href="#新建仓库" class="headerlink" title="新建仓库"></a>新建仓库</h3><p>登录github官网后，点击 “New repository”，创建一个名字为username.github.io（这里的 username 要替换成自己的实际的用户名） 的仓库。</p><p>比如，之前设置的用户名为 “muhe”，则这块创建的仓库名字为 muhe.github.io</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091709357.png" alt="image-20240409170957327">  </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091710821.png" alt="image-20240409171006790">  </p><h3 id="配置SSH-Key"><a href="#配置SSH-Key" class="headerlink" title="配置SSH Key"></a>配置SSH Key</h3><p>使用git，输入如下命令，生成一对公私钥</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C <span class="string">&quot;user.email&quot;</span> # user.email 为GitHub 上注册的邮箱</span><br></pre></td></tr></table></figure><p>然后直接三个回车即可，默认不需要设置密码。查看是否已经有 ssh 密钥。打开用户目录 &#x2F;root&#x2F;.ssh</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091710435.png" alt="image-20240409171016406"> </p><p>然后找到生成的 .ssh 的文件夹中的 id_rsa.pub 密钥，将内容全部复制。</p><p>其中 id_rsa 是私钥不能泄露，id_rsa.pub 是公钥可以放心告诉他人。</p><p>打开<a href="https://github.com/settings/ssh/new">GitHub SSH and GPG keys</a> 页面，新建一个 ssh key：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091710250.png" alt="image-20240409171031214">  </p><p>Title 为标题，任意填即可，将刚刚复制的 id_rsa.pub 内容粘贴进去，最后点击 Add SSH key。在 Git Bash 中检测 GitHub 公钥设置是否成功，输入如下命令：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>验证是否可以连接成功，若连接成功的话，显示如下：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091710942.png" alt="image-20240409171040917">  </p><p>这一步骤，相当于生成了本地和github仓库的 <strong>[Password]</strong></p><h1 id="使用Hexo博客框架"><a href="#使用Hexo博客框架" class="headerlink" title="使用Hexo博客框架"></a>使用Hexo博客框架</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Hexo 是一个简单、快速、强大的基于 Github Pages 的博客框架，支持 Markdown 格式。</p><p>集成了众多优秀插件和主题。</p><p>由于 Github Pages 存放的都是静态文件，博客存放的不只是文章内容，还有文章列表、分类、标签、翻页等动态内容，假如每次写完一篇文章都要手动更新博文目录和相关链接信息，相信谁都会疯掉，所以 Hexo 所做的就是将这些 md 文件都放在本地，每次写完文章后调用写好的命令来批量完成相关页面的生成，然后再将有改动的页面提交到 GitHub 。</p><h2 id="安装与初始化"><a href="#安装与初始化" class="headerlink" title="安装与初始化"></a>安装与初始化</h2><p>输入如下命令进行安装：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">$ npm install -g hexo-cli # 此命令完成对 hexo 的安装</span><br></pre></td></tr></table></figure><p>安装完成后，在电脑的某个地方新建一个文件夹（名字可以随便取）专门用于存放博客代码，比如我的是 &#x2F;root&#x2F;blog，由于这个文件夹将来存放博客的所有内容和素材，以及所有的博客操作都会在其中完成，所以最好不要随便放。</p><p>进入上面新建的目录，输入如下命令进行初始化</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">$ hexo init # 该命令完成 hexo 在本地博客目录的初始化</span><br></pre></td></tr></table></figure><h2 id="生成静态文件"><a href="#生成静态文件" class="headerlink" title="生成静态文件"></a>生成静态文件</h2><p>输入如下命令，生成所需的静态文件：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">$ hexo g # 生成静态文件</span><br></pre></td></tr></table></figure><p>执行以上命令后，Hexo 就会在 public 文件夹中生成相关的 html 文件，这些文件将来都是要提交到 GitHub 上的 username.github.io 的仓库中去的。</p><h2 id="本地预览"><a href="#本地预览" class="headerlink" title="本地预览"></a>本地预览</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">$ hexo s # 开启本地预览</span><br></pre></td></tr></table></figure><p>hexo s 是开启本地预览服务，打开浏览器访问 <a href="http://localhost:4000/">http://localhost:4000</a> 即可看到内容，Ctrl+C 停止本地预览。本地预览可以实时查看博客的编辑情况，待博客写完后一起部署到 GitHub 上。</p><p>第一次初始化的时候 hexo 已经帮我们写了一篇名为 Hello World 的文章，默认的主题比较丑。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091710615.png" alt="image-20240409171052488">  </p><h1 id="上传到GitHub"><a href="#上传到GitHub" class="headerlink" title="上传到GitHub"></a>上传到GitHub</h1><h2 id="设置站点配置文件"><a href="#设置站点配置文件" class="headerlink" title="设置站点配置文件"></a>设置站点配置文件</h2><p>hexo 有 2 种 _config.yml 文件，一个是根目录下的全局的 _config.yml，一个是各个主体 theme 下的 _config.yml。将前者称为站点配置文件， 后者称为主题配置文件。</p><p>打开根目录下站点配置文件 _config.yml，配置有关 deploy 的部分：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https:<span class="comment">//hexo.io/docs/one-command-deployment</span></span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git<span class="meta">@github</span>.com:用户名/用户名.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>这块在动配置文件的时候，需要主要变量和值之前是要用空格来进行分隔的。</p><p>如 “type:git”，会报错；但使用”type: git”，不会报错。</p><h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><p>输入如下命令，安装部署插件</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save # 安装部署插件</span><br></pre></td></tr></table></figure><p>若并进行上述操作，直接部署的时候，会报错。</p><h2 id="部署到GitHub"><a href="#部署到GitHub" class="headerlink" title="部署到GitHub"></a>部署到GitHub</h2><p>输入如下命令，将本地的文件+资源等上传到github</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">$ hexo d</span><br></pre></td></tr></table></figure><p>部署成功后，打开对应的网址  <a href="https://www.username.github.io/">https://www.username.github.io</a></p><p>如果出现了和本地预览一样的效果，那么，表明部署成功。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091711823.png" alt="image-20240409171102708"> </p><h1 id="网站基本信息的修改"><a href="#网站基本信息的修改" class="headerlink" title="网站基本信息的修改"></a><strong>网站基本信息的修改</strong></h1><p>搭建好网站之后，有许多配置信息需要我们去修改，比如网站的标题、标签等选项，具体修改步骤如下：</p><p>打开博客目录下的_config.yml文件，找到如图所示的选项</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091711765.png" alt="image-20240409171116734"> </p><table><thead><tr><th><strong>参数</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>title</td><td>网站的标题</td></tr><tr><td>subtitle</td><td>网站的副标题</td></tr><tr><td>description</td><td>对于网站的描述，主要用于SEO</td></tr><tr><td>keywords</td><td>网站的关键词，支持多个关键词</td></tr><tr><td>author</td><td>作者名</td></tr><tr><td>language</td><td>网站使用的语言，对于简体中文用户来说，语言的设置跟使用不同的主题有关，可以参考各自主题的文档自行配置，一般为zh-CN</td></tr><tr><td>timezone</td><td>设置网站的时区，如果不填则默认使用你电脑的时区</td></tr></tbody></table><p>ps：更多的配置信息修改可以去hexo的官方文档，<a href="https://hexo.io/zh-cn/docs/configuration.html">戳我跳转</a>，可以修改一个选项之后，执行hexo clean、hexo g、hexo s在本地看一下效果，等全部修改好之后再推送到仓库。</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091711978.png" alt="image-20240409171129884"> </p><h1 id="更换Hexo主题"><a href="#更换Hexo主题" class="headerlink" title="更换Hexo主题"></a>更换Hexo主题</h1><p>hexo默认的主题有点ugly，修改好基本配置信息之后，可以考虑换一个主题，主题多可以说的上是hexo框架的一大卖点，<a href="https://hexo.io/themes/">戳我去挑选主题</a>，界面如下：</p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091711010.png" alt="image-20240409171137932"> </p><p>下面推荐几种看起来不错的主题：</p><h2 id="NexT"><a href="#NexT" class="headerlink" title="NexT"></a>NexT</h2><ul><li><a href="https://github.com/theme-next/hexo-theme-next">仓库地址</a></li><li><a href="https://theme-next.js.org/">预览地址</a></li><li>首先就是大名鼎鼎的Next主题了，页面简洁，功能全，用的人多，网上的个性化配置教程也超级多，用这个主题如果遇到问题，在网上基本上能找到对应的解决办法。</li></ul><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091711015.png" alt="image-20240409171147964"> </p><h2 id="Butterfly"><a href="#Butterfly" class="headerlink" title="Butterfly"></a>Butterfly</h2><ul><li><a href="https://github.com/jerryc127/hexo-theme-butterfly">仓库地址</a></li><li><a href="https://butterfly.js.org/">预览地址</a></li><li>挺好看的一个主题，用的人也挺多的：</li></ul><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091711188.png" alt="image-20240409171156067"> </p><h2 id="Nexmoe"><a href="#Nexmoe" class="headerlink" title="Nexmoe"></a>Nexmoe</h2><ul><li><a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe">仓库地址</a></li><li><a href="https://nexmoe.com/">预览地址</a>)</li><li>看起来不错~~</li></ul><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091712812.png" alt="image-20240409171235695"> </p><h2 id="……"><a href="#……" class="headerlink" title="……"></a>……</h2><h2 id="配置步骤"><a href="#配置步骤" class="headerlink" title="配置步骤"></a>配置步骤</h2><p>这块个人比较喜欢的一款主题<strong>Metery</strong>，部署过程如下：</p><p>Hexo的所有主题源代码都是托管在Github的，更换主题第一步：<strong>将该主题的源代码clone下来，放到本地Hexo站点根目录下的<strong><strong>themes</strong></strong>文件夹中</strong>。</p><p>访问Metery主题的Github仓库,复制仓库地址：<a href="https://github.com/blinkfox/hexo-theme-matery">https://github.com/blinkfox/hexo-theme-matery</a></p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091712700.png" alt="image-20240409171247643"> </p><p>然后在本地<strong>站点根目录</strong>打开git bash 命令行，进入themes文件夹，开始拉取代码到本地：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">cd themes</span><br><span class="line">git clone https:<span class="comment">//github.com/blinkfox/hexo-theme-matery.git</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091712160.png" alt="image-20240409171256135"> </p><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091713557.png" alt="image-20240409171302526">  </p><p>更换主题</p><p>下载Hexo的主题到&#x2F;themes文件夹之后，要在<strong>站点配置文件</strong>中配置使用该主题：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">vim config.yml</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091713874.png" alt="image-20240409171309848">  </p><p>hexo一键三连后，查看效果</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/jingweihang/img/raw/master/hexo/202404091713074.png" alt="image-20240409171347929"> </p>]]></content>
      
      
      <categories>
          
          <category> 博客搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> blog </tag>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
